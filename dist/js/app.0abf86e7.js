(function(e){function t(t){for(var n,u,l=t[0],s=t[1],o=t[2],d=0,v=[];d<l.length;d++)u=l[d],Object.prototype.hasOwnProperty.call(r,u)&&r[u]&&v.push(r[u][0]),r[u]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);c&&c(t);while(v.length)v.shift()();return i.push.apply(i,o||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=u(u.s=a[0]))}return e}var n={},r={app:0},i=[];function u(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=n,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(a,n,function(t){return e[t]}.bind(null,n));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var c=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"034f":function(e,t,a){"use strict";a("85ec")},"061f":function(e,t,a){},"0666":function(e,t,a){"use strict";a("061f")},"0b8b":function(e,t,a){},"0ba3":function(e,t,a){e.exports=a.p+"img/atlasbg.c7aadee6.png"},1:function(e,t){},"14da":function(e,t,a){},"1a7f":function(e,t,a){"use strict";a("14da")},2:function(e,t){},2357:function(e,t,a){"use strict";a("0b8b")},"28f1":function(e,t,a){e.exports=a.p+"img/atlasbg.b6394ec2.png"},"2abc":function(e,t,a){},3:function(e,t){},3261:function(e,t,a){},"36cd":function(e,t,a){},"397c":function(e,t,a){"use strict";a("652f")},"3b6e":function(e,t,a){"use strict";a("7963")},"3bf9":function(e,t,a){"use strict";a("967f")},4373:function(e,t,a){},"4a16":function(e,t,a){"use strict";a("2abc")},"4be2":function(e,t,a){},"4d14":function(e,t,a){},"507d":function(e,t,a){"use strict";a("5a45")},"56c0":function(e,t,a){"use strict";a("3261")},"57f3":function(e,t,a){},"5a45":function(e,t,a){},"5d33":function(e,t,a){"use strict";a("c765")},"652f":function(e,t,a){},6693:function(e,t,a){"use strict";a("7c57")},"6bca":function(e,t,a){"use strict";a("4be2")},7963:function(e,t,a){},"7c57":function(e,t,a){},"7f10":function(e,t,a){"use strict";a("df51")},8168:function(e,t,a){"use strict";a("57f3")},"85ec":function(e,t,a){},"8a6b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC70lEQVRoge3Zz6uUVRzH8dftWuEM/igcSS0Eg0ToutIEFcncSDsj2gtSQWC4iAgVXVgQIZQ/cOvGhUqQLVqF/4AaiIvSILikZQhCpV6J9Lo4MzVz5rkzzzPPee5ca95wuJy5Z77n83nm/Pw+jBjx/2YsR5uDzdIvzgRexRasxFIswZO4g1/wAy7hPC7g4UCqCzJtZgMN7MX1Zrsi5Wd8ghUVaqetw3YTi3AUUwMIj8t9HMezVRtomdiBGwmEx+UW3qraQK9yB2exG6/gBdSEOdDAeuzCKfzeI84xzJtNAz/hPWFY5WU+dgqTOivm1802SZhJ+N/CkCrT0Tzswb2M+Ock+iV6Pf1+y2te1sleyY6mCN5vCKUysVzYI+L4b5YNnGcCpzLRwNUo9m94JlH8WeFl3NVp4shQFQ3AXp0GpoQh9thQ071ZfjxURQPwtk4Dk3hiqIoKUsMfOk2sjxvNZUf38E302Wtxo7lsgHBvaGdd3GCuG7gc1VcPRUUJluo+cj9WPK378tNB1hCKT4bJjrVVkGXgdlSv7KqXg/iO8WfcIMvAzaj+UjI5xVkV1X+NG2QZuNL8+8C/x9thsTaqX83zpY14HQuTyynOaZ3z8cPhyilGXRjz7Qa6NrK85MngpeZdCQ5zC/ARvlcs61CWupCKbDdwqGiQ94WdrxXgcEKB/divU/xAF5oDUZAH2JpO44xM6N5MvxgkUF1IwLaCfCdk26qkgR91ii91qd8mPPmzgqEqachOq7xRNvBW3avQQmwuG7iNCd1PfhqfJ+zjH8bwpfDLfCasVINSxz7ZqcWvMF5K6Qx8EHU0KWSgi1AT1vl4qWwXX8kpeBX+ijo7EbXZJMyd55sinhIuJhvwjnA8iHfYeMWp5Mm32C6cClsZ6hej/3/bQ1yvclOCCZuXRfgUJ6PPx3WnQvqVKeGpL54N4f1YK7/wSeF4sKxMh0lf5QiHrTNYg+eE5XZMeP10HddwUUiXXDJLr1lHjPgv8wiycGOIG8GYJAAAAABJRU5ErkJggg=="},"8e81":function(e,t,a){},"967f":function(e,t,a){},"9bcd":function(e,t,a){"use strict";a("d2aa")},a173:function(e,t,a){"use strict";a("8e81")},a2ae:function(e,t,a){},abb5:function(e,t,a){},ad7f:function(e,t,a){},b75f:function(e,t,a){},b76c:function(e,t,a){"use strict";a("36cd")},b7d7:function(e,t,a){"use strict";a("b75f")},bbd5:function(e,t,a){"use strict";a("a2ae")},c765:function(e,t,a){},c827:function(e,t,a){},c9d8:function(e,t){},cd49:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"loadDatasetMenu",(function(){return Ot})),a.d(n,"waferInformationMenu",(function(){return jt})),a.d(n,"chipInformationMenu",(function(){return Rt})),a.d(n,"dbitInformationMenu",(function(){return Ct})),a.d(n,"uploadDatasetFileMenu",(function(){return St})),a.d(n,"files",(function(){return It})),a.d(n,"uploadDialogWidth",(function(){return At})),a.d(n,"uploadQcDirectoryMenu",(function(){return Ft})),a.d(n,"filesInDirectory",(function(){return Mt})),a.d(n,"uploadDirectoryDialogWidth",(function(){return Dt})),a.d(n,"manageDatasetFilesMenu",(function(){return Pt}));var r={};a.r(r),a.d(r,"findDbitRuns",(function(){return Fa}));var i={};a.r(i),a.d(i,"helpDialog",(function(){return Na})),a.d(i,"aboutDialog",(function(){return La}));var u={};a.r(u),a.d(u,"registerNewUserMenu",(function(){return dn})),a.d(u,"resetUserPasswordMenu",(function(){return vn})),a.d(u,"changeUserLevelMenu",(function(){return pn}));var l={};a.r(l),a.d(l,"isAdmin",(function(){return Pn})),a.d(l,"user",(function(){return u}));var s={};a.r(s),a.d(s,"loadDatasetMenu",(function(){return Un})),a.d(s,"waferInformationMenu",(function(){return Bn})),a.d(s,"chipInformationMenu",(function(){return qn})),a.d(s,"dbitInformationMenu",(function(){return Nn}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("a026"),c=a("7591"),d=a.n(c),v=(a("e792"),a("d5e8"),a("5363"),a("a6f4"));o["default"].use(v["b"]);var p=a("8a60"),f=a.n(p),g=f.a.prototype.stopCallback;function m(){f.a.paused=!1,f.a.pause=function(){f.a.paused=!0},f.a.unpause=function(){f.a.paused=!1},f.a.prototype.stopCallback=function(e,t,a){return!!f.a.paused||g(e,t,a)}}m();var h=a("4eb5"),b=a.n(h);o["default"].use(b.a);var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view"),a("global-snackbar"),a("prompt"),a("upload-progress-display")],1)},w=[],x=a("2f62"),y=a("1898"),k=a("1da1"),O=a("5530"),j=(a("96cf"),a("4de4"),a("d3b7"),a("159b"),a("d81d"),a("3ca3"),a("ddb0"),a("ac1f"),a("1276"),a("99af"),a("bc3a")),R=a.n(j),C=a("2ef0"),S=a.n(C),I=function(e){return T(e,F)},A=function(e){return E(e,F)},F=Object(y["b"])({namespaced:!0,state:{inProgress:!1,dialogOpen:!1,uploads:[]},getters:{totalProgress:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=A(t),r=n.state,i=r.uploads.filter((function(e){return!e.cancelled}));return Math.round(i.reduce((function(e,t){return e+t.progress}),0)/i.length)},allSuccessful:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=A(t),r=n.state;return r.uploads.filter((function(e){return!e.error&&!e.cancelled})).length===r.uploads.length}},mutations:{setInProgress:function(e,t){e.inProgress=t},setDialogOpen:function(e,t){e.dialogOpen=t},setUploads:function(e,t){e.uploads=t},setUploadAtIndex:function(e,t){var a=t.upload,n=t.index;o["default"].set(e.uploads,n,a)}},actions:{cancelUpload:function(e,t){var a=I(e),n=a.state,r=a.commit,i=n.uploads[t];i.cancelToken.cancel();var u=Object(O["a"])(Object(O["a"])({},i),{},{cancelled:!0});r.setUploadAtIndex({index:t,upload:u})},cancelAllUploads:function(e){var t=I(e),a=t.state,n=t.dispatch;a.uploads.forEach((function(e,t){n.cancelUpload(t)}))},uploadDatasetFiles:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,l,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(l=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=I(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),s=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){l(e,t)}})})),i.setUploads(s),o=s.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,l=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},l),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(o);case 10:i.setInProgress(!1);case 11:case"end":return a.stop()}}),a)})))()},uploadMetadataFile:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,l,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(l=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=I(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),s=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){l(e,t)}})})),i.setUploads(s),o=s.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadMetadataFile(t);case 2:n=e.sent,l=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},l),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(o);case 10:i.setInProgress(!1);case 11:case"end":return a.stop()}}),a)})))()},uploadQcDatasetFiles:function(e,t){return Object(k["a"])(regeneratorRuntime.mark((function a(){var n,r,i,u,l,s,o,c,d,v;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(l=function(e,t){var a=e.loaded/e.total*100,n=r.uploads[t],u=Object(O["a"])(Object(O["a"])({},n),{},{progress:a});i.setUploadAtIndex({upload:u,index:t})},n=I(e),r=n.state,i=n.commit,u=n.rootState.client,null!==u){a.next=4;break}return a.abrupt("return");case 4:return i.setInProgress(!0),s=t.map((function(e,t){return Object(O["a"])(Object(O["a"])({},e),{},{progress:0,error:null,cancelled:!1,finished:!1,cancelToken:R.a.CancelToken.source(),onProgress:function(e){l(e,t)}})})),i.setUploads(s),o=s.map(function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.uploadDatasetFile(t);case 2:n=e.sent,l=r.uploads[a],i.setUploadAtIndex({index:a,upload:Object(O["a"])(Object(O["a"])({},l),{},{error:n,finished:!0})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.next=10,Promise.all(o);case 10:return c=t[0].output_filename.split("/")[0],d=C["uniq"](t.map((function(e){return e.output_filename.split("/")[1]}))),v=d.map((function(e){var t="".concat(c,"/").concat(e),a={params:{qc_dir:t}},n=u.generateQcEntry(a);return n})),a.next=15,Promise.all(v).then((function(e){C["each"](e,(function(e){}))}));case 15:i.setInProgress(!1);case 16:case"end":return a.stop()}}),a)})))()},resetUploadState:function(e){var t=I(e),a=t.commit;a.setInProgress(!1),a.setUploads([])}}}),M=F;o["default"].use(x["a"]);var D=Object(y["a"])({state:{client:null,currentComponent:{component:null},serverStatus:null,subMenu:null,xploreData:null},getters:{},mutations:{setClient:function(e,t){e.client=t},setComponent:function(e,t){e.currentComponent=t},setServerStatus:function(e,t){e.serverStatus=t},setSubmenu:function(e,t){e.subMenu=t},setXploreData:function(e,t){e.xploreData=t}},actions:{},modules:{upload:M}}),P=D.store,T=(D.rootActionContext,D.moduleActionContext),E=(D.rootGetterContext,D.moduleGetterContext),U=P,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-snackbar",e._b({attrs:{timeout:e.timeout},scopedSlots:e._u([e.buttonExists?{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{text:"",icon:!!e.buttonIcon},on:{click:e.buttonClicked}},"v-btn",n,!1),[e.buttonIcon?a("v-icon",[e._v(" "+e._s(e.buttonIcon)+" ")]):a("span",[e._v(" "+e._s(e.button)+" ")])],1)]}}:null],null,!0),model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},"v-snackbar",e.options,!1),[e._v(" "+e._s(e.text)+" "),e.buttonExists?a("v-spacer"):e._e()],1)},q=[],N=Object(v["g"])(!1),L=Object(v["g"])(""),G="",$=Object(v["g"])(G),z="",V=Object(v["g"])(z),W=null,H=Object(v["g"])(W),J=2e3,X=Object(v["g"])(J),Q={color:"secondary"},Y=Object(v["g"])(Q);function K(e){L.value=e.text,$.value=e.button||G,V.value=e.buttonIcon||z,H.value=e.callback||W,X.value=e.timeout||J,Y.value=Object(O["a"])(Object(O["a"])({},Q),e.options),N.value=!0}Object(v["h"])(N,(function(e){!1===e&&setTimeout((function(){Y.value=Q}),150)}));var Z=Object(v["c"])({name:"Snackbar",setup:function(){var e=Object(v["a"])((function(){return $.value||V.value}));function t(){null!==H.value&&H.value(),N.value=!1}return{show:N,text:L,button:$,buttonIcon:V,buttonExists:e,callback:H,timeout:X,options:Y,buttonClicked:t}}}),ee=Z,te=a("2877"),ae=Object(te["a"])(ee,B,q,!1,null,null,null),ne=ae.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"400"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clickNegative.apply(null,arguments)},input:function(t){return t||e.clickNegative()}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("v-card",[e.title?a("v-toolbar-title",{staticClass:"title pa-4"},[e._v(" "+e._s(e.title)+" ")]):e._e(),a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}],staticClass:"pl-4"},[e._v(" "+e._s(e.message)+" ")]),a("v-card-actions",[a("v-spacer"),e.negativeText?a("v-btn",{attrs:{text:""},on:{click:e.clickNegative}},[e._v(" "+e._s(e.negativeText)+" ")]):e._e(),e.positiveText?a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.clickPositive}},[e._v(" "+e._s(e.positiveText)+" ")]):e._e()],1)],1)],1)},ie=[],ue="",le="",se=null,oe="",ce="",de=Object(v["g"])(!1),ve=Object(v["g"])(ue),pe=Object(v["g"])(le),fe=Object(v["g"])(se),ge=Object(v["g"])(oe),me=Object(v["g"])(ce);var he=Object(v["c"])({name:"Prompt",setup:function(){function e(){fe.value&&fe.value(!0),de.value=!1}function t(){fe.value&&fe.value(!1),de.value=!1}return{show:de,title:ve,message:pe,positiveText:ge,negativeText:me,clickPositive:e,clickNegative:t}}}),be=he,_e=Object(te["a"])(be,re,ie,!1,null,null,null),we=_e.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dialogOpen?a("v-card",{staticClass:"progress-card mr-5 mb-5",attrs:{"min-width":"20vw"}},[a("v-card-title",[e.inProgress?e._e():[e.allSuccessful?a("v-icon",{attrs:{left:"",color:"success"}},[e._v(" mdi-check ")]):a("v-icon",{attrs:{left:"",color:"warning"}},[e._v(" mdi-alert-circle ")])],e.inProgress?a("span",[e._v(" Uploading "+e._s(e.uploads.length)+" Files ")]):a("span",[e._v(" Uploads Finished ")]),a("v-spacer"),e.minimized?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!1}}},[a("v-icon",[e._v("mdi-chevron-up")])],1):a("v-btn",{attrs:{icon:""},on:{click:function(t){e.minimized=!0}}},[a("v-icon",[e._v("mdi-chevron-down")])],1),a("v-btn",{attrs:{icon:""},on:{click:e.handleClickClose}},[a("v-icon",[e._v("mdi-close")])],1),a("v-dialog",{attrs:{width:"30vw"},model:{value:e.closeDialogDialog,callback:function(t){e.closeDialogDialog=t},expression:"closeDialogDialog"}},[a("v-card",[a("v-card-title",[e._v("Cancel Uploads?")]),a("v-card-subtitle",[e._v(" Are you sure you want to cancel all uploads? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.cancelAllUploads}},[e._v(" Cancel Uploads ")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.closeDialogDialog=!1}}},[e._v(" Continue ")])],1)],1)],1)],2),e.inProgress?a("v-progress-linear",{attrs:{value:e.totalProgress}}):e._e(),e.minimized?e._e():a("v-card-text",{staticClass:"pa-0"},[a("v-list",{attrs:{dense:""}},e._l(e.uploads,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-avatar",[a("v-icon",[e._v("mdi-folder-upload")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.file.name)+" ")]),t.error?a("v-list-item-subtitle",{staticClass:"red--text"},[e._v(" "+e._s(t.error)+" ")]):e._e()],1),a("v-list-item-action",[t.cancelled?a("v-icon",{attrs:{color:"error"}},[e._v(" mdi-cancel ")]):t.error?a("v-icon",{attrs:{color:"error"}},[e._v(" mdi-close ")]):a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(r){var i=r.hover;return[i&&!t.finished?a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.cancelUpload(n)}}},[a("v-icon",[e._v("mdi-close")])],1):t.finished?a("v-icon",{attrs:{color:"success"}},[e._v(" mdi-check ")]):a("v-progress-circular",{attrs:{color:"primary",width:"2",size:"24",value:50}})]}}],null,!0)})],1)],1)})),1)],1)],1):e._e()},ye=[],ke={dispatch:K},Oe=Object(v["c"])({name:"UploadProgressDisplay",setup:function(){var e=Object(v["a"])((function(){return U.state.upload.uploads})),t=Object(v["a"])((function(){return U.getters.upload.allSuccessful})),a=Object(v["a"])((function(){return U.state.upload.inProgress})),n=Object(v["a"])((function(){return U.state.upload.dialogOpen})),r=Object(v["a"])((function(){return U.getters.upload.totalProgress})),i=Object(v["g"])(!0),u=Object(v["g"])(!1);function l(){U.commit.upload.setDialogOpen(!1),u.value=!1}function s(e){U.dispatch.upload.cancelUpload(e)}function o(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.dispatch.upload.cancelAllUploads();case 2:ke.dispatch({text:"Uploads Cancelled."}),l();case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(){a.value?u.value=!0:l()}return{uploads:e,allSuccessful:t,inProgress:a,totalProgress:r,dialogOpen:n,closeDialog:l,closeDialogDialog:u,handleClickClose:d,cancelUpload:s,cancelAllUploads:o,minimized:i}}}),je=Oe,Re=(a("507d"),Object(te["a"])(je,xe,ye,!1,null,"6e5fe924",null)),Ce=Re.exports,Se=Object(v["c"])({name:"App",components:{GlobalSnackbar:ne,Prompt:we,UploadProgressDisplay:Ce},setup:function(e,t){Object(v["a"])((function(){return U.state.client}))}}),Ie=Se,Ae=(a("034f"),Object(te["a"])(Ie,_,w,!1,null,null,null)),Fe=Ae.exports,Me=a("8c4f"),De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("appbar",{staticClass:"appbar",on:{openDrawer:e.openDrawer}}),a("v-sheet",{staticStyle:{position:"relative"}},[a("main-menu",{ref:"mainmenu",staticStyle:{"z-index":"99999"},on:{menuClicked:e.menuClicked}}),e.component.component?[a(e.component.component,{tag:"component",attrs:{query:e.component}})]:e._e(),null!==e.user&&void 0!==e.user&&"/"===e.currentRoute.fullPath?[a("landing-page")]:e._e()],2)],1)},Pe=[],Te=(a("e9c4"),a("caad"),a("2532"),a("a78e")),Ee=a.n(Te),Ue=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_SERVER_URL,Be="https://api.atlasxomics.com/test",qe="https://api.atlasxomics.com/production",Ne="atxLogin",Le=a("d4ec"),Ge=a("bee2"),$e=(a("25f0"),a("b0c0"),a("d9e2"),a("a9e3"),6e5);function ze(e){var t=e.split(".");if(3===t.length){var a=JSON.parse(atob(t[1]));if(a.exp)return 1e3*a.exp-$e-Date.now()}}function Ve(e,t){var a=e.toString();while(a.length<t)a="0".concat(a);return a}var We=function(){function e(t,a){Object(Le["a"])(this,e),this.axios=R.a.create({baseURL:t,headers:{common:{Authorization:a}}}),this.serverURL=t,this.urlPostfix=this.getUrlPostfix(),this.authorizationToken=a,this.user=null,this.workers=null}return Object(Ge["a"])(e,[{key:"initAsync",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchUser();case 3:this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),ze(this.authorizationToken)),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUrlPostfix",value:function(){var e=this.serverURL.split("/"),t=e[e.length-1];return t}},{key:"updateWorkers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getWorkerSummary();case 2:this.workers=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApplicationInfo",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/app");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/refreshtoken");case 2:t=e.sent,a=t.data.access_token,this.authorizationToken="JWT ".concat(a),this.refreshTimeoutId=window.setTimeout(this.refreshToken.bind(this),ze(a));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/whoami");case 2:t=e.sent,a=t.data,n={username:a.Username,user_level:0,name:"None",email:"",groups:a.groups},this.user=n;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"downloadByLink",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link",r={filename:t,expiry:a},e.next=4,this.axios.get(n,{params:r});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"downloadByLinkPublic",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/v1/storage/download_link_public",r={bucket_name:t,filename:a},e.next=4,this.axios.get(n,{params:r});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"uploadDatasetFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.file,t.file.name),a.append("meta",JSON.stringify(t.meta)),a.append("output_filename",t.output_filename),n="api/v1/storage/upload",e.prev=5,e.next=8,this.axios.post(n,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!R.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"uploadMetadataFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("file",t.file,t.file.name),a.append("meta",JSON.stringify(t.meta)),a.append("output_filename",t.output_filename),n="api/v1/dataset/".concat(t.meta_type,"/upload"),e.prev=5,e.next=8,this.axios.post(n,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t.onProgress,cancelToken:t.cancelToken.token});case 8:return e.abrupt("return",null);case 11:if(e.prev=11,e.t0=e["catch"](5),!R.a.isCancel(e.t0)){e.next=15;break}return e.abrupt("return","Upload Cancelled.");case 15:return e.abrupt("return","Dataset File Already Exists.");case 16:case"end":return e.stop()}}),e,this,[[5,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changePassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/auth/changepassword",/Success : (.+)/,e.prev=2,e.next=5,this.axios.put(a,t);case 5:n=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",!1);case 11:if(!n.data){e.next=13;break}return e.abrupt("return",!0);case 13:throw new Error("Unknown Response Received from ".concat(a,"."));case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("/api/v1/auth/user",t);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"user_request_account",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/user_account_request",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"notify_user_group_assignment",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/auth/inform_user_assignment",t);case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{user:t}},n=this.axios.put("/api/v1/auth/confirm",a),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.delete("/api/v1/auth/user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetUserPassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/resetpassword",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNames",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/gmnames",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneMotifNamesByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:a},e.next=3,this.axios.post("api/v1/genes/gmnames/".concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getSpatialData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpatialDataByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={key:a},e.next=3,this.axios.post("api/v1/genes/get_spatial_data/".concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getSummation",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,rows:a},e.next=3,this.axios.post("api/v1/genes/get_summation",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressions",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={filename:t},e.next=3,this.axios.post("api/v1/genes/expressions",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneExpressionsByToken",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},e.next=3,this.axios.post("api/v1/genes/expressions/".concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGeneSpatial",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={filename:t,genes:a},e.next=3,this.axios.post("api/v1/genes/get_spatial_data",n,{timeout:3e5});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"encodeLink",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("api/v1/genes/generate_link",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWorkerSummary",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers/summary",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWorkers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/workers",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTaskSync",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task_sync",u={queue:r,task:t,args:a,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="/api/v1/task",u={queue:r,task:t,args:a,kwargs:n},e.next=4,this.axios.post(i,u);case 4:return l=e.sent,e.abrupt("return",l.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"postPublicTask",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n,r,i){var u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u="/api/v1/public_task",l={queue:r,task:t,args:a,kwargs:n,key:i},console.log(l),e.next=5,this.axios.post(u,l);case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t,a,n,r,i){return e.apply(this,arguments)}return t}()},{key:"decodeMetadata",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/storage/decode_meta/".concat(t),e.next=3,this.axios.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTaskStatus",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/task/".concat(t),e.next=3,this.axios.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJsonFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/json",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCsvFile",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/csv",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFileList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/list",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubFolders",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.post("api/v1/storage/sub_folders",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBuckets",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/storage/fetch_buckets");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getImage",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:a}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getHomePageImages",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"image/png",e.prev=1,e.next=4,this.axios.get("/api/v1/storage/png",{params:{filename:t.params.filename,bucket_name:t.params.bucket},responseType:"blob"});case 4:return n=e.sent,e.abrupt("return",new File([n.data],t.params.filename,{type:a}));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getImageAsJPG",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/image_as_jpg",{params:t.params,responseType:"blob"});case 3:return a=e.sent,e.abrupt("return",new File([a.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGrayImageAsCroppedJPG",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.axios.get("/api/v1/storage/grayscale_image_jpg_cropping",{params:t.params,responseType:"blob"});case 3:return a=e.sent,e.abrupt("return",new File([a.data],t.params.filename,{type:"image/jpeg"}));case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generateFrontPage",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:t,runId:a},e.next=3,this.axios.post("/api/v1/storage/generate_frontpage",n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"generateQcEntry",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/qc_entry",null,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMetadataFromRunId",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/api/v1/dataset/slimstest_runid",n="D".concat(Ve(Number(t.split("D")[1]),5)),r={params:{run_id:n}},e.next=5,this.axios.get(a,r);case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunIdList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/api/v1/dataset/slimstest_list_runids",e.next=3,this.axios.get(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkWafer",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getWafers(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWafers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafers",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putWafers",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/wafers",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteWafer",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/wafers",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkChip",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getChips(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getChips",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/chips",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putChips",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/chips",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteChip",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/chips",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkDbit",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getDbits(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDbits",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/dbits",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putDbits",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/dbits",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDbit",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t})}},e.next=3,this.axios.delete("/api/v1/dataset/dbits",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filter:JSON.stringify({_id:t}),options:JSON.stringify({_id:1})}},e.next=3,this.getQc(a);case 3:if(n=e.sent,!(n.length>0)){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/qc",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"putQc",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/dataset/qc",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWaferTrace",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/dataset/wafertrace",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRunsCollaborator",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="dbit_metadata",r={params:{collaborator:t,table_name:n,web_objs:a}},e.next=4,this.axios.get("/api/v1/run_db/get_runs_collaborator",r);case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"get_user_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/list_accounts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_group_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/auth/group");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"create_group",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={data:{group_name:t,description:a}},e.next=3,this.axios.post("/api/v1/auth/group",n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"modify_group_list",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.put("/api/v1/auth/modify_group_list",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete_group",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{group_name:t}},e.next=3,this.axios.delete("/api/v1/auth/group",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disable_user",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{username:t}},e.next=3,this.axios.put("/api/v1/auth/disable_user",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logIntoPublic",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("api/v1/auth/log_into_public");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUpdateDate",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_last_update");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSlimsData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_slims_data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPublicRuns",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/populate_homepage");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupPublicRuns",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="all_public_run_data",n={params:{table:a,group:t}},e.next=4,this.axios.get("/api/v1/run_db/get_group_runs",n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"re_initialize_db",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="public_data",a={params:{database:t}},console.log(a),e.next=5,this.axios.get("/api/v1/run_db/reinitialize_db",a);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePublicData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,this.axios.post("/api/v1/run_db/update_public",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchPMID",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_pmid",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchAuthors",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={query:t},e.next=3,this.axios.post("/api/v1/run_db/search_authors",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"grabPaths",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/retrieve_paths");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm_user_status_via_email",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={params:{username:t,confirmation_code:a}},e.next=3,this.axios.get("/api/v1/auth/confirm_user_via_email",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"resend_registration_code",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/resend_confirmation_via_email",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"forgotPasswordRequest",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{username:t}},e.next=3,this.axios.get("/api/v1/auth/forgot_password_request",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetPassword",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={username:t,password:a,code:n},e.next=3,this.axios.post("/api/v1/auth/forgot_password_confirmation",r);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"confirm_user_email_admin",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={username:t},e.next=3,this.axios.post("/api/v1/auth/confirm_user_email_admin",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_available_fields",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_field_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"upload_metadata_from_page",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/upload_metadata_page",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_info_from_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_run_id",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_run_ids",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_run_ids");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_info_from_results_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={results_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_info_from_results_id",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkSpatialFolderExists",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket_name:t,run_id:a},e.next=3,this.axios.post("/api/v1/run_db/check_spatial_folder_exists",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getJobs",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_jobs",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ensure_run_id_created",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={run_id:t},e.next=3,this.axios.post("/api/v1/run_db/ensure_run_id_created",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_ids",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_studies");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_study_runs",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={study_id:t},e.next=3,this.axios.post("/api/v1/run_db/get_study_runs",a);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update_study_table",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/update_study_table",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_study_types",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_study_types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_downloadable_files_for_run",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={tissue_id:t},e.next=3,this.axios.post("/api/v1/run_db/load_run_files_info",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_type_options",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_file_type_options");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"submit_file_changes",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/set_run_files",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_file_info_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/run_db/get_file_info_run_id",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"get_all_downloadable_files_run_id",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get("/api/v1/run_db/get_all_downloadable_files_run_id");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_urls",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_urls",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"generate_presigned_url",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.post("/api/v1/storage/generate_presigned_url",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"Create",value:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new e(a,n),t.next=3,r.initAsync();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));function a(e,a){return t.apply(this,arguments)}return a}()},{key:"CreatePublic",value:function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new e(a,n),t.abrupt("return",r);case 2:case"end":return t.stop()}}),t)})));function a(e,a){return t.apply(this,arguments)}return a}()}]),e}(),He=Object(v["a"])((function(){return U.state.client})),Je=Object(v["a"])((function(){return null!==He.value})),Xe=Object(v["a"])((function(){var e;return(null===(e=He.value)||void 0===e?void 0:e.user)||null}));Object(v["a"])((function(){return null!==Xe.value}));function Qe(e){var t=1/24;Ee.a.set(Ne,JSON.stringify(e),{expires:t})}function Ye(){var e=Ee.a.get(Ne);return void 0===e?e:JSON.parse(e)}function Ke(){var e;Ee.a.remove(Ne),window.clearTimeout(null===(e=U.state.client)||void 0===e?void 0:e.refreshTimeoutId),U.commit.setClient(null)}function Ze(e){if(!He.value)return!1;if(!He.value.user)return!1;if("any"===e[0]&&He.value.user.groups.length>0)return!0;var t=!1;return S.a.each(He.value.user.groups,(function(a){e.includes(a)&&(t=!0)})),t}function et(){return tt.apply(this,arguments)}function tt(){return tt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Ye(),t){e.next=3;break}return e.abrupt("return");case 3:return a=t.url,n=t.token,e.prev=4,e.t0=U.commit,e.next=8,We.Create(a,n);case 8:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e["catch"](4),Ke();case 15:case"end":return e.stop()}}),e,null,[[4,12]])}))),tt.apply(this,arguments)}var at=a("53ca"),nt=(a("fb6a"),a("b64b"),a("498a"),a("4d63"),a("c607"),a("2c3e"),a("00b4"),a("9129"),a("ec26e"));function rt(){return Object(nt["a"])()}function it(e){var t=[];return S.a.forIn(e,(function(e,a){var n={key:a,value:e};t.push(n)})),t}function ut(e){var t={};return S.a.each(e,(function(e){t[e.key]=e.value})),t}function lt(e,t){var a=e,n={name:a.name||void 0,path:a.path,params:a.params,query:t};return n}function st(e,t){for(var a=[],n=0;n<e.length;n+=t)a[a.length]=e.slice(n,n+t);return a}var ot=function e(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var a=[];return t.forEach((function(e){a.push(e)})),a.map((function(t){return e(t)}))}if("object"===Object(at["a"])(t)&&t!=={}){var n=Object(O["a"])({},t);return Object.keys(n).forEach((function(t){n[t]=e(n[t])})),n}return t},ct={nonEmpty:function(e){return e&&""!==e.trim()||"Must not be empty"},isEmail:function(e){if(!e)return"Email address is missing";var t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return t.test(e)||"Not a proper email address"},isNumber:function(e){var t=Number(e);return!Number.isNaN(t)||"Numbers only"},isDate:function(e){var t=new RegExp(/^\d{4}-\d{2}-\d{2}$/);return t.test(e)||"Date should be in te format of YYYY-MM-DD"},isTime:function(e){var t=new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/);return t.test(e)||"Time format should be HH:MM"}},dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app-bar",{attrs:{app:"",dense:""}},[a("div",{staticStyle:{cursor:"pointer"}},[a("v-img",{attrs:{width:"40px",src:"favicon-nobg.png"},on:{click:e.redirectToVisual}})],1),e.resolveAuthGroup(["admin","user"])?a("v-app-bar-nav-icon",{on:{click:function(t){return e.$emit("openDrawer")}}}):e._e(),e._l(e.subMenu,(function(t){return a("v-tooltip",{key:t.text,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[t.type?e._e():[a("v-btn",e._g(e._b({class:t.enabled?"visible":"hidden",attrs:{id:t.ref?t.ref:"",text:"",icon:!!t.icon},on:{click:t.click}},"v-btn",i,!1),r),[t.icon?[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])]:e._e(),t.icon?e._e():[e._v(" "+e._s(t.text)+" ")]],2)],"component"==t.type?[a("div",{attrs:{id:t.id}})]:e._e()]}}],null,!0)},[a("span",{key:t.text+"-span"},[e._v(e._s(t.tooltip))])])})),a("v-spacer"),e.loggedIn?[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{text:""}},n),[e._v(" "+e._s(e.user)+" "),"production"!==e.urlPostfix?a("span",[e._v("("+e._s(e.urlPostfix)+")")]):e._e()])]}}],null,!1,2580300180),model:{value:e.userMenu,callback:function(t){e.userMenu=t},expression:"userMenu"}},[a("v-list",[e.resolveAuthGroup(["admin"])?a("v-list-item",[a("v-btn",{attrs:{text:"",block:""},on:{click:e.redirectToRunAdding}},[e._v(" Add a Run ")])],1):e._e(),a("v-list-item",[a("v-dialog",{attrs:{width:"40vw"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{text:"",block:""}},n),[e._v(" Change Password ")])]}}],null,!1,1519952064),model:{value:e.changePasswordMenu,callback:function(t){e.changePasswordMenu=t},expression:"changePasswordMenu"}},[a("change-password-menu",{on:{close:function(t){e.changePasswordMenu=!1,e.userMenu=!1}}})],1)],1),a("v-list-item",[a("v-btn",{attrs:{text:"",block:"",color:"error"},on:{click:e.logout}},[e._v(" Logout ")])],1)],1)],1)]:e._e()],2)},vt=[],pt=a("2340"),ft=a("fcf4"),gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:e.uploadDialogWidth},model:{value:e.uploadDatasetFileMenu,callback:function(t){e.uploadDatasetFileMenu=t},expression:"uploadDatasetFileMenu"}},[a("upload-dataset-file-menu")],1),a("fresh-dialog",{model:{value:e.uploadQcDirectoryMenu,callback:function(t){e.uploadQcDirectoryMenu=t},expression:"uploadQcDirectoryMenu"}},[a("upload-qc-directory-menu")],1),a("div",[a("metadata-upload")],1)],1)},mt=[],ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",e._b({key:e.key,model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"v-dialog",e.dialogProps,!1),[e._t("default")],2)},bt=[],_t=function(){return Math.random().toString(36).substring(7)},wt=Object(v["c"])({props:{value:{type:Boolean,required:!1,default:!1}},setup:function(e,t){var a=Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}}),n=Object(v["g"])(_t());Object(v["h"])(a,(function(e){e&&(n.value=_t())}));var r=Object(v["a"])((function(){return t.attrs}));return{key:n,model:a,dialogProps:r}}}),xt=wt,yt=Object(te["a"])(xt,ht,bt,!1,null,null,null),kt=yt.exports,Ot=Object(v["g"])(!1),jt=Object(v["g"])(!1),Rt=Object(v["g"])(!1),Ct=Object(v["g"])(!1),St=Object(v["g"])(!1),It=Object(v["g"])([]),At=Object(v["a"])((function(){return It.value.length>=3?"unset":"35vw"})),Ft=Object(v["g"])(!1),Mt=Object(v["g"])([]),Dt=null;Object(v["h"])(St,(function(){It.value=[]}));var Pt=Object(v["g"])(!1),Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Dataset File ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:"",outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},Et=[],Ut=a("4f96"),Bt=Object(v["c"])({name:"UploadDatasetFileMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])([]),a=Object(v["a"])((function(){return t.value.every((function(e){return e}))})),n=Object(v["g"])(0),r=Object(v["g"])([]);function i(e){var t=15,a=e.split("."),n=Object(Ut["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(It,(function(e){r.value=e.map((function(){return Object(v["f"])({subject_type:"",data_source:"",remarks:""})}))}));var u="Field cannot be empty.",l=function(e){return!!e||u},s=function(e){return e.length>0||u},o="*",c=function(e){return e.every((function(e){return!0}))||"Only zip files are supported."};function d(){St.value=!1,It.value=[]}function p(){var t=r.value;if(e.value&&It.value&&t){var a=It.value.map((function(e,a){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:t[a]}}));U.dispatch.upload.uploadDatasetFiles(a),U.commit.upload.setDialogOpen(!0),d()}}return{formsValidation:t,allFormsValid:a,step:n,files:It,meta:r,truncateFileName:i,closeDialog:d,uploadDatasets:p,nonEmptyRule:l,nonEmptyArrayRule:s,acceptedFileTypes:o,datasetTypesRule:c}}}),qt=Bt,Nt=Object(te["a"])(qt,Tt,Et,!1,null,null,null),Lt=Nt.exports,Gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload QCed Directory ")]),a("v-card-text",[a("v-text-field",{attrs:{"prepens-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,search:e.search,loading:e.loading},on:{"click:row":e.selectTest},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"6"}},[a("file-upload",{ref:"upload",attrs:{multiple:e.multiple,directory:e.directory,"drop-directory":e.dropDirectory,"add-index":!0},model:{value:e.filesInDirectory,callback:function(t){e.filesInDirectory=t},expression:"filesInDirectory"}},[a("v-btn",{attrs:{color:"primary",disabled:!1},on:{click:e.selectTest}},[e._v(" Add Directory ")])],1)],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-text-field",{attrs:{disabled:""},model:{value:e.targetDirectory,callback:function(t){e.targetDirectory=t},expression:"targetDirectory"}},[e._v(" data ")])],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"primary"},on:{click:e.clearItems}},[e._v(" Clear ")])],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Cancel ")])],1),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"success",disabled:e.upload_disabled},on:{click:e.uploadDirectory}},[e._v(" Upload ")])],1)],1)],1)],1)],1)},$t=[],zt=a("8019"),Vt=a.n(zt),Wt=[{text:"Filename",value:"name"},{text:"Size",value:"size"}],Ht=Object(v["c"])({name:"UploadQcDirectoryMenu",components:{FileUpload:Vt.a},setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=(Object(v["g"])(0),Object(v["g"])([])),a=Object(v["g"])(null),n=Object(v["g"])(!1),r=Object(v["g"])(),i=Object(v["g"])(!0),u=Object(v["g"])(!0),l=Object(v["g"])(!0),s=Object(v["g"])(!1),o=Object(v["g"])("data"),c=Object(v["g"])([]),d=Object(v["g"])([]),p=Object(v["g"])([]),f=Object(v["g"])(!0);function g(e){return m.apply(this,arguments)}function m(){return m=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.name);case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(){Ft.value=!1,c.value=[]}function b(){return _.apply(this,arguments)}function _(){return _=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value=[],f.value=!0;case 2:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function a(){var r,i,u,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.value,e.value){a.next=3;break}return a.abrupt("return");case 3:if(d.value){a.next=5;break}return a.abrupt("return");case 5:if(!f.value){a.next=7;break}return a.abrupt("return");case 7:if(!(p.value.length<1)&&p.value){a.next=9;break}return a.abrupt("return");case 9:return i=c.value.map((function(e,t){return{user:!1,file:e.file,output_filename:"".concat(o.value,"/").concat(e.file.webkitRelativePath),bucket:null,meta:r[t]}})),n.value=!0,u=[],S.a.each(p.value,(function(t){if(e.value){var a=e.value.getQc({params:{filter:JSON.stringify({id:t.split(".")[0]})}});u.push(a)}})),l=!0,a.next=16,Promise.all(u).then((function(e){S.a.each(e,(function(e){e.length>0&&(l=!1)}))}));case 16:n.value=!1,l?(U.dispatch.upload.uploadQcDatasetFiles(i),U.commit.upload.setDialogOpen(!0),h()):(ke.dispatch({text:"Some entries already exist in the database",options:{right:!0}}),f.value=!0);case 18:case"end":return a.stop()}}),a)}))),x.apply(this,arguments)}function y(e){var t=S.a.uniq(e.map((function(e){return e.name.split("/")[0]})));return t}function O(){f.value=!1,S.a.each(p.value,(function(e){var t=d.value.filter((function(t){return t.name.includes(e)})).map((function(e){return e.name})),a=t.filter((function(e){return e.includes("metadata.json")})).length>0;a||(f.value=!0)})),d.value.length<1&&(f.value=!0)}return Object(v["h"])(c,(function(e){d.value=[],c.value.forEach((function(e,t){return d.value.push({name:e.name,size:e.size})}))})),Object(v["h"])(d,(function(e){var t=y(d.value);p.value=t,O()})),{closeDialog:h,uploadDirectory:w,clearItems:b,directory:l,dropDirectory:s,filesInDirectory:c,multiple:i,addIndex:u,headers:Wt,items:d,selectTest:g,selected:r,search:a,loading:n,targetDirectory:o,upload_disabled:f}}}),Jt=Ht,Xt=Object(te["a"])(Jt,Gt,$t,!1,null,null,null),Qt=Xt.exports,Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadWaferInformationMenu,callback:function(t){e.uploadWaferInformationMenu=t},expression:"uploadWaferInformationMenu"}},[a("wafer-information-upload")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadChipInformationMenu,callback:function(t){e.uploadChipInformationMenu=t},expression:"uploadChipInformationMenu"}},[a("chip-information-upload")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.uploadDbitInformationMenu,callback:function(t){e.uploadDbitInformationMenu=t},expression:"uploadDbitInformationMenu"}},[a("dbit-information-upload")],1)],1)},Kt=[],Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Chip Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},ea=[],ta=Object(v["g"])(!1),aa=Object(v["g"])(!1),na=Object(v["g"])(!1),ra=Object(v["c"])({name:"ChipInformationUpload",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])("chips"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ut["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(It,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var l="Field cannot be empty.",s=function(e){return!!e||l},o=function(e){return e.length>0||l},c=Object(v["g"])(".csv"),d=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function p(){ta.value=!1,It.value=[]}function f(){var a=i.value;if(e.value&&It.value&&a){var n=It.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));U.dispatch.upload.uploadMetadataFile(n),U.commit.upload.setDialogOpen(!0),p()}}return{formsValidation:a,allFormsValid:n,step:r,files:It,meta:i,truncateFileName:u,closeDialog:p,uploadDatasets:f,nonEmptyRule:s,nonEmptyArrayRule:o,acceptedFileTypes:c,datasetTypesRule:d}}}),ia=ra,ua=Object(te["a"])(ia,Zt,ea,!1,null,null,null),la=ua.exports,sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload Wafer Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},oa=[],ca=Object(v["c"])({name:"WaferInformationUpload",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])("wafers"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ut["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(It,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var l="Field cannot be empty.",s=function(e){return!!e||l},o=function(e){return e.length>0||l},c=Object(v["g"])(".csv"),d=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function p(){aa.value=!1,It.value=[]}function f(){var a=i.value;if(e.value&&It.value&&a){var n=It.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));U.dispatch.upload.uploadMetadataFile(n),U.commit.upload.setDialogOpen(!0),p()}}return{formsValidation:a,allFormsValid:n,step:r,files:It,meta:i,truncateFileName:u,closeDialog:p,uploadDatasets:f,nonEmptyRule:s,nonEmptyArrayRule:o,acceptedFileTypes:c,datasetTypesRule:d}}}),da=ca,va=Object(te["a"])(da,sa,oa,!1,null,null,null),pa=va.exports,fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"text-capitalize"},[e._v(" Upload DBiT Information File (.csv) ")]),a("v-card-text",[a("v-file-input",{attrs:{multiple:!0,outlined:"","show-size":"",label:"Select File(s)",rules:[e.nonEmptyArrayRule,e.datasetTypesRule],accept:e.acceptedFileTypes,"prepend-icon":"","prepend-inner-icon":"mdi-paperclip"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.files.length?a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[e._l(e.files,(function(t,n){return[e.files[n]?a("v-stepper-step",{key:n+"-step",attrs:{complete:e.formsValidation[n],step:n}},[e._v(" "+e._s(e.truncateFileName(t.name))+" ")]):e._e(),n!==e.files.length-1?a("v-divider",{key:n+"-divider"}):e._e()]}))],2),a("v-stepper-items",[e._l(e.files,(function(t,n){return[a("v-stepper-content",{key:n+"-content",attrs:{step:n}},[e.meta[n]?a("v-form",{model:{value:e.formsValidation[n],callback:function(t){e.$set(e.formsValidation,n,t)},expression:"formsValidation[i]"}},[a("v-text-field",{attrs:{label:"Remarks","hide-details":""},model:{value:e.meta[n].remarks,callback:function(t){e.$set(e.meta[n],"remarks",t)},expression:"meta[i].remarks"}})],1):e._e()],1)]}))],2)],1):e._e()],1),a("v-card-actions",[a("v-spacer"),0!==e.step?a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.step-=1}}},[e._v(" Back ")]):a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")]),e.files.length?[e.step!==e.files.length-1?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step+=1}}},[e._v(" Next ")]):a("v-btn",{attrs:{color:"success",disabled:!e.allFormsValid},on:{click:e.uploadDatasets}},[e._v(" Upload ")])]:e._e()],2)],1)},ga=[],ma=Object(v["c"])({name:"DbitInformationUpload",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])("dbits"),a=Object(v["g"])([]),n=Object(v["a"])((function(){return a.value.every((function(e){return e}))})),r=Object(v["g"])(0),i=Object(v["g"])([]);function u(e){var t=15,a=e.split("."),n=Object(Ut["a"])(a),r=n[0],i=n.slice(1),u=i[i.length-1];return e.length>t?"".concat(r.substring(0,t),"...").concat(u):e}Object(v["h"])(It,(function(e){i.value=e.map((function(){return Object(v["f"])({remarks:""})}))}));var l="Field cannot be empty.",s=function(e){return!!e||l},o=function(e){return e.length>0||l},c=Object(v["g"])(".csv"),d=function(e){return e.every((function(e){return!0}))||"Only CSV files are supported."};function p(){na.value=!1,It.value=[]}function f(){var a=i.value;if(e.value&&It.value&&a){var n=It.value.map((function(e,n){return{user:!1,file:e,output_filename:e.name,bucket:null,meta:a[n],meta_type:t.value}}));U.dispatch.upload.uploadMetadataFile(n),U.commit.upload.setDialogOpen(!0),p()}}return{formsValidation:a,allFormsValid:n,step:r,files:It,meta:i,truncateFileName:u,closeDialog:p,uploadDatasets:f,nonEmptyRule:s,nonEmptyArrayRule:o,acceptedFileTypes:c,datasetTypesRule:d}}}),ha=ma,ba=Object(te["a"])(ha,fa,ga,!1,null,null,null),_a=ba.exports,wa=Object(v["c"])({name:"MetadataUpload",components:{FreshDialog:kt,ChipInformationUpload:la,WaferInformationUpload:pa,DbitInformationUpload:_a},setup:function(){return{uploadChipInformationMenu:ta,uploadWaferInformationMenu:aa,uploadDbitInformationMenu:na}}}),xa=wa,ya=Object(te["a"])(xa,Yt,Kt,!1,null,null,null),ka=ya.exports,Oa={text:"Upload Metadata",menu_width:200,menu:[{text:"Wafer Table (.csv)",click:function(){aa.value=!0},disabled:!1},{text:"Chip Table (.csv)",click:function(){ta.value=!0,console.log("Chip meta upload clicked")},disabled:!1},{text:"DBiT Run Table (.csv)",click:function(){na.value=!0},disabled:!1}]},ja=Object(v["c"])({name:"File",components:{FreshDialog:kt,UploadDatasetFileMenu:Lt,UploadQcDirectoryMenu:Qt,MetadataUpload:ka},setup:function(){return{uploadDatasetFileMenu:St,uploadDialogWidth:At,uploadQcDirectoryMenu:Ft,uploadDirectoryDialogWidth:Dt}}}),Ra=ja,Ca=Object(te["a"])(Ra,gt,mt,!1,null,null,null),Sa=Ca.exports,Ia=Object(v["f"])({text:"File",menu_width:200,menu:[{text:"Upload Dataset",click:function(){St.value=!0},disabled:!0,color:"white"},{text:"Upload Directory",click:function(){Ft.value=!0},disabled:!0,color:"white"},Oa,{text:"Upload QCed",click:function(){Ft.value=!0},disabled:!1,color:"white"},{text:"Manage Dataset Files",click:function(){console.log("Manage dataset files clicked")},disabled:!0}]}),Aa=Object(v["f"])({text:"Edit",menu_width:200,menu:[{text:"Wafer Information",click:function(){U.commit.setComponent({component:"WaferInformationViewer"})},disabled:!1},{text:"Chip Information",click:function(){U.commit.setComponent({component:"ChipInformationViewer"})}},{text:"DBiT Information",click:function(){U.commit.setComponent({component:"DbitInformationViewer"})},disabled:!1}]}),Fa=Object(v["g"])(!1),Ma={text:"Tools",menu:[{text:"Annotator",click:function(){console.log("Analysis click")},disabled:!0}]},Da=(a("c9d8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("help-menu"),a("about-menu")],1)}),Pa=[],Ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"80vw"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",{staticClass:"pa-2"},[a("VueShowdown",{attrs:{markdown:e.helpguidetext}})],1)],1)},Ea=[],Ua=a("866c"),Ba=a.n(Ua),qa="### Help\n\nATX Cloud is a software where users can upload the experiments related data and analyze the results with visualization tools.\n\n",Na=Object(v["g"])(!1),La=Object(v["g"])(!1);o["default"].use(Ba.a,{options:{disableForced4SpacesIndentedSublists:!0}});var Ga=Object(v["c"])({name:"HelpMenu",setup:function(){return{active:Na,helpguidetext:qa}}}),$a=Ga,za=(a("5d33"),Object(te["a"])($a,Ta,Ea,!1,null,null,null)),Va=za.exports,Wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"80vw"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("v-card",{staticClass:"pa-2"},[a("VueShowdown",{attrs:{markdown:e.about}})],1)],1)},Ha=[],Ja="### About\n\nThis software is under development\n";o["default"].use(Ba.a,{options:{disableForced4SpacesIndentedSublists:!0}});var Xa=Object(v["c"])({name:"AboutMenu",setup:function(){return{active:La,about:Ja}}}),Qa=Xa,Ya=(a("2357"),Object(te["a"])(Qa,Wa,Ha,!1,null,null,null)),Ka=Ya.exports,Za=Object(v["c"])({name:"About",components:{HelpMenu:Va,AboutMenu:Ka},setup:function(){return{}}}),en=Za,tn=Object(te["a"])(en,Da,Pa,!1,null,null,null),an=tn.exports,nn={text:"About",menu:[{text:"Help",click:function(){Na.value=!0},hotkey:"F1"},{text:"About",click:function(){La.value=!0}}]},rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("user")],1)},un=[],ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.registerNewUserMenu,callback:function(t){e.registerNewUserMenu=t},expression:"registerNewUserMenu"}},[a("register-new-user-menu")],1),a("fresh-dialog",{attrs:{width:"30vw"},model:{value:e.resetUserPasswordMenu,callback:function(t){e.resetUserPasswordMenu=t},expression:"resetUserPasswordMenu"}},[a("reset-user-password-menu")],1)],1)},sn=[],on=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Register User")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Username",rules:e.commonRules,"error-messages":e.usernameErrorMessage},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Full Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{label:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",type:"password",rules:e.commonRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.registerUser}},[e._v(" Register ")])],1)],1)},cn=[],dn=Object(v["g"])(!1),vn=Object(v["g"])(!1),pn=Object(v["g"])(!1),fn=Object(v["c"])({name:"RegisterNewUserMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])(!1),a=[function(e){return""!==e&&null!==e}],n=Object(v["g"])(null),r=Object(v["g"])(null),i=Object(v["g"])(null),u=Object(v["g"])(null),l=Object(v["g"])([]);Object(v["h"])(n,(function(){i.value=null}));var s=Object(v["g"])(null);function o(){dn.value=!1}function c(){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&n.value&&u.value&&s.value&&r.value){t.next=2;break}return t.abrupt("return");case 2:return a={username:n.value,password:s.value,name:u.value,email:r.value,groups:l.value},t.next=5,e.value.registerUser(a);case 5:if(c=t.sent,c){t.next=9;break}return i.value="User already exists",t.abrupt("return");case 9:o(),ke.dispatch({text:"User Successfully Registered"});case 11:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}return{formValid:t,commonRules:a,username:n,name:u,email:r,usernameErrorMessage:i,password:s,closeMenu:o,registerUser:c}}}),gn=fn,mn=Object(te["a"])(gn,on,cn,!1,null,null,null),hn=mn.exports,bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Reset User Password")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Username",rules:e.commonRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password",type:"password",rules:e.commonRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.resetUserPassword}},[e._v(" Reset ")])],1)],1)},_n=[],wn=Object(v["c"])({name:"ResetUserPasswordMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])(!1),a=[function(e){return!!e}],n=Object(v["g"])(null),r=Object(v["g"])(null);function i(){vn.value=!1}function u(){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.value&&n.value&&r.value){t.next=2;break}return t.abrupt("return");case 2:return a={username:n.value,password:r.value},t.next=5,e.value.resetUserPassword(a);case 5:i(),ke.dispatch({text:"Password Successfully Reset"});case 7:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}return{formValid:t,commonRules:a,username:n,password:r,closeMenu:i,resetUserPassword:u}}}),xn=wn,yn=Object(te["a"])(xn,bn,_n,!1,null,null,null),kn=yn.exports,On=Object(v["c"])({name:"User",components:{FreshDialog:kt,RegisterNewUserMenu:hn,ResetUserPasswordMenu:kn},setup:function(){return{registerNewUserMenu:dn,resetUserPasswordMenu:vn}}}),jn=On,Rn=Object(te["a"])(jn,ln,sn,!1,null,null,null),Cn=Rn.exports,Sn={text:"User",menu_width:200,menu:[{text:"Register New User",click:function(){dn.value=!0}},{text:"Reset User Password",click:function(){vn.value=!0}}]},In=Object(v["c"])({name:"Admin",components:{User:Cn}}),An=In,Fn=Object(te["a"])(An,rn,un,!1,null,null,null),Mn=Fn.exports,Dn={text:"Admin",menu_width:200,menu:[Sn]},Pn=Object(v["a"])((function(){var e,t;return null===(e=U.state.client)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.groups.includes("admin")})),Tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("fresh-dialog",{model:{value:e.waferInformationMenu,callback:function(t){e.waferInformationMenu=t},expression:"waferInformationMenu"}},[a("wafer-information-menu")],1),a("fresh-dialog",{model:{value:e.chipInformationMenu,callback:function(t){e.chipInformationMenu=t},expression:"chipInformationMenu"}},[a("chip-information-menu")],1),a("fresh-dialog",{model:{value:e.dbitInformationMenu,callback:function(t){e.dbitInformationMenu=t},expression:"dbitInformationMenu"}},[a("dbit-information-menu")],1)],1)},En=[],Un=Object(v["g"])(!1),Bn=Object(v["g"])(!1),qn=Object(v["g"])(!1),Nn=Object(v["g"])(!1),Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.waferInformationMenu,callback:function(t){e.waferInformationMenu=t},expression:"waferInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},Gn=[],$n=[{text:"Wafer ID",value:"wafer_id"},{text:"Generation",value:"generation"},{text:"Diameter",value:"diameter"},{text:"Acquired Date",value:"date_acquired"},{text:"Actions",value:"actions"}],zn=Object(v["c"])({name:"WaferInformationMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getWafers(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Bn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(Bn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:$n,search:a,selected:n,loading:t,items:r,selectTest:l,waferInformationMenu:Bn,closeDialog:o}}}),Vn=zn,Wn=Object(te["a"])(Vn,Ln,Gn,!1,null,null,null),Hn=Wn.exports,Jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.chipInformationMenu,callback:function(t){e.chipInformationMenu=t},expression:"chipInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},Xn=[],Qn=[{text:"Chip ID",value:"chip_id"},{text:"Wafer ID",value:"waferid"},{text:"Diameter",value:"diameter"},{text:"Acquired Date",value:"date_acquired"},{text:"Actions",value:"actions"}],Yn=Object(v["c"])({name:"ChipInformationMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getChips(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:qn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(qn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:Qn,search:a,selected:n,loading:t,items:r,selectTest:l,chipInformationMenu:qn,closeDialog:o}}}),Kn=Yn,Zn=Object(te["a"])(Kn,Jn,Xn,!1,null,null,null),er=Zn.exports,tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{model:{value:e.dbitInformationMenu,callback:function(t){e.dbitInformationMenu=t},expression:"dbitInformationMenu"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{height:"60vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectTest},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-table")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-content-copy")])],1),a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.selectTest(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"10"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.selectTest}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeDialog}},[e._v(" Close ")])],1)],1)],1)],1)],1)},ar=[],nr=[{text:"Run ID",value:"run_id"},{text:"Study ID",value:"study_id"},{text:"Chip A ID",value:"chip_a_id"},{text:"Chip B ID",value:"chip_b_id"},{text:"Actions",value:"actions"}],rr=Object(v["c"])({name:"DbitInformationMenu",setup:function(){var e=Object(v["a"])((function(){return U.state.client})),t=Object(v["g"])(!1),a=Object(v["g"])(null),n=Object(v["g"])(),r=Object(v["g"])([]);function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function n(){var i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.value){n.next=2;break}return n.abrupt("return");case 2:return a.value=null,t.value=!0,i={params:{filter:null,options:null}},n.next=7,e.value.getDbits(i);case 7:u=n.sent,t.value=!1,r.value=u;case 10:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t._id,t.date_acquired);case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Nn.value=!1;case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["h"])(Nn,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(i),{headers:nr,search:a,selected:n,loading:t,items:r,selectTest:l,dbitInformationMenu:Nn,closeDialog:o}}}),ir=rr,ur=Object(te["a"])(ir,tr,ar,!1,null,null,null),lr=ur.exports,sr=Object(v["c"])({name:"Views",components:{FreshDialog:kt,WaferInformationMenu:Hn,ChipInformationMenu:er,DbitInformationMenu:lr},setup:function(){return{waferInformationMenu:Bn,dbitInformationMenu:Nn,chipInformationMenu:qn}}}),or=sr,cr=Object(te["a"])(or,Tn,En,!1,null,null,null),dr=cr.exports,vr=Object(v["f"])({text:"View",menu_width:200,menu:[{text:"DBiT Runs",click:function(){console.log("DBiT Runs click")},disabled:!0},{text:"Wafer Trace",click:function(){U.commit.setComponent({component:"WaferTrace"})}},{text:"Image Viewer",click:function(){U.commit.setComponent({component:"ImageViewer"})}},{text:"QC Viewer",click:function(){U.commit.setComponent({component:"QcViewer"})},disabled:!1}]}),pr=Object(v["a"])((function(){var e=[Ia,Aa,vr,Ma,nn];return l.isAdmin.value&&e.push(Dn),e})),fr={File:Sa,Views:dr,About:an,Admin:Mn},gr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Change Password")]),a("v-card-text",[a("v-form",{model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[a("v-text-field",{attrs:{label:"Old Password",rules:e.commonRules,"error-messages":e.oldPasswordError,type:"password"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{label:"New Password",rules:e.commonRules,type:"password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),a("v-text-field",{attrs:{label:"Confirm New Password",rules:e.commonRules,"error-messages":e.confirmNewPasswordError,type:"password"},model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeMenu}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.formValid},on:{click:e.changePassword}},[e._v(" Set ")])],1)],1)},mr=[],hr=Object(v["c"])({name:"ChangePasswordMenu",setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(!1),r=[function(e){return!!e||"Field cannot be empty"}],i=Object(v["g"])(null),u=Object(v["g"])(null);Object(v["h"])(i,(function(){u.value=null}));var l=Object(v["g"])(null),s=Object(v["g"])(null),o=Object(v["a"])((function(){return null!==l.value&&null!==s.value&&l.value!==s.value?"Passwords don't match":null}));function c(){t.emit("close")}function d(){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value&&i.value&&l.value){e.next=2;break}return e.abrupt("return");case 2:return t={old_password:i.value,new_password:l.value},e.next=5,a.value.changePassword(t);case 5:if(n=e.sent,!1!==n){e.next=9;break}return u.value="Incorrect password",e.abrupt("return");case 9:c(),ke.dispatch({text:"Password Successfully Changed"});case 11:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return{formValid:n,commonRules:r,oldPassword:i,oldPasswordError:u,newPassword:l,confirmNewPassword:s,confirmNewPasswordError:o,closeMenu:c,changePassword:d}}}),br=hr,_r=Object(te["a"])(br,gr,mr,!1,null,null,null),wr=_r.exports,xr={"--bar-button-hover-bkg":ft["a"].grey.lighten2,"--bar-button-open-color":ft["a"].grey.darken3,"--bar-button-open-bkg":ft["a"].grey.lighten2,"--bar-menu-item-hover-bkg":ft["a"].grey.lighten2},yr=Object(v["c"])({name:"Appbar",components:Object(O["a"])(Object(O["a"])({VueFileToolbarMenu:pt["a"]},fr),{},{ChangePasswordMenu:wr}),setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){var e,t;return null===(e=U.state.client)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username})),r=Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.urlPostfix})),i=Object(v["a"])((function(){return xr})),u=Object(v["a"])((function(){return t.root.$route})),l=Object(v["a"])((function(){return U.state.currentComponent})),s=Object(v["g"])(!1),o=Object(v["g"])(!1),c=Object(v["a"])((function(){return U.state.subMenu}));function d(){var e={component:"AdminPanel",params:{action:"new_run",results_id:null}},t=lt(u.value,e);a.push(t)}function p(){"/"!==u.value.fullPath&&a.push("/")}return{filemenu:pr,filemenuStyle:i,components:fr,redirectToRunAdding:d,loggedIn:Je,logout:Ke,user:n,currentRoute:u,userMenu:s,changePasswordMenu:o,subMenu:c,urlPostfix:r,redirectToVisual:p,component:l,resolveAuthGroup:Ze}}}),kr=yr,Or=(a("f5dd"),Object(te["a"])(kr,dt,vt,!1,null,null,null)),jr=Or.exports,Rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-navigation-drawer",{attrs:{width:"300",fixed:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"}},[e._l(e.menu,(function(t){return[a("v-subheader",{key:t.groupname},[e._v(e._s(t.groupname))]),e._l(t.items,(function(t){return[e.resolveAuthGroup(t.access_control)?a("v-list-item",{key:t.component,on:{click:function(a){return e.$emit("menuClicked",t.query)}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),a("v-list-item-title",[e._v(e._s(t.name))])],1):e._e()]}))]}))],2)],1)],1)},Cr=[],Sr=[{groupname:"Analysis",items:[{name:"Wafer Tree",icon:"mdi-chart-pie",color:"warning",access_control:["admin"],query:{component:"WaferTrace"}},{name:"Image Viewer from Wafer",icon:"mdi-image-filter",access_control:["admin"],color:"warning",query:{component:"ImageViewer"}}]},{groupname:"Tools",items:[{name:"AtlasXbrowser",icon:"mdi-grid",access_control:["admin","user"],color:"cyan",query:{component:"AtlasBrowser"}},{name:"Atlas Viewer",icon:"mdi-checkbox-multiple-marked",access_control:["admin"],color:"cyan",query:{component:"AtlasViewer"}},{name:"AtlasXplore",icon:"mdi-magnify",access_control:["any"],color:"cyan",query:{component:"AtlasXplore"}},{name:"Atlas Compare",icon:"mdi-compare",access_control:["admin"],color:"red",query:{component:"AtlasCompare"}},{name:"Atlas Analytics",icon:"mdi-sigma",access_control:["admin"],color:"cyan",query:{component:"AtlasAnalytics"}},{name:"Atlas Uploader",icon:"mdi-cloud-upload",access_control:["admin"],color:"cyan",query:{component:"AtlasUploader"}},{name:"Atlas Run Viewer",icon:"mdi-file-cloud",access_control:["admin","user"],color:"cyan",query:{component:"AtlasRunViewer"}}]},{groupname:"Metadata",items:[{name:"Wafer Information",icon:"mdi-texture",access_control:["admin"],color:"secondary",query:{component:"WaferInformationViewer"}},{name:"Chip Information",icon:"mdi-checkbox-multiple-blank",access_control:["admin"],color:"secondary",query:{component:"ChipInformationViewer"}},{name:"DBiT Information",icon:"mdi-grid",access_control:["admin"],color:"secondary",query:{component:"DbitInformationViewer"}}]},{groupname:"Settings",items:[{name:"User settings",icon:"mdi-settings",access_control:["admin"],color:"green",query:{component:"UserSettings"}},{name:"Admin Panel",icon:"mdi-checkbox-multiple-blank",access_control:["admin"],color:"green",query:{component:"AdminPanel"}}]}],Ir=Object(v["c"])({name:"MainMenu",setup:function(e,t){var a=Object(v["g"])(!1);function n(){a.value=!0}return U.commit.setSubmenu(null),{menu:Sr,drawer:a,openDrawer:n,resolveAuthGroup:Ze}}}),Ar=Ir,Fr=Object(te["a"])(Ar,Rr,Cr,!1,null,null,null),Mr=Fr.exports,Dr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e.client?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-card",[a("v-card-title",[e._v(" Hello "+e._s(e.client.user.username.toUpperCase())+" ")]),a("v-card-text",[e._v(" ATX-Cloud is currently under development, any feedback will be appreciated. Please contact "),a("a",{attrs:{href:"mailto:help@atlasxomics.com"}},[e._v("help")]),e._v(" if you have any question or suggestion. All rights reserved by AtlasXomics, 2021. ")])],1)],1),e._l(e.tools,(function(t){return[e.resolveAuthGroup(t.access_control)?a("v-col",{key:t.name,attrs:{cols:"12",sm:"6"}},[a("v-card",[a("v-card-title",[e._v(e._s(t.name))]),a("v-card-text",[e._v(e._s(t.text))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(a){return e.go(t.query.component)}}},[e._v(" Go")])],1)],1)],1):e._e()]}))],2):e._e()],1)},Pr=[],Tr=(new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Object(v["c"])({name:"HomePage",setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return U.state.client})),r=Object(v["a"])((function(){return t.root.$route})),i=Object(v["g"])([{name:"AtlasXbrowser",access_control:["admin","user"],query:{component:"AtlasBrowser"},text:"Generate the tixel information using adaptive filter and interactive annotations."},{name:"Image Viewer",access_control:["admin"],query:{component:"ImageViewer"},text:"Browse wafers/chips/DBiTs and view images related to the hardwares/runs"},{name:"AtlasViewer",access_control:["admin"],query:{component:"AtlasViewer"},text:"QC file browser with metadata and output images"},{name:"AtlasXplore",access_control:["any"],query:{component:"AtlasXplore"},text:"View spatial information and plots of genes"},{name:"Atlas Run Information Viewer",access_control:["admin","user"],query:{component:"AtlasRunViewer"},text:"View data files currently uploaded by run."},{name:"Atlas Uploader",access_control:["admin"],query:{component:"AtlasUploader"},text:"Upload images, spatial data to the common respository"}]);function u(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=lt(r,{component:t}),a.push(n);case 2:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}return Object(v["d"])((function(){U.commit.setSubmenu(null)})),{go:u,resolveAuthGroup:Ze,client:n,tools:i}}})),Er=Tr,Ur=Object(te["a"])(Er,Dr,Pr,!1,null,null,null),Br=Ur.exports,qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{md:"3",sm:"4"}},[a("v-card",[a("v-card-title",[e._v(" Wafer Trace Tree "),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",loading:e.loading},on:{change:e.searchAction},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-divider"),a("v-card-text",{staticClass:"treeview"},[a("v-treeview",{attrs:{activatable:"",selectable:"",dense:"",items:e.filtered_items},on:{"update:active":e.activateItem},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)],1),a("v-col",{attrs:{md:"9",sm:"8"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.currentDataName)+" Details "),a("v-spacer"),a("v-checkbox",{attrs:{label:"DBiT"},model:{value:e.include_dbit,callback:function(t){e.include_dbit=t},expression:"include_dbit"}}),a("v-checkbox",{attrs:{label:"Chip"},model:{value:e.include_chip,callback:function(t){e.include_chip=t},expression:"include_chip"}}),a("v-spacer"),e.item_loading?a("span",[a("v-progress-circular",{attrs:{size:20,indeterminate:"",color:"primary"}})],1):e._e(),a("v-select",{attrs:{items:e.select_items,"item-text":"id","item-value":"id","persistent-hint":"","return-object":"","single-line":""},model:{value:e.select_selected,callback:function(t){e.select_selected=t},expression:"select_selected"}})],1),a("v-divider"),a("v-card-text",[a("v-data-table",{attrs:{height:"20vh",dense:"","hide-default-footer":"","items-per-page":1e3,headers:e.headers,items:e.currentItemForTable}})],1)],1),a("v-row",[a("v-col",{attrs:{md:"6"}},[a("v-card",{staticClass:"image_card_parent"},[a("v-select",{attrs:{items:e.image_items,"item-text":"id","item-value":"path",single_line:""},model:{value:e.image_selected,callback:function(t){e.image_selected=t},expression:"image_selected"}}),a("v-img",{staticClass:"image_card",attrs:{src:e.image_src,contain:""}})],1)],1),a("v-col",{attrs:{md:"6"}},[a("v-card",{staticClass:"image_card_parent"},[a("v-select",{attrs:{items:e.image_items,"item-text":"id","item-value":"path",single_line:""},model:{value:e.image_selected2,callback:function(t){e.image_selected2=t},expression:"image_selected2"}}),a("v-img",{staticClass:"image_card",attrs:{src:e.image_src2,contain:""}})],1)],1)],1)],1)],1)],1)},Nr=[],Lr=a("3835"),Gr=(a("2b3d"),a("9861"),a("07ac"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),$r=[{text:"Field",value:"name"},{text:"Value",value:"value"}],zr=Object(v["c"])({name:"WaferTrace",props:["query"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return t.root.$route}));var a,n,r=Object(v["a"])((function(){return U.state.client})),i=Object(v["g"])(""),u=Object(v["g"])([]),l=Object(v["g"])([]),s=Object(v["g"])([]),o=Object(v["g"])([]),c=Object(v["g"])(),d=Object(v["g"])(),p=Object(v["g"])([]),f=Object(v["g"])(!1),g=Object(v["g"])(!1),m=Object(v["g"])([]),h=Object(v["g"])([]),b=Object(v["g"])(),_=Object(v["g"])(),w=Object(v["g"])(),x=Object(v["g"])([]),y=Object(v["g"])(new window.Image),O=Object(v["g"])(new window.Image),j=Object(v["g"])(),R=Object(v["g"])(),C=Object(v["g"])(!0),I=Object(v["g"])(!1);function A(e){var t;S.a.forIn(e,(function(e,r){a=[],S.a.forIn(e,(function(e,t){n=[],S.a.each(e,(function(e,t){var a={id:"dbit/".concat(e.run_id),type:"dbit",name:"DBiT/".concat(e.run_id),children:[]};n.push(a)}));var r={id:"chip/".concat(t),type:"chip",name:"Chip/".concat(t),children:n};a.push(r)})),t={id:"wafer/".concat(r),type:"wafer",name:"Wafer/".concat(r),children:a},u.value.push(t)})),l.value=u.value}function F(e,t){var a=[];return S.a.each(e,(function(e,n){if(e.id.includes(t))a.push(e);else{var r={};Object.assign(r,e),r.children=[];var i=[];"children"in e&&(S.a.each(e.children,(function(e,a){if(e.id.includes(t))i.push(e);else if("children"in e){var n={};Object.assign(n,e),n.children=[];var r=[];S.a.each(e.children,(function(e,a){e.id.includes(t)&&r.push(e)})),r.length>0&&(n.children=r,i.push(n))}})),i.length>0&&(r.children=i,a.push(r)))}})),a}function M(e){var t=[];return S.a.forIn(e,(function(e,a){var n={name:a,value:e};""!==a.trim()&&"_id"!==a&&t.push(n)})),t}function D(e){return P.apply(this,arguments)}function P(){return P=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,u,l,s,o,v,f,m,h,y,k,O,C,I,A,F,D,P,T,E,U,B,q,N;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.map((function(e){return e.split("/")})),t[0],!(a.length<1)){e.next=4;break}return e.abrupt("return");case 4:if(r.value){e.next=6;break}return e.abrupt("return");case 6:g.value=!0,x.value=[],j.value=null,R.value=null,_.value=null,w.value=null,n=Object(Lr["a"])(a[0],2),i=n[0],u=n[1],e.t0=i,e.next="wafer"===e.t0?16:"chip"===e.t0?23:"dbit"===e.t0?30:44;break;case 16:return l={params:{filter:JSON.stringify({wafer_id:u}),options:null}},e.next=19,r.value.getWafers(l);case 19:return s=e.sent,o=Object(Lr["a"])(s,1),b.value=o[0],e.abrupt("break",44);case 23:return v={params:{filter:JSON.stringify({chip_id:u}),options:null}},e.next=26,r.value.getChips(v);case 26:return f=e.sent,m=Object(Lr["a"])(f,1),b.value=m[0],e.abrupt("break",44);case 30:return h={params:{filter:JSON.stringify({run_id:u}),options:null}},e.next=33,r.value.getDbits(h);case 33:return y=e.sent,k=Object(Lr["a"])(y,1),b.value=k[0],O={params:{filter:JSON.stringify({id:"".concat(u)}),options:null}},e.next=39,r.value.getQc(O);case 39:return C=e.sent,I=Object(Lr["a"])(C,1),A=I[0],A?(F=Object.values(A.files.images),D=A.files.root,P=F.map((function(e){return"".concat(D,"/").concat(e)})),T=S.a.filter(P,(function(e){return e.includes(".png")})),x.value=T.map((function(e){return{id:e.split("/").pop(),path:e}})),E=x.value.filter((function(e){return["umi-1.png","before_after_umi-1.png"].includes(e.id)})),U=Object(Lr["a"])(E,2),B=U[0],q=U[1],_.value=B.path,w.value=q.path):ke.dispatch({text:"No images found",options:{right:!0}}),e.abrupt("break",44);case 44:d.value=i.toUpperCase(),p.value=M(b.value),N=Object(Lr["a"])(t,1),c.value=N[0],g.value=!1;case 49:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return E=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(Lr["a"])(t,1),a[0],s.value=s.value.concat(t),n=Object(Lr["a"])(t,1),c.value=n[0],e.next=6,D(t);case 6:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function B(){return q.apply(this,arguments)}function q(){return q=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return u.value=[],i.value="",f.value=!0,t={params:{filter:null,options:null}},e.next=8,r.value.getWaferTrace(t);case 8:a=e.sent,f.value=!1,A(a);case 11:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){return L=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value=F(u.value,i.value);case 1:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function G(e){return!(!C.value||!e.includes("dbit"))||!(!I.value||!e.includes("chip"))}return Object(v["h"])([C,I],function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value=o.value.filter(G);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["h"])(h,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o.value=t,s.value=o.value.filter(G);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["h"])(c,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[c.value],e.next=3,D(n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["h"])(_,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value&&t){e.next=2;break}return e.abrupt("return");case 2:if(!t.includes(".png")){e.next=9;break}return e.next=5,r.value.getImage({params:{filename:t}});case 5:n=e.sent,i=URL.createObjectURL(n),y.value=new window.Image,j.value=i;case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["h"])(w,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value&&t){e.next=2;break}return e.abrupt("return");case 2:if(!t.includes(".png")){e.next=9;break}return e.next=5,r.value.getImage({params:{filename:t}});case 5:n=e.sent,i=URL.createObjectURL(n),O.value=new window.Image,R.value=i;case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Gr;case 2:return U.commit.setSubmenu(null),e.next=5,B();case 5:case"end":return e.stop()}}),e)})))),{search:i,items:u,filtered_items:l,select_items:s,select_selected:c,image_selected:_,image_selected2:w,image_items:x,headers:$r,currentItemForTable:p,currentDataName:d,loading:f,item_loading:g,activated:m,selected:h,asset_data:b,selectAction:D,searchAction:N,activateItem:T,fetchData:B,image:y,image2:O,image_src:j,image_src2:R,include_dbit:C,include_chip:I}}}),Vr=zr,Wr=(a("bbd5"),Object(te["a"])(Vr,qr,Nr,!1,null,null,null)),Hr=Wr.exports,Jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{md:"3",sm:"4"}},[a("v-card",[a("v-card-title",[e._v(" Image Viewer "),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",loading:e.loading},on:{change:e.searchAction},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-divider"),a("v-card-text",{staticClass:"iv_treeview"},[a("v-treeview",{attrs:{activatable:"",selectable:"",dense:"",items:e.filtered_items},model:{value:e.tree_selected,callback:function(t){e.tree_selected=t},expression:"tree_selected"}})],1)],1)],1),a("v-col",{attrs:{md:"9",sm:"8"}},[a("v-card",{staticClass:"iv_image_parent"},[a("v-card-title",[e._v(" Images "),a("v-spacer"),a("v-select",{attrs:{items:e.image_items,single_line:""},model:{value:e.image_selected,callback:function(t){e.image_selected=t},expression:"image_selected"}})],1),a("v-divider"),a("v-card-text",[e._l(e.images,(function(t){return[a("v-card",{key:t.id},[a("v-card-title",[e._v(" "+e._s(t.id)+" ")]),a("v-divider"),a("v-img",{staticClass:"iv_image_card",attrs:{src:t.image_src,contain:""}})],1)]}))],2)],1)],1)],1)],1)},Xr=[],Qr=(a("820e"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),Yr=Object(v["c"])({name:"ImageViewer",props:["query"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return t.root.$route}));var a,n,r=Object(v["a"])((function(){return U.state.client})),i=Object(v["g"])(""),u=Object(v["g"])([]),l=Object(v["g"])([]),s=Object(v["g"])([]),o=Object(v["g"])([]),c=Object(v["g"])(),d=Object(v["g"])([]),p=Object(v["g"])(!1),f=Object(v["g"])([]),g=Object(v["g"])([]),m=Object(v["g"])(),h=Object(v["g"])([]),b=(Object(v["g"])([]),Object(v["g"])([])),_=Object(v["g"])({});function w(e){var t;S.a.forIn(e,(function(e,r){a=[],S.a.forIn(e,(function(e,t){n=[],S.a.each(e,(function(e,t){var a={id:"dbit/".concat(e.run_id),type:"dbit",name:"DBiT/".concat(e.run_id),children:[]};n.push(a)}));var r={id:"chip/".concat(t),type:"chip",name:"Chip/".concat(t),children:n};a.push(r)})),t={id:"wafer/".concat(r),type:"wafer",name:"Wafer/".concat(r),children:a},u.value.push(t)})),l.value=u.value}function x(e,t){var a=[];return S.a.each(e,(function(e,n){if(e.id.includes(t))a.push(e);else{var r={};Object.assign(r,e),r.children=[];var i=[];"children"in e&&(S.a.each(e.children,(function(e,a){if(e.id.includes(t))i.push(e);else if("children"in e){var n={};Object.assign(n,e),n.children=[];var r=[];S.a.each(e.children,(function(e,a){e.id.includes(t)&&r.push(e)})),r.length>0&&(n.children=r,i.push(n))}})),i.length>0&&(r.children=i,a.push(r)))}})),a}function y(){return O.apply(this,arguments)}function O(){return O=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return u.value=[],i.value="",p.value=!0,t={params:{filter:null,options:null}},e.next=8,r.value.getWaferTrace(t);case 8:a=e.sent,p.value=!1,w(a);case 11:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(){return R.apply(this,arguments)}function R(){return R=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value=x(u.value,i.value);case 1:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function C(e){return!!e.includes("dbit")}function I(e,t){return A.apply(this,arguments)}function A(){return A=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return n={id:{$in:t}},i={params:{filter:n}},e.next=6,r.value.getQc(i);case 6:if(u=e.sent,!(u.length<1)){e.next=12;break}return b.value=[],h.value=[],m.value=null,e.abrupt("return");case 12:l=Object(Lr["a"])(u,1),s=l[0],h.value=Object.keys(s.files.images),m.value="umi-1",_.value=u;case 16:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function F(){return M.apply(this,arguments)}function M(){return M=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:_.value=S.a.sortBy(_.value,["id"]),t=[],p.value=!0,b.value=[],a=[],S.a.each(_.value,(function(e){var t="".concat(e.files.root,"/").concat(e.files.images[m.value]);if(r.value){var n=r.value.getImage({params:{filename:t}});a.push(n)}else console.log("api client null")})),Promise.allSettled(a).then((function(e){S.a.each(e,(function(e){if("fulfilled"===e.status){var a={id:e.value.name,image_src:URL.createObjectURL(e.value)};t.push(a)}else console.log("Rejected"),console.log(e)}))})).finally((function(){b.value=S.a.sortBy(t,["id"]),p.value=!1}));case 9:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}return Object(v["h"])(m,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["h"])(g,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.value=t,s.value=o.value.filter(C),n=s.value.map((function(e){return e.split("/")[1]})),e.next=5,I(n,m.value);case 5:return e.next=7,F();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Qr;case 2:return U.commit.setSubmenu(null),e.next=5,y();case 5:case"end":return e.stop()}}),e)})))),{search:i,items:u,filtered_items:l,image_selected:m,image_items:h,currentItemForTable:d,currentDataName:c,loading:p,activated:f,tree_selected:g,searchAction:j,fetchTreeData:y,images:b}}}),Kr=Yr,Zr=(a("397c"),Object(te["a"])(Kr,Jr,Xr,!1,null,null,null)),ei=Zr.exports,ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("fresh-dialog",{attrs:{width:"50vh"},model:{value:e.uploadChipInformationMenu,callback:function(t){e.uploadChipInformationMenu=t},expression:"uploadChipInformationMenu"}},[a("chip-information-upload")],1),a("v-row",{attrs:{"no-futters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.addNew}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",[a("v-btn",{attrs:{color:"primary"},on:{click:e.fetchData}},[e._v(" Refresh ")])],1)],1)],1),a("v-data-table",{attrs:{height:"65vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),a("v-col",[e.detail?a("v-card",{staticClass:"overflow",attrs:{height:"87vh"}},[a("v-card-title",[e._v(" Chip Details - "+e._s(e.detail[0].value)+" ")]),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.hasChanged||!e.validate(e.detail)},on:{click:e.saveAction}},[e._v(" Save ")])],1),a("v-col",[a("v-btn",{attrs:{color:"error",width:"15vh"},on:{click:e.deleteAction}},[e._v(" Delete ")])],1),a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.readOnly},on:{click:e.duplicateAction}},[e._v(" Duplicate ")])],1),a("v-col",[a("v-btn",{attrs:{color:"secondary",width:"15vh"},on:{click:function(t){e.readOnly=!e.readOnly}}},[e._v(" "+e._s(e.readOnly?"Edit":"Freeze")+" ")])],1)],1)],1),a("v-card-text",[a("v-simple-table",{attrs:{dense:""}},[a("tbody",[e._l(e.detail,(function(t,n){return["_id"!==t.key?a("tr",{key:t.key},[a("td",{attrs:{width:"20%"}},[e._v(e._s(t.key))]),a("td",[a("v-text-field",{attrs:{"single-line":"",readonly:e.readOnly,filled:!e.readOnly,"hide-details":"",dense:"",flat:"",clearable:!e.readOnly,"clear-icon":"mdi-close-circle",value:t.value},on:{change:function(t){return e.inputChanged(t,n)}}})],1)]):e._e()]}))],2)])],1)],1):e._e()],1)],1)],1)},ai=[],ni=[{text:"Chip ID",value:"chip_id"},{text:"Wafer ID",value:"wafer_id"}],ri=[{text:"Upload Chip CSV",icon:"mdi-upload",tooltip:"Upload Chip CSV",color:"primary",click:function(){ta.value=!0}}],ii=Object(v["c"])({name:"ChipInformationViewer",props:["query"],components:{FreshDialog:kt,ChipInformationUpload:la},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return t.root.$route}));var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(!1),r=Object(v["g"])(null),i=Object(v["g"])(),u=Object(v["g"])([]),l=Object(v["g"])(),s=Object(v["g"])(!0),o=Object(v["g"])(!1),c=Object(v["g"])(["chip_id","wafer_id"]);function d(){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return u.value=[],r.value=null,n.value=!0,t={params:{filter:null,options:null}},e.next=8,a.value.getChips(t);case 8:i=e.sent,n.value=!1,u.value=i;case 11:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,u,d,v,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n.value=!0,r={_id:t._id},i={params:{filter:JSON.stringify(r),options:null}},e.next=7,a.value.getChips(i);case 7:u=e.sent,d=Object(Lr["a"])(u,1),v=d[0],p=c.value,f=it(v),l.value=S.a.sortBy(f,(function(e){return!p.includes(e.key)})),n.value=!1,o.value=!1,s.value=!0;case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(){var e={},t=[];if(l.value)t=ut(l.value);else{var a=Object(Lr["a"])(u.value,1);t=a[0]}S.a.forIn(t,(function(t,a){e[a]=null})),l.value=it(e),s.value=!1,o.value=!1}function h(e){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=ut(l.value),a.chip_id=null,a._id=null,l.value=it(a),o.value=!0,s.value=!1;case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.checkChip(n.chip_id);case 5:if(r=e.sent,i=!1,!r){e.next=15;break}return u=[n],e.next=11,a.value.putChips(u);case 11:e.sent,i=!0,e.next=20;break;case 15:return c=[n],e.next=18,a.value.putChips(c);case 18:e.sent,i=!0;case 20:if(!i){e.next=26;break}return e.next=23,d();case 23:o.value=!1,s.value=!0,ke.dispatch({text:"Item has been successfully saved.",options:{right:!0,color:"success"}});case 26:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.deleteChip(n.chip_id);case 5:return e.sent,e.next=8,d();case 8:l.value=null,ke.dispatch({text:"Item has been successfully deleted.",options:{right:!0,color:"success"}});case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value[a].value=t,o.value=!0;case 2:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(e){return!e||0===e.length}function C(e){var t=ut(l.value);return!R(t.chip_id)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.commit.setSubmenu(ri),e.next=3,d();case 3:case"end":return e.stop()}}),e)})))),{headers:ni,search:r,selected:i,loading:n,items:u,detail:l,hasChanged:o,readOnly:s,selectAction:f,inputChanged:O,saveAction:_,duplicateAction:h,deleteAction:x,addNew:m,fetchData:d,validate:C,mainKeys:c,uploadChipInformationMenu:ta}}}),ui=ii,li=(a("3bf9"),Object(te["a"])(ui,ti,ai,!1,null,null,null)),si=li.exports,oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("fresh-dialog",{attrs:{width:"50vh"},model:{value:e.uploadWaferInformationMenu,callback:function(t){e.uploadWaferInformationMenu=t},expression:"uploadWaferInformationMenu"}},[a("wafer-information-upload")],1),a("v-row",{attrs:{"no-futters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.addNew}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",[a("v-btn",{attrs:{color:"primary"},on:{click:e.fetchData}},[e._v(" Refresh ")])],1)],1)],1),a("v-data-table",{attrs:{height:"65vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),a("v-col",[e.detail?a("v-card",{staticClass:"overflow",attrs:{height:"87vh"}},[a("v-card-title",[e._v(" Wafer Details - "+e._s(e.detail[0].value)+" ")]),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.hasChanged||!e.validate(e.detail)},on:{click:e.saveAction}},[e._v(" Save ")])],1),a("v-col",[a("v-btn",{attrs:{color:"error",width:"15vh"},on:{click:e.deleteAction}},[e._v(" Delete ")])],1),a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.readOnly},on:{click:e.duplicateAction}},[e._v(" Duplicate ")])],1),a("v-col",[a("v-btn",{attrs:{color:"secondary",width:"15vh"},on:{click:function(t){e.readOnly=!e.readOnly}}},[e._v(" "+e._s(e.readOnly?"Edit":"Freeze")+" ")])],1)],1)],1),a("v-card-text",[a("v-simple-table",{attrs:{dense:""}},[a("tbody",[e._l(e.detail,(function(t,n){return["_id"!==t.key?a("tr",{key:t.key},[a("td",{attrs:{width:"20%"}},[e._v(e._s(t.key))]),a("td",[a("v-text-field",{attrs:{"single-line":"",readonly:e.readOnly,filled:!e.readOnly,"hide-details":"",dense:"",flat:"",clearable:!e.readOnly,"clear-icon":"mdi-close-circle",value:t.value},on:{change:function(t){return e.inputChanged(t,n)}}})],1)]):e._e()]}))],2)])],1)],1):e._e()],1)],1)],1)},ci=[],di=[{text:"Wafer ID",value:"wafer_id"},{text:"Generation",value:"generation"}],vi=[{text:"Upload Wafer CSV",icon:"mdi-upload",tooltip:"Upload Wafer CSV",color:"primary",click:function(){aa.value=!0}}],pi=Object(v["c"])({name:"WaferInformationViewer",props:["query"],components:{FreshDialog:kt,WaferInformationUpload:pa},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return t.root.$route}));var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(!1),r=Object(v["g"])(null),i=Object(v["g"])(),u=Object(v["g"])([]),l=Object(v["g"])(),s=Object(v["g"])(!0),o=Object(v["g"])(!1),c=Object(v["g"])(["wafer_id"]);function d(){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return u.value=[],r.value=null,n.value=!0,t={params:{filter:null,options:null}},e.next=8,a.value.getWafers(t);case 8:i=e.sent,n.value=!1,u.value=i;case 11:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,u,d,v,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n.value=!0,r={_id:t._id},i={params:{filter:JSON.stringify(r),options:null}},e.next=7,a.value.getWafers(i);case 7:u=e.sent,d=Object(Lr["a"])(u,1),v=d[0],p=c.value,f=it(v),l.value=S.a.sortBy(f,(function(e){return!p.includes(e.key)})),n.value=!1,o.value=!1,s.value=!0;case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(){var e={},t=[];if(l.value)t=ut(l.value);else{var a=Object(Lr["a"])(u.value,1);t=a[0]}S.a.forIn(t,(function(t,a){e[a]=null})),l.value=it(e),s.value=!1,o.value=!1}function h(e){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=ut(l.value),a.wafer_id=null,a._id=null,l.value=it(a),o.value=!0,s.value=!1;case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.checkWafer(n.wafer_id);case 5:if(r=e.sent,i=!1,!r){e.next=15;break}return u=[n],e.next=11,a.value.putWafers(u);case 11:e.sent,i=!0,e.next=20;break;case 15:return c=[n],e.next=18,a.value.putWafers(c);case 18:e.sent,i=!0;case 20:if(!i){e.next=26;break}return e.next=23,d();case 23:o.value=!1,s.value=!0,ke.dispatch({text:"Item has been successfully saved.",options:{right:!0,color:"success"}});case 26:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.deleteWafer(n.wafer_id);case 5:return e.sent,e.next=8,d();case 8:l.value=null,ke.dispatch({text:"Item has been successfully deleted.",options:{right:!0,color:"success"}});case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value[a].value=t,o.value=!0;case 2:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(e){return!e||0===e.length}function C(e){var t=ut(l.value);return!R(t.wafer_id)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.commit.setSubmenu(vi),e.next=3,d();case 3:case"end":return e.stop()}}),e)})))),{headers:di,search:r,selected:i,loading:n,items:u,detail:l,hasChanged:o,readOnly:s,selectAction:f,inputChanged:O,saveAction:_,duplicateAction:h,deleteAction:x,addNew:m,fetchData:d,validate:C,mainKeys:c,uploadWaferInformationMenu:aa}}}),fi=pi,gi=(a("db58"),Object(te["a"])(fi,oi,ci,!1,null,null,null)),mi=gi.exports,hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("fresh-dialog",{attrs:{width:"50vh"},model:{value:e.uploadDbitInformationMenu,callback:function(t){e.uploadDbitInformationMenu=t},expression:"uploadDbitInformationMenu"}},[a("dbit-information-upload")],1),a("v-row",{attrs:{"no-futters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"mx-1",attrs:{cols:"0"}},[a("v-btn",{attrs:{color:"success"},on:{click:e.addNew}},[a("v-icon",{attrs:{medium:""}},[e._v("mdi-plus")])],1)],1),a("v-spacer"),a("v-col",[a("v-btn",{attrs:{color:"primary"},on:{click:e.fetchData}},[e._v(" Refresh ")])],1)],1)],1),a("v-data-table",{attrs:{height:"65vh",dense:"","single-select":"","items-per-page":15,headers:e.headers,items:e.items,loading:e.loading,search:e.search},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),a("v-col",[e.detail?a("v-card",{staticClass:"overflow",attrs:{height:"87vh"}},[a("v-card-title",[e._v(" DBiT Details - "+e._s(e.detail[0].value)+" ")]),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.hasChanged||!e.validate(e.detail)},on:{click:e.saveAction}},[e._v(" Save ")])],1),a("v-col",[a("v-btn",{attrs:{color:"error",width:"15vh"},on:{click:e.deleteAction}},[e._v(" Delete ")])],1),a("v-col",[a("v-btn",{attrs:{color:"primary",width:"15vh",disabled:!e.readOnly},on:{click:e.duplicateAction}},[e._v(" Duplicate ")])],1),a("v-col",[a("v-btn",{attrs:{color:"secondary",width:"15vh"},on:{click:function(t){e.readOnly=!e.readOnly}}},[e._v(" "+e._s(e.readOnly?"Edit":"Freeze")+" ")])],1)],1)],1),a("v-card-text",[a("v-simple-table",{attrs:{dense:""}},[a("tbody",[e._l(e.detail,(function(t,n){return["_id"!==t.key?a("tr",{key:t.key},[a("td",{attrs:{width:"20%"}},[e._v(e._s(t.key))]),a("td",[a("v-text-field",{attrs:{"single-line":"",readonly:e.readOnly,filled:!e.readOnly,"hide-details":"",dense:"",flat:"",clearable:!e.readOnly,"clear-icon":"mdi-close-circle",value:t.value},on:{change:function(t){return e.inputChanged(t,n)}}})],1)]):e._e()]}))],2)])],1)],1):e._e()],1)],1)],1)},bi=[],_i=[{text:"RUN ID",value:"run_id"},{text:"Chip A",value:"chip_a_id"},{text:"Chip B",value:"chip_b_id"}],wi=[{text:"Upload DBiT CSV",icon:"mdi-upload",tooltip:"Upload DBiT CSV",color:"primary",click:function(){na.value=!0}}],xi=Object(v["c"])({name:"DbitInformationViewer",props:["query"],components:{FreshDialog:kt,DbitInformationUpload:_a},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return t.root.$route}));var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(!1),r=Object(v["g"])(null),i=Object(v["g"])(),u=Object(v["g"])([]),l=Object(v["g"])(),s=Object(v["g"])(!0),o=Object(v["g"])(!1),c=Object(v["g"])(["run_id"]);function d(){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return u.value=[],r.value=null,n.value=!0,t={params:{filter:null,options:null}},e.next=8,a.value.getDbits(t);case 8:i=e.sent,n.value=!1,u.value=i;case 11:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,u,d,v,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n.value=!0,r={_id:t._id},i={params:{filter:JSON.stringify(r),options:null}},e.next=7,a.value.getDbits(i);case 7:u=e.sent,d=Object(Lr["a"])(u,1),v=d[0],p=c.value,f=it(v),l.value=S.a.sortBy(f,(function(e){return!p.includes(e.key)})),n.value=!1,o.value=!1,s.value=!0;case 16:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(){var e={},t=[];if(l.value)t=ut(l.value);else{var a=Object(Lr["a"])(u.value,1);t=a[0]}S.a.forIn(t,(function(t,a){e[a]=null})),l.value=it(e),s.value=!1,o.value=!1}function h(e){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=ut(l.value),a.run_id=null,a._id=null,l.value=it(a),o.value=!0,s.value=!1;case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.checkDbit(n.run_id);case 5:if(r=e.sent,i=!1,!r){e.next=15;break}return u=[n],e.next=11,a.value.putDbits(u);case 11:e.sent,i=!0,e.next=20;break;case 15:return c=[n],e.next=18,a.value.putDbits(c);case 18:e.sent,i=!0;case 20:if(!i){e.next=26;break}return e.next=23,d();case 23:o.value=!1,s.value=!0,ke.dispatch({text:"Item has been successfully saved.",options:{right:!0,color:"success"}});case 26:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=ut(l.value),e.next=5,a.value.deleteDbit(n.run_id);case 5:return e.sent,e.next=8,d();case 8:l.value=null,ke.dispatch({text:"Item has been successfully deleted.",options:{right:!0,color:"success"}});case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function O(e,t){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.value[a].value=t,o.value=!0;case 2:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(e){return!e||0===e.length}function C(e){var t=ut(l.value);return!R(t.run_id)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.commit.setSubmenu(wi),e.next=3,d();case 3:case"end":return e.stop()}}),e)})))),{headers:_i,search:r,selected:i,loading:n,items:u,detail:l,hasChanged:o,readOnly:s,selectAction:f,inputChanged:O,saveAction:_,duplicateAction:h,deleteAction:x,addNew:m,fetchData:d,validate:C,mainKeys:c,uploadDbitInformationMenu:na,submenu:wi}}}),yi=xi,ki=(a("9bcd"),Object(te["a"])(yi,hi,bi,!1,null,null,null)),Oi=ki.exports,ji=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"main"},[e.resolveAuthGroup(["admin","user"])?n("v-container",{attrs:{fluid:""}},[n("v-row",[e.run_id_search_active?n("v-dialog",{attrs:{value:e.run_id_search_active,"hide-overlay":""},on:{"click:outside":function(t){e.run_id_search_active=!e.run_id_search_active}}},[n("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[n("v-card-title",[n("v-text-field",{attrs:{dense:"","prepend-inner-icon":"mdi-magnify",value:e.searchInput},on:{input:function(t){e.searchInput=t,e.searchRuns(e.searchInput)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{attrs:{height:"20vh",width:"20%",dense:"","single-select":"",loading:e.loading,items:e.run_id_folder_namesHolder,headers:e.headers},on:{"click:row":e.run_folder_selected}})],1)],1):e._e(),e.image_processing_begun?n("v-dialog",{attrs:{width:"600",height:"800",value:e.show_metadata,persistent:!e.metadata_confirmed_bool}},[n("metadata-dropdown",{attrs:{metadata:e.metadata,drop_down_manager:e.drop_down_manager,run_id:e.run_id,lims_available:e.lims_available,updating_existing:e.updating_existing,barcode_filename_list:e.barcode_filename_options,metadata_confirmed_bool:e.metadata_confirmed_bool},on:{confirmed:e.metadata_confirmed,"barcode-file-selected":e.retrieve_barcode_file,refresh:e.pageRefresh}})],1):e._e(),e.checkSpatial?e._e():n("v-col",{staticClass:"pl-6 pt-3",attrs:{cols:"12",sm:"2"}},[e.run_id&&e.image_processing_begun?[n("v-card",[n("v-slider",{staticClass:"pl-2",attrs:{dense:"",height:"20",label:"Scale",type:"number",min:"0.1",max:"0.8",step:"0.005",disabled:!e.current_image},on:{change:e.onChangeScale},model:{value:e.scaleFactor,callback:function(t){e.scaleFactor=t},expression:"scaleFactor"}}),n("v-list",{staticClass:"mt-n3 pt-0 pl-2",attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Rotation")]),n("v-btn",{staticClass:"leftRotate",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(0)}}},[n("img",{attrs:{src:a("8a6b"),width:"24",height:"24"}})]),n("v-btn",{staticClass:"spaced_btn",attrs:{color:"blue",disabled:!e.current_image||e.isCropMode||e.grid||"45"==e.degreeRotation||e.updating_existing||e.loading,small:""},on:{click:function(t){return e.rotate_bsa_image(1)}}},[n("img",{attrs:{src:a("ec22"),width:"24",height:"24"}})]),n("label",{staticClass:"radio1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"90",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"90")},on:{change:function(t){e.degreeRotation="90"}}}),e._v("90")]),n("label",{staticClass:"radio2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.degreeRotation,expression:"degreeRotation"}],attrs:{type:"radio",value:"45",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},domProps:{checked:e._q(e.degreeRotation,"45")},on:{change:function(t){e.degreeRotation="45"}}}),e._v("45")])],1),n("v-list",{staticClass:"mt-n4 pt-0 pl-2",attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Cropping")]),n("v-btn",{attrs:{outlined:"",color:"primary",dense:"","x-small":"",disabled:!e.current_image||e.isCropMode||e.grid||e.updating_existing||e.loading},on:{click:e.activateCrop}},[e._v(" Activate ")]),n("v-btn",{staticClass:"mt-0 pt-0",attrs:{outlined:"",loading:e.cropLoading,disabled:!e.current_image||!e.isCropMode||e.cropFlag,"x-small":"",dense:"",color:"primary"},on:{click:e.onCropButton}},[e._v(" Confirm ")])],1),n("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("ROI")]),n("v-btn",{staticClass:"mr-8",attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.active_roi_available},on:{click:e.finding_roi}},[e._v(" Activate ")]),n("v-btn",{attrs:{dense:"",outlined:"",color:"primary","x-small":"",disabled:e.grid_visible||!e.grid},on:{click:e.show_grid}},[e._v(" Display Grid ")]),n("v-btn",{attrs:{outlined:"",dense:"",color:"primary","x-small":"",disabled:!e.grid_visible},on:{click:function(t){return e.hide_grid()}}},[e._v(" Hide Grid ")])],1),n("v-list",{attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Thresholding")]),e._v(" C value: "+e._s(e.c_val)+" "),n("v-slider",{staticClass:"slider",attrs:{step:"1",min:"0",max:"25",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial},model:{value:e.c_val,callback:function(t){e.c_val=t},expression:"c_val"}}),e._v(" Neighborhood: "+e._s(e.neighbor_size)+" "),n("v-slider",{staticClass:"slider",attrs:{disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial,step:"1",min:"0",max:"25"},model:{value:e.neighbor_size,callback:function(t){e.neighbor_size=t},expression:"neighbor_size"}}),n("v-btn",{attrs:{loading:e.threshLoading,outlined:"",dense:"",color:"primary",small:"",disabled:!e.current_image||!e.roi_active&&!e.updating_existing||e.spatial||e.thresh_same},on:{click:e.thresh_clicked}},[e._v(" Threshold ")])],1),n("v-list",{staticClass:"mt-n1 pt-0 pl-2",attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("Background Image")]),n("v-btn",{attrs:{id:"postB_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.postB_image_displayed||e.spatial},on:{click:function(t){return e.change_image("postB")}}},[e._v(" PostB ")]),n("v-btn",{attrs:{id:"bsa_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created&&!e.updating_existing||e.bsa_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BSA")}}},[e._v(" BSA ")]),n("v-btn",{attrs:{id:"bw_button",outlined:"","x-small":"",color:"primary",disabled:!e.thresh_image_created||e.bw_image_displayed||e.spatial},on:{click:function(t){return e.change_image("BW")}}},[e._v(" BW ")])],1),e._e(),e.position_counts_present?n("v-list",[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v(" Counts Visualization ")]),n("v-checkbox",{attrs:{label:e.show_counts_tixels?"Hide Counts":"Show Counts"},on:{click:e.toggle_tixel_counts_disp},model:{value:e.show_counts_tixels,callback:function(t){e.show_counts_tixels=t},expression:"show_counts_tixels"}}),e.show_counts_tixels?n("div",{style:{"background-image":""+e.linear_gradient_description_string,display:"flex",height:"50px","max-width":"250px","margin-left":"10px","margin-right":"10px"}},[n("div",{staticStyle:{position:"relative","padding-top":"50px",left:"5%"}},[e._v(" "+e._s(e.lower_bound_count)+" ")]),n("div",{staticStyle:{position:"relative","padding-top":"50px",left:"65%"}},[e._v(" "+e._s(e.upper_bound_count)+" ")])]):e._e()],1):e._e(),n("v-list",{staticClass:"pt-0 pl-2",attrs:{dense:""}},[n("v-subheader",{staticStyle:{"font-size":"14px","font-weight":"bold","text-decoration":"underline"}},[e._v("On/Off")]),n("v-btn",{attrs:{outlined:"",disabled:!e.thresh_image_created||e.spatial,"x-small":"",dense:"",color:"primary"},on:{click:e.autoFill}},[e._v(" Autofill ")]),n("v-checkbox",{attrs:{dense:"",value:e.isBrushMode,disabled:!e.tixels_filled,label:"Fill"},model:{value:e.isBrushMode,callback:function(t){e.isBrushMode=t},expression:"isBrushMode"}}),n("v-checkbox",{attrs:{dense:"",value:e.isEraseMode,disabled:!e.tixels_filled,label:"Erase"},model:{value:e.isEraseMode,callback:function(t){e.isEraseMode=t},expression:"isEraseMode"}}),n("v-text-field",{staticStyle:{width:"100px"},attrs:{dense:"",label:"Br.Size",type:"number",min:"5.0",max:"100.0",step:"3.0",disabled:!e.tixels_filled},model:{value:e.brushSize,callback:function(t){e.brushSize=t},expression:"brushSize"}}),[n("v-btn",{attrs:{disabled:!e.tixels_filled,outlined:"","x-small":"",dense:"",color:"primary"},on:{click:function(t){return e.handle_spatial_call()}}},[e._v(" Generate Spatial Folder ")]),n("v-btn",{staticClass:"vert-spaced-btn",attrs:{outlined:"","x-small":"",dense:"",color:"red"},on:{click:e.showSpatialFolder}},[e._v(" Check Spatial Folder ")])]],2)],1)]:e._e(),n("v-dialog",{attrs:{persistent:"",value:e.prompt_to_use_existing_spatial,"max-width":"800px"}},[n("v-card",[n("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),n("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.run_id)+" Spatial Folder Found. ")]),n("v-card-title",{staticClass:"justify-center"},[e._v(" Would you like to update the existing spatial folder or reprocess the image? ")]),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:function(t){return e.reprocess_image(e.run_id)}}},[e._v(" Reprocess ")]),n("v-btn",{attrs:{outlined:"",dense:"",color:"primary",medium:""},on:{click:e.update_run_function}},[e._v(" Update ")])],1)],1)],1),n("v-dialog",{attrs:{value:e.prompt_to_select_counts_positions,"max-width":"800px"}},[n("v-card",[n("v-card-title",{staticClass:"justify-center"},[e._v(" Select tissue positions file with counts if available. ")]),n("v-card-actions",[n("v-select",{attrs:{items:e.count_file_options},model:{value:e.tissue_positions_counts_filename,callback:function(t){e.tissue_positions_counts_filename=t},expression:"tissue_positions_counts_filename"}}),n("v-btn",{on:{click:function(t){e.prompt_to_select_counts_positions=!1,e.load_counts_positions()}}},[e._v(" Confirm ")])],1)],1)],1),n("v-dialog",{attrs:{persistent:"",value:!e.image_processing_begun&&e.file_options.length>1&&!e.prompt_to_use_existing_spatial,"max-width":"800px"}},[n("v-card",[n("v-system-bar",{staticClass:"pt-4",attrs:{color:"white"}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),n("v-card-title",{staticClass:"justify-center"},[e._v(" Multiple Images Found. ")]),n("v-card-title",{staticClass:"justify-center"},[e._v(" Please select the BSA image to be used for processing. ")]),n("v-card-actions",{staticClass:"justify-center"},[n("v-col",[n("v-select",{attrs:{items:e.file_options,label:"Select Image",outlined:"",dense:"",color:"primary",small:""},model:{value:e.full_bsa_filename,callback:function(t){e.full_bsa_filename=t},expression:"full_bsa_filename"}}),n("v-btn",{staticStyle:{position:"relative",left:"50%",transform:"translateX(-50%)"},attrs:{disabled:""===e.full_bsa_filename,outlined:""},on:{click:function(t){e.show_metadata=!0,e.load_and_begin_image_processing()}}},[e._v(" Submit ")])],1)],1)],1)],1)],2),e.checkSpatial?e._e():n("v-col",{attrs:{cols:"12",sm:"9"}},[n("v-container",[e.loadingMessage?[n("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[n("v-card-text"),n("v-dialog",{attrs:{value:"true","hide-overlay":"",persistent:"",width:"600"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-card-title",[e._v(" Creating and Saving Spatial Folder")]),n("v-card-text",[n("v-progress-linear",{staticClass:"mb-0",attrs:{"buffer-value":"0",height:"10",stream:"",color:"white"},model:{value:e.one,callback:function(t){e.one=t},expression:"one"}})],1)],1)],1)],1)]:e._e(),n("v-row",[n("v-card",[e.loading&&!e.loadingMessage?[n("div",{style:{position:"absolute","z-index":999,top:"43%",left:"47%"}},[n("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}})],1)]:e._e(),e.checkSpatial||e.welcome_screen?e._e():n("v-stage",{ref:"konvaStage",staticClass:"mainStage",attrs:{config:e.konvaConfig},on:{mousemove:e.handleMouseMoveStage}},[e.current_image?n("v-layer",{ref:"imageLayer",attrs:{id:"imageLayer"},on:{click:e.imageClick}},[n("v-image",{ref:"image",attrs:{config:e.current_image}})],1):e._e(),e.grid?n("v-layer",{ref:"roiLayer",attrs:{id:"roiLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[e.updating_existing||e.isBrushMode||e.isEraseMode?e._e():[n("v-line",{attrs:{config:e.roi.generateBoundary()}})],n("v-transformer",{ref:"transformer"}),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():e._l(e.roi.getAnchors(),(function(t){return n("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart,dragmove:e.handleDragMove}})})),e.isBrushMode||e.isEraseMode||e.updating_existing||e.tixels_filled?e._e():n("v-circle",{key:e.roi.getCenterAnchor().id,attrs:{config:e.roi.getCenterAnchor()},on:{dragstart:e.handleDragCenterStart,dragmove:e.handleDragCenterMove}})]:e._e()],2):e._e(),n("v-layer",e._l(100,(function(t){return n("v-group",{key:t},e._l(e.roi.get_polygon_subset(t-1,100),(function(t){return n("v-shape",{key:t.id,attrs:{config:t},on:{transformend:function(t){return e.roi.setScaleFactor()},mousedown:e.handleMouseDown}})})),1)})),1),n("v-layer",[e.isBrushMode||e.isEraseMode?n("v-circle",{attrs:{config:e.brushConfig},on:{mousedown:e.handleMouseDownBrush,mouseup:e.handleMouseUpBrush}}):e._e()],1),!e.isCropMode||e.grid||e.cropFlag?e._e():n("v-layer",{ref:"cropLayer",attrs:{id:"cropLayer"},on:{mouseup:e.handleMouseUp}},[e.current_image&&!e.loading?[n("v-rect",{attrs:{config:e.crop.generateRect()}}),e.isBrushMode?e._e():e._l(e.crop.getAnchors(),(function(t){return n("v-circle",{key:t.id,attrs:{config:t},on:{dragstart:e.handleDragStart_Crop,dragend:e.handleDragEnd_Crop,dragmove:e.handleDragMove_Crop}})})),e.isBrushMode?e._e():n("v-circle",{key:e.crop.getCenterAnchor().id,attrs:{config:e.crop.getCenterAnchor()},on:{dragmove:e.handleDragCenterMove_Crop}})]:e._e()],2)],1)],2)],1)],2)],1),n("v-col",{attrs:{cols:"12",sm:"12"}},[e.checkSpatial?n("SpatialFolderViewer",{attrs:{root:e.root_spatial,bucket_name:e.bucket_name_spatial,selectedRunID:e.run_id,getFiles:e.checkSpatial}}):e._e()],1),e.welcome_screen?n("v-col",{attrs:{cols:"12",sm:"12",justify:"center"}},[n("v-img",{staticClass:"center",attrs:{src:a("0ba3"),width:"width",height:"height"}})],1):e._e()],1)],1):e._e()],1)},Ri=[],Ci=(a("4ec9"),a("4e82"),a("25eb"),a("c740"),a("35a6")),Si=a.n(Ci),Ii=a("a77c"),Ai=a.n(Ii),Fi=a("31fa"),Mi=a.n(Fi),Di=a("0818"),Pi=a.n(Di),Ti=a("db49"),Ei=a.n(Ti),Ui=a("595c"),Bi=a.n(Ui),qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-select",{attrs:{disabled:e.disabled,items:e.display_options,label:e.display_label},on:{input:e.value_changed},scopedSlots:e._u([{key:"append-outer",fn:function(){return[a("v-icon",{attrs:{color:e.add_option?"red":"green"},on:{click:function(t){e.add_option=!e.add_option}}},[e._v(" "+e._s(e.add_option?"mdi-close":"mdi-table-plus")+" ")])]},proxy:!0}]),model:{value:e.local_variable,callback:function(t){e.local_variable=t},expression:"local_variable"}}),e.add_option?a("v-row",[a("v-text-field",{attrs:{label:"Add Option"},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-icon",{attrs:{disabled:0==e.custom_option.length,color:"green"},on:{click:e.new_option}},[e._v(" mdi-check ")])]},proxy:!0}],null,!1,3234581051),model:{value:e.custom_option,callback:function(t){e.custom_option=t},expression:"custom_option"}})],1):e._e()],1)},Ni=[],Li=Object(v["c"])({name:"custom-selector",props:{display_options:{type:Array,required:!0},display_label:{type:String,required:!0},variable:{required:!0},disabled:{type:Boolean}},model:{prop:"variable",event:"changed"},watch:{variable:function(e){this.local_variable=e}},setup:function(e,t){var a=Object(v["g"])(""),n=Object(v["g"])(""),r=Object(v["g"])(!1);function i(){t.emit("changed",a.value)}function u(){t.emit("option-added",n.value),a.value=n.value,n.value="",r.value=!1,i()}return Object(v["d"])((function(){e.variable&&(e.display_options.includes(e.variable)||t.emit("option-added",e.variable),a.value=String(e.variable))})),{local_variable:a,custom_option:n,add_option:r,value_changed:i,new_option:u}}}),Gi=Li,$i=Object(te["a"])(Gi,qi,Ni,!1,null,null,null),zi=$i.exports,Vi=function(){function e(){Object(Le["a"])(this,e),this.client=U.state.client,this.species_list=[],this.organ_list=[],this.epitope_list=[],this.group_list=[],this.tissue_source_list=[],this.pmid_list=[],this.tissue_type_list=[],this.assay_list=[],this.assign_field_options()}return Object(Ge["a"])(e,[{key:"assign_field_options",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.get_available_fields();case 2:t=e.sent,this.assay_list=t.assay_list,this.species_list=t.species_list,this.organ_list=t.organ_list,this.epitope_list=t.antibody_list,this.group_list=t.group_list,this.tissue_source_list=t.tissue_source_list,this.pmid_list=t.publication_list,this.tissue_type_list=t.tissue_type_list;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Wi=(a("cb29"),function(){function e(t,a,n){Object(Le["a"])(this,e),this.get_distance_wscale=function(e,t,a,n,r){var i=Math.sqrt(Math.pow(a/r-e/r,2)+Math.pow(n/r-t/r,2)),u=Math.round(1e3*i);return u/1e3},this.scalefactor=a,this.coordinates={},this.initializeROI(t[0],t[1]),this.channels=n,this.polygons=[]}return Object(Ge["a"])(e,[{key:"get_polygon_subset",value:function(e,t){var a=Math.floor(this.polygons.length*(e/t)),n=Math.floor(this.polygons.length*((e+1)/t)),r=this.polygons.slice(a,n);return r}},{key:"initializeROI",value:function(e,t){var a=this,n=[[.15*e,.15*t],[e-.15*e,.15*t],[e-.15*e,t-.15*t],[.15*e,t-.15*t]];n.forEach((function(e,t){var n=Object(Lr["a"])(e,2),r=n[0],i=n[1],u=rt(),l={draggable:!0,id:u,x:r,y:i,stroke:"green",radius:10};a.coordinates&&(a.coordinates[u]=l)}))}},{key:"getCoordinates",value:function(){var e=[];return S.a.forIn(this.coordinates,(function(t,a){var n={x:t.x,y:t.y,id:a};e.push(n)})),e}},{key:"setCoordinates",value:function(e){var t=this,a=0;S.a.forIn(this.coordinates,(function(n,r){t.coordinates[r]={x:e[a].x*t.scalefactor,y:e[a].y*t.scalefactor},a+=1}))}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=e.map((function(e){var t={draggable:!0,id:e.id,x:e.x,y:e.y,stroke:"green",radius:10};return t}));return t}},{key:"moveToNewCenter",value:function(e){var t=this,a=this.getCenterAnchor(),n=e.x-a.x,r=e.y-a.y;S.a.forIn(this.coordinates,(function(e,a){t.coordinates[a].x+=n,t.coordinates[a].y+=r}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/4,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/4,stroke:"green",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];return S.a.forIn(this.coordinates,(function(a,n){var r={x:a.x/e.scalefactor,y:a.y/e.scalefactor};t.push(r)})),t}},{key:"getMask",value:function(e){var t=this;return this.polygons.map((function(e){var a=e.posit,n=e.centery/t.scalefactor,r=e.centerx/t.scalefactor,i=e.on_tissue;return{position:a,value:i,coordinates:{y:n,x:r}}}))}},{key:"getOnTissue",value:function(){var e=0;return this.polygons.forEach((function(t){t.on_tissue&&(e+=1)})),e}},{key:"autoMask",value:function(e,t){var a=this,n=Object(Lr["a"])(e.shape,2),r=(n[0],n[1]),i=0;return S.a.each(this.polygons,(function(n,u){0===i&&(i+=1);for(var l=Math.round(n.centery/a.scalefactor),s=Math.round(n.centerx/a.scalefactor),o=Math.round(n.radius/a.scalefactor),c=0,d=s-o;d<s+o;d+=1)for(var v=l-o;v<l+o;v+=1)c+=e.data[d*r+v];c/=Math.pow(2*o,2);var p=c<t;a.polygons[u].fill=p?"red":null,a.polygons[u].on_tissue=p})),this.polygons}},{key:"generateBoundary",value:function(){var e=this.getCoordinates(),t=[];S.a.each(e,(function(e,a){t.push(e.x),t.push(e.y)}));var a={points:t,stroke:"red",strokeWidth:1,closed:!0,visible:!0};return a}},{key:"setPolygonsInCircle",value:function(e,t,a,n){var r=this;S.a.each(this.polygons,(function(i,u){var l=Math.pow(i.centerx-e,2)+Math.pow(i.centery-t,2)<Math.pow(a,2);l&&r.setPolygonState(u,n)}))}},{key:"setPolygonState",value:function(e,t){var a=this;Object.keys(t).forEach((function(n){a.polygons[e][n]=t[n]}))}},{key:"fill_color_counts",value:function(e){if(Object.keys(e).length===this.polygons.length)for(var t=0;t<this.polygons.length;t+=1)this.polygons[t].fill=e[t],this.polygons[t].opacity=this.polygons[t].on_tissue?1:.5}},{key:"remove_color_counts",value:function(){for(var e=0;e<this.polygons.length;e+=1){var t=null;this.polygons[e].on_tissue&&(t="red"),this.polygons[e].fill=t,this.polygons[e].opacity=1}}},{key:"toggle_tixel_visibility",value:function(){for(var e=0;e<this.polygons.length;e+=1)this.polygons[e].visible=!this.polygons[e].visible}},{key:"show_tixels",value:function(){0===this.polygons.length?this.loadTixels():this.toggle_tixel_visibility()}},{key:"setScaleFactor",value:function(e){var t=this,a=this.scalefactor;this.scalefactor=e;var n=this.scalefactor/a,r={};S.a.forIn(this.coordinates,(function(e,t){r[t]={x:e.x*n,y:e.y*n}})),this.coordinates=r;var i=[];S.a.each(this.polygons,(function(e,a){var r=e;r.scaleX=e.scaleX*n,r.scaleY=e.scaleY*n,r.radius=e.radius*n,r.centerx=e.centerx*n,r.centery=e.centery*n,r.strokeWidth=.8*Math.max(1-t.scalefactor,.1),i.push(r)})),this.polygons=i}},{key:"getQCScaleFactors",value:function(t,a){var n=2e3/t.image.width,r=600/t.image.width,i=this.getMask(a);i.length;var u=i[0].coordinates,l=(u.x,u.y,i[1].coordinates),s=(l.x,l.y,this.getCoordinates()),o=Object(Lr["a"])(s,4),c=o[0],d=o[1],v=(o[2],o[3]),p=2*this.channels-1,f=e.ratio50l(c.x,c.y,v.x,v.y,p),g=e.ratio50l(c.x,c.y,d.x,d.y,p),m=[f[1]-c.y,f[0]-c.x],h=this.get_distance_wscale(f[0],f[1],g[0],g[1],this.scalefactor),b=this.get_distance_wscale(c.x,c.y,g[0]+m[1],g[1]+m[0],this.scalefactor),_=(h+b)/2,w=1.6153846;return{spot_diameter_fullres:_,fiducial_diameter_fullres:_*w,tissue_hires_scalef:n,tissue_lowres_scalef:r}}},{key:"loadTixels",value:function(){var t,a,n,r,i,u=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=this.getCoordinates(),o=Object(Lr["a"])(s,4),c=o[0],d=o[1],v=(o[2],o[3]),p=2*this.channels-1,f=e.ratio50l(c.x,c.y,v.x,v.y,p),g=e.ratio50l(c.x,c.y,d.x,d.y,p),m=[f[1]-c.y,f[0]-c.x],h=[g[1]-c.y,g[0]-c.x],b=[2*m[0],2*m[1]],_=[2*h[0],2*h[1]],w=[];w.push(c.x),w.push(c.y);var x=[0,0],y=[0,0],k=!1;this.polygons=[];for(var O=0;O<this.channels;O+=1){x.fill(w[0]+h[1],0),x.fill(w[1]+h[0],1),k=!1;for(var j=function(s){!1===k?(y.fill(w[0],0),y.fill(w[1],1),t=[y[0],y[1]],a=[x[0],x[1]],n=[t[0]+m[1],t[1]+m[0]],r=[a[0]+m[1],a[1]+m[0]],k=!0):(y[0]+=b[1],y[1]+=b[0],t=[y[0],y[1]],a=[x[0],x[1]],n=[t[0]+m[1],t[1]+m[0]],r=[a[0]+m[1],a[1]+m[0]]),i=e.center(t,a,r,n);var o=[t[0],t[1]],c=[a[0],a[1]],d=[n[0],n[1]],v=[r[0],r[1]],p=O*u.channels+s,f="0",g=l[O*u.channels+s];if(g){var h=g[1];f=h}var _={sceneFunc:function(e,t){e.beginPath(),e.moveTo(o[0],o[1]),e.lineTo(c[0],c[1]),e.lineTo(v[0],v[1]),e.lineTo(d[0],d[1]),e.closePath(),e.fillStrokeShape(t)},id:p.toString(),fill:"1"===f?"red":null,on_tissue:"1"===f,visible:!0,centerx:i[0],centery:i[1],radius:m[0],opacity:1,stroke:"black",strokeWidth:.5,listening:!0,posit:[s,O],scaleX:1,scaleY:1,raw_fragments:null,log_fragments:null};u.polygons.push(_),x[0]+=b[1],x[1]+=b[0]},R=0;R<this.channels;R+=1)j(R);w[0]+=_[1],w[1]+=_[0]}}},{key:"generatePolygons",value:function(){return this.loadTixels(),this.polygons}}],[{key:"center",value:function(e,t,a,n){var r=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[(n[0]+a[0])/2,(n[1]+a[1])/2],u=(r[0]+i[0])/2,l=(r[1]+i[1])/2;return[u,l]}},{key:"ratio50l",value:function(e,t,a,n,r){var i=e+1/r*(a-e),u=t+1/r*(n-t);return[i,u]}}]),e}()),Hi=function(){function e(t,a){Object(Le["a"])(this,e),this.scalefactor=a,this.coordinates={},this.initialize(t[0],t[1])}return Object(Ge["a"])(e,[{key:"initialize",value:function(t,a){var n=this,r=e.distance([.25*t,.15*a],[t-.25*t,.15*a]),i=[[.25*t,.15*a],[t-.25*t,r+.15*a]];i.forEach((function(e,t){var a=Object(Lr["a"])(e,2),r=a[0],i=a[1],u=t,l={draggable:!0,id:u,x:r,y:i,stroke:"red",radius:10};n.coordinates&&(n.coordinates[u]=l)}))}},{key:"getCoordinates",value:function(){var e=[];return S.a.forIn(this.coordinates,(function(t,a){var n={x:t.x,y:t.y,id:a};e.push(n)})),e}},{key:"getAnchors",value:function(){var e=this.getCoordinates(),t=this.realCoords(),a=e.map((function(e,a){var n={draggable:!0,id:e.id,x:t[a].x,y:t[a].y,stroke:"red",radius:10};return n}));return a}},{key:"moveToNewCenter",value:function(e,t,a){var n=this,r=this.getCenterAnchor(),i=e.x-r.x,u=e.y-r.y;S.a.forIn(this.coordinates,(function(e,t){n.coordinates[t].x+=i,n.coordinates[t].y+=u}))}},{key:"getCenterAnchor",value:function(){var e=this.getAnchors(),t={draggable:!0,id:"center-anchor",x:e.map((function(e){return e.x})).reduce((function(e,t){return e+t}),0)/2,y:e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)/2,stroke:"red",radius:10};return t}},{key:"getCoordinatesOnImage",value:function(){var e=this,t=[];S.a.forIn(this.coordinates,(function(a,n){t.push(Math.round(a.x/e.scalefactor)),t.push(Math.round(a.y/e.scalefactor))}));var a=Math.round(t[1]-t[0]),n=Math.round(t[3]-t[2]),r=0;return a>n&&(r=a-n),a<n&&(r=a-n),t[3]+=r,t}},{key:"setCoordinates",value:function(e){var t=this,a=0;S.a.forIn(this.coordinates,(function(n,r){t.coordinates[r]={x:e[a].x*t.scalefactor,y:e[a].y*t.scalefactor},a+=1}))}},{key:"generateRect",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),a=Math.floor(e[1].y-e[0].y),n=0;t>a&&(n=t-a),t<a&&(n=t-a);var r=Object(Lr["a"])(e,2),i=r[0],u=r[1];u.y+=n;var l=Math.min(i.x,u.x),s=Math.min(i.y,u.y),o=Math.abs(i.x-u.x),c=Math.abs(i.y-u.y),d={x:l,y:s,width:o,height:c,stroke:"blue",strokeWidth:2};return d}},{key:"realCoords",value:function(){var e=this.getCoordinates(),t=Math.floor(e[1].x-e[0].x),a=Math.floor(e[1].y-e[0].y),n=0;t>a&&(n=t-a),t<a&&(n=t-a);var r=Object(Lr["a"])(e,2),i=r[0],u=r[1];return u.y+=n,this.coordinates[1].y+=n,[i,u]}},{key:"setScaleFactor",value:function(e){var t=this.scalefactor;this.scalefactor=e;var a=this.scalefactor/t,n={};S.a.forIn(this.coordinates,(function(e,t){n[t]={x:e.x*a,y:e.y*a}})),this.coordinates=n}}],[{key:"distance",value:function(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}}]),e}(),Ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("AvailableFileList",{attrs:{fileList:e.availableFiles,runID:e.selectedRunID,flipLoading:e.flipBool},on:{"file-selected":e.handleFileSelection}})],1),a("v-col",{attrs:{cols:"12",sm:"8","align-self":"center"}},[a("FileDisplay",{attrs:{fileName:e.file_selected,imageURL:e.selectedImageURL_array,jsonStringContents:e.jsonString_array,jsonContents:e.jsonPackage,csvStringContents:e.csvPretty_array},on:{"file-displayed":e.stopLoading}})],1)],1)},Xi=[],Qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("h1",[e._v(" "+e._s(e.runID)+" ")]),e._l(e.fileList,(function(t){return a("p",{key:t.id},[a("v-btn",{ref:"key",refInFor:!0,staticClass:"ma-2",attrs:{loading:e.loading&&e.indexClicked===t.id},on:{click:function(a){e.buttonLoading(t.id),e.$emit("file-selected",t.file)}}},[e._v(" "+e._s(t.file)+" ")])],1)}))],2)},Yi=[],Ki=Object(v["c"])({name:"AvailableFileList",props:{fileList:{required:!0,type:Array},runID:{required:!0,type:String},flipLoading:{required:!0,type:Boolean}},setup:function(e,t){var a=Object(v["g"])(!1),n=Object(v["g"])(-1);function r(e){n.value=e,a.value=!0}return{loading:a,buttonLoading:r,indexClicked:n}},watch:{flipLoading:function(e){this.loading=!1}}}),Zi=Ki,eu=Object(te["a"])(Zi,Qi,Yi,!1,null,null,null),tu=eu.exports,au=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[e.isImage?a("v-img",{ref:"image",attrs:{src:e.localImageURL,height:e.displayedHeight,width:e.displayedWidth}}):e._e(),e.isImage?a("v-slider",{attrs:{min:40,max:100},model:{value:e.imageSize,callback:function(t){e.imageSize=t},expression:"imageSize"}}):e._e(),e.jsonDisplay?a("pre",[e._v("    "+e._s(e.dispText)+"\n  ")]):e._e()],1)},nu=[],ru=Object(v["c"])({name:"FileDisplay",props:{fileName:{type:String,required:!0},imageURL:{type:Array,required:!0},jsonContents:{type:Object,required:!0},jsonStringContents:{type:Array,required:!0},csvStringContents:{type:Array,required:!0},clearFileBoolean:{type:Boolean,required:!1}},setup:function(e,t){var a=Object(v["g"])(!1),n=Object(v["g"])(),r=Object(v["g"])(!1),i=Object(v["g"])(),u=Object(v["g"])(""),l=Object(v["g"])(""),s=Object(v["g"])(80),o=Object(v["g"])(500),c=Object(v["g"])(500),d=Object(v["g"])(0),p=Object(v["g"])(0),f=Object(v["g"])({width:400,height:1e3,x:0,y:100}),g=Object(v["g"])({text:""});function m(e){this.displayedHeight=e*this.naturalHeight/100,this.displayedWidth=e*this.naturalWidth/100}function h(){this.$emit("file-displayed")}function b(e){return new Promise((function(t,a){var n=new Image;n.onload=function(){return t({width:n.width,height:n.height})},n.onerror=function(e){return a(e)},n.src=e}))}function _(){r.value=!1,a.value=!1}return{isImage:a,getImageDimensions:b,currentDisplayedImage:n,jsonDisplay:r,displayedImage:i,localImageURL:u,konvaConfiguration:f,textConfig:g,dispText:l,imageSize:s,naturalHeight:o,naturalWidth:c,displayedHeight:d,displayedWidth:p,modifyImageSize:m,fileDisplayed:h,clearScreen:_}},watch:{imageURL:function(e){var t=this,a=new Image;a.src=e,a.onload=function(){t.naturalHeight=1e3,t.naturalWidth=1e3;var a=Object(Lr["a"])(e,1),n=a[0];t.localImageURL=n,t.modifyImageSize(t.imageSize),t.isImage=!0,t.jsonDisplay=!1,t.fileDisplayed()}},jsonStringContents:function(e){var t=Object(Lr["a"])(e,1),a=t[0];this.dispText=a,this.textConfig={text:a,fontSize:24},this.isImage=!1,this.jsonDisplay=!0,this.fileDisplayed()},csvStringContents:function(e){var t=Object(Lr["a"])(e,1),a=t[0];this.dispText=a,this.textConfig={fontSize:12,text:a},this.isImage=!1,this.jsonDisplay=!0,this.fileDisplayed()},imageSize:function(e){this.modifyImageSize(e)},clearFileBoolean:function(e){this.clearScreen()}}}),iu=ru,uu=(a("cd7d"),Object(te["a"])(iu,au,nu,!1,null,null,null)),lu=uu.exports,su=(new Promise((function(e){Object(v["a"])((function(){return null!==U.state.client}))})),Object(v["c"])({name:"SpatialFolderViewer",props:{selectedRunID:{required:!0,type:String},getFiles:{required:!0,type:Boolean},bucket_name:{required:!0,type:String},root:{required:!0,type:String}},components:{AvailableFileList:tu,FileDisplay:lu},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])([]),r=Object(v["g"])(""),i=Object(v["g"])([]),u=Object(v["g"])([]),l=Object(v["g"])(!1),s=Object(v["g"])(""),o=Object(v["g"])({}),c=Object(v["g"])(""),d=Object(v["g"])([]),p=Object(v["g"])({}),f=Object(v["g"])(""),g=Object(v["g"])([]),m=Object(v["g"])(!1);function h(){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function t(){var r,i,u,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.value){t.next=3;break}return console.log("no client"),t.abrupt("return");case 3:return r=e.root.concat("/").concat(e.selectedRunID).concat("/"),i={bucket:e.bucket_name,path:r,filter:[""],only_files:!0},t.next=7,a.value.getFileList(i);case 7:for(u=t.sent,l=0;l<u.length;l+=1)u[l]!==r&&(s={id:l,file:u[l]},n.value.push(s));0===n.value.length&&n.value.push({id:0,file:"Run ".concat(e.selectedRunID).concat(" has no spatial folder.")});case 10:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function t(n){var u,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,l.value=!0,s={params:{bucket_name:e.bucket_name,filename:n,use_cache:"false"}},t.next=5,null===(u=a.value)||void 0===u?void 0:u.getImageAsJPG(s);case 5:o=t.sent,o&&(r.value=URL.createObjectURL(o),i.value=[r.value]),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),w.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function t(n){var r,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={params:{bucket_name:e.bucket_name,filename:n}},t.next=3,null===(r=a.value)||void 0===r?void 0:r.getCsvFile(i);case 3:u=t.sent,f.value=JSON.stringify(u,null,4),g.value=[f.value];case 6:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function t(n){var r,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={params:{bucket_name:e.bucket_name,filename:n}},t.next=3,null===(r=a.value)||void 0===r?void 0:r.getJsonFile(i);case 3:u=t.sent,o.value=u,c.value=JSON.stringify(u,null,8),d.value=[c.value];case 7:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function R(e){var t=e.split("."),a=t[t.length-1];"tif"===a.toLowerCase()||"png"===a.toLowerCase()||"jpg"===a.toLowerCase()||"jpeg"===a.toLowerCase()?_(e):"json"===a?O(e):"csv"===a&&x(e)}function C(e){R(e),s.value=e}function S(){m.value=!m.value}return Object(v["d"])((function(){h()})),{getRunFiles:h,availableFiles:n,loadFile:R,loadDisplayImage:_,selectedImageURL:r,selectedImageURL_array:i,availableRuns:u,image_selected:l,handleFileSelection:C,file_selected:s,jsonPackage:o,jsonString:c,jsonString_array:d,loadCSVFile:x,selectedImage:p,csvPretty:f,csvPretty_array:g,stopLoading:S,flipBool:m}}})),ou=su,cu=Object(te["a"])(ou,Ji,Xi,!1,null,null,null),du=cu.exports,vu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-system-bar",{staticClass:"pt-4",attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.pageRefresh()}}},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-close")])],1)],1),a("v-card-title",{staticClass:"justify-center"},[e._v(" Run ID: "+e._s(e.run_id)+" ")]),a("v-card-text",[a("v-select",{attrs:{outlined:"",dense:"",label:"Barcode File",items:e.barcode_filename_list,disabled:e.metadata_confirmed_bool},model:{value:e.metadata.barcode_filename,callback:function(t){e.$set(e.metadata,"barcode_filename",t)},expression:"metadata.barcode_filename"}}),a("selector",{attrs:{display_label:"Species",display_options:e.drop_down_manager.species_list},on:{"option-added":function(t){return e.drop_down_manager.species_list.push(t)}},model:{value:e.metadata.species,callback:function(t){e.$set(e.metadata,"species",t)},expression:"metadata.species"}}),a("selector",{attrs:{display_label:"Organ",display_options:e.drop_down_manager.organ_list},on:{"option-added":function(t){return e.drop_down_manager.organ_list.push(t)}},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),a("selector",{attrs:{display_label:"Tissue Source",display_options:e.drop_down_manager.tissue_source_list},on:{"option-added":function(t){return e.drop_down_manager.tissue_source_list.push(t)}},model:{value:e.metadata.tissue_source,callback:function(t){e.$set(e.metadata,"tissue_source",t)},expression:"metadata.tissue_source"}}),a("selector",{attrs:{display_label:"Tissue Type",display_options:e.drop_down_manager.tissue_type_list},on:{"option-added":function(t){return e.drop_down_manager.tissue_type_list.push(t)}},model:{value:e.metadata.tissue_type,callback:function(t){e.$set(e.metadata,"tissue_type",t)},expression:"metadata.tissue_type"}}),a("v-select",{attrs:{items:e.drop_down_manager.assay_list,label:"Assay"},model:{value:e.metadata.assay,callback:function(t){e.$set(e.metadata,"assay",t)},expression:"metadata.assay"}}),a("selector",{directives:[{name:"show",rawName:"v-show",value:"CUT&Tag"===e.metadata.assay,expression:"metadata.assay === 'CUT&Tag'"}],attrs:{display_label:"Epitope Name",display_options:e.drop_down_manager.epitope_list},on:{"option-added":function(t){return e.drop_down_manager.epitope_list.push(t)}},model:{value:e.metadata.antibody,callback:function(t){e.$set(e.metadata,"antibody",t)},expression:"metadata.antibody"}}),e.lims_available?a("v-text-field",{attrs:{outlined:"",dense:"",label:"Tissue Experimental Condition"},model:{value:e.metadata.tissueBlockExperiment,callback:function(t){e.$set(e.metadata,"tissueBlockExperiment",t)},expression:"metadata.tissueBlockExperiment"}}):e._e(),a("v-text-field",{attrs:{outlined:"",dense:"",label:"Chip Resolution"},model:{value:e.metadata.chip_resolution,callback:function(t){e.$set(e.metadata,"chip_resolution",t)},expression:"metadata.chip_resolution"}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:!e.metadata.barcode_filename,outlined:""},on:{click:e.metadata_confirmed}},[e._v(" Confirm ")])],1)],1)},pu=[],fu=Object(v["c"])({name:"MetadataDropdown",components:{Selector:zi},props:{metadata:{type:Object,required:!0},run_id:{type:String,required:!0},drop_down_manager:{type:Object,required:!0},lims_available:{type:Boolean,required:!0},updating_existing:{type:Boolean,required:!0},barcode_filename_list:{type:Array,required:!0},metadata_confirmed_bool:{type:Boolean,required:!0}},setup:function(e,t){function a(){t.emit("confirmed")}function n(){t.emit("barcode-file-selected")}function r(){t.emit("refresh")}return{metadata_confirmed:a,barcode_file_selected:n,pageRefresh:r}}}),gu=fu,mu=Object(te["a"])(gu,vu,pu,!1,null,null,null),hu=mu.exports,bu=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),_u=[{text:"ID",value:"id"}],wu={cut_n_tag:"CUT&Tag","wt_dbit-seq":"Transcriptome","ATAC-seq":"ATAC-seq","atac-seq":"ATAC-seq"},xu=Object(v["c"])({name:"AtlasBrowser",props:["query"],components:{SpatialFolderViewer:du,Selector:zi,MetadataDropdown:hu},setup:function(e,t){var a,n=Object(v["a"])((function(){return Ei.a.atlasxbrowser.bucket_name})),r=Object(v["a"])((function(){return Ei.a.atlasxbrowser.bucket_name_spatial})),i=Object(v["a"])((function(){return Ei.a.atlasxbrowser.root_dir})),u=Object(v["a"])((function(){return Ei.a.atlasxbrowser.root_dir_spatial})),l=Object(v["a"])((function(){return Ei.a.atlasxbrowser.lims_available})),s=Object(v["g"])(!0),o=new Vi,c=t.root.$router,d=Object(v["a"])((function(){return U.state.client})),p=Object(v["g"])([]),f=Object(v["a"])((function(){return t.root.$route})),g=Object(v["g"])([]),m=Object(v["g"])([]),h=Object(v["g"])([]),b=Object(v["g"])(),_=Object(v["g"])(""),w=Object(v["g"])(""),x=Object(v["g"])([]),y=Object(v["g"])({width_window:window.innerWidth,height_window:window.innerHeight}),O=Object(v["g"])({x:null,y:null,radius:20,fill:null,stroke:"red"}),j=Object(v["g"])(!1),R=Object(v["g"])(!1),C=Object(v["g"])(!1),I=Object(v["g"])(!1),A=Object(v["g"])(20),F=Object(v["g"])(!1),M=Object(v["g"])(new Hi([0,0],.15)),D=Object(v["g"])(new Wi([0,0],.15,null)),P=Object(v["a"])((function(){return 0!==D.value.polygons.length&&D.value.polygons[0].visible})),T=Object(v["g"])(!1),E=Object(v["g"])(!1),B=Object(v["g"])(!1),q=Object(v["g"])(window.innerWidth),N=Object(v["g"])(window.innerHeight),L=Object(v["g"])(null),G=Object(v["g"])(null),$=Object(v["g"])(null),z=Object(v["g"])(.15),V=Object(v["g"])(0),W=Object(v["g"])(0),H=Object(v["g"])(0),J=Object(v["g"])(0),X=Object(v["g"])([]),Q=Object(v["g"])(210),Y=Object(v["g"])(!1),K=Object(v["g"])(!1),Z=Object(v["g"])(new Map),ee=Object(v["g"])(!1),te=Object(v["g"])(!1),ae=Object(v["g"])(),ne=Object(v["g"])(null),re=Object(v["g"])(null),ie=Object(v["g"])({horizontal_flip:!1,vertical_flip:!1,rotation:0}),ue=Object(v["g"])(null),le=Object(v["g"])(!1),se=Object(v["g"])(!1),oe=Object(v["g"])(!1),ce=Object(v["g"])(!1),de=Object(v["g"])(!1),ve=Object(v["g"])(),pe=Object(v["g"])(""),fe=Object(v["g"])(""),ge=Object(v["g"])([]),me=Object(v["g"])({}),he=Object(v["g"])(!1),be=Object(v["g"])(!1),_e=Object(v["g"])(!1),we=Object(v["g"])(!1),xe=Object(v["g"])(!1),ye=Object(v["g"])(0),Oe=Object(v["g"])(0),je=Object(v["g"])(!1),Re=Object(v["g"])(!1),Ce=Object(v["g"])(!1),Se=(Object(v["g"])(!1),Object(v["g"])(!1)),Ie=Object(v["g"])(),Ae=Object(v["g"])(7),Fe=Object(v["g"])(7),Me=Object(v["g"])(!0),De=Object(v["g"])(!1),Pe=Object(v["g"])(!1),Te=Object(v["g"])("90"),Ee=Object(v["g"])({fiducial_diameter_fullres:null,spot_diameter_fullres:null,tissue_hires_scalef:null,tissue_lowres_scalef:null}),Ue=Object(v["g"])(!1),Be=Object(v["g"])(),qe=Object(v["g"])(null),Ne=Object(v["g"])([]),Le=Object(v["g"])(),Ge=Object(v["g"])(),$e=Object(v["g"])([]),ze=Object(v["g"])([]),Ve=Object(v["g"])([]),We=Object(v["a"])((function(){return Ei.a.atlasxbrowser.barcode_mapping})),He=Object(v["g"])(""),Je=Object(v["g"])(!1),Xe=0,Qe=Object(v["g"])({points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""});function Ye(){Qe.value={points:[],run:null,blockSize:null,cValue:null,threshold:null,tissue_type:null,species:null,assay:null,numChannels:null,organ:null,orientation:null,crop_area:null,barcode_filename:null,chip_resolution:null,tissueBlockExperiment:"",tissue_source:"",comments_flowB:"",crosses_flowB:[],blocks_flowB:[],leak_flowB:"",comments_flowA:"",crosses_flowA:[],blocks_flowA:[],leak_flowA:"",sampleID:"",onTissueTixels:null,antibody:""}}function Ke(){D.value=new Wi([0,0],z.value,null),M.value=new Hi([0,0],z.value),D.value.setScaleFactor(z.value),M.value.setScaleFactor(z.value),E.value=!1,Ue.value=!1,T.value=!1,R.value=!1,I.value=!1,Y.value=!1,K.value=!1,j.value=!1,C.value=!1,le.value=!1,se.value=!1,de.value=!1,Ce.value=!1,ee.value=!1,Ie.value=null,je.value=!1,ie.value={horizontal_flip:!1,vertical_flip:!1,rotation:0},w.value="",Re.value=!1,we.value=!1,xe.value=!1,ge.value=[],fe.value="",Je.value=!1,He.value="",Xe=0}function et(){window.location.reload()}function tt(e){}function at(e){var t=lt(f,e),a=c.resolve(t).href!==f.value.fullPath;a&&c.push(t)}var nt=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.value.getTaskStatus(t);case 4:ae.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function rt(e){var t=z.value;L.value.scale={x:t,y:t},y.value.width=t*L.value.image.width,y.value.height=t*L.value.image.height,q.value=y.value.width,N.value=y.value.height,D.value.setScaleFactor(t),M.value.setScaleFactor(t)}function ut(e){var t=We.value[e];t&&(Qe.value.barcode_filename=t)}function ot(e){try{Qe.value.organ=e.cntn_cf_fk_organ,Qe.value.species=e.cntn_cf_fk_species,Qe.value.chip_resolution=e.Resolution,Qe.value.tissue_source=e.cntn_cf_source,Qe.value.tissueBlockExperiment=e.cntn_cf_experimentalCondition,Qe.value.sampleID=e.cntn_cf_sampleId,Qe.value.antibody=e.cntn_cf_fk_epitope,e.cntn_cf_fk_workflow&&(Qe.value.assay=wu[String(e.cntn_cf_fk_workflow)]),Qe.value.comments_flowB=e.comments_flowB,Qe.value.crosses_flowB=e.crosses_flowB,Qe.value.blocks_flowB=e.blocks_flowB,Qe.value.leak_flowB=e.leak_flowB,Qe.value.comments_flowA=e.comments_flowA,Qe.value.crosses_flowA=e.crosses_flowA,Qe.value.blocks_flowA=e.blocks_flowA,Qe.value.leak_flowA=e.leak_flowA,Qe.value.tissue_type=e.cntn_cf_fk_tissueType,ut(e.cntn_cf_fk_barcodeOrientation)}catch(t){console.log(t)}}function ct(){return dt.apply(this,arguments)}function dt(){return dt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ee.value=!0,e.next=6,d.value.getMetadataFromRunId("".concat(_.value));case 6:t=e.sent,ee.value=!1,ot(t),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](2),ee.value=!1,ke.dispatch({text:"Failed to pull metadata from SLIMS.",options:{color:"error",right:!0}});case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),dt.apply(this,arguments)}function vt(){return pt.apply(this,arguments)}function pt(){return pt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,s,o,c,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return",!1);case 2:return Ce.value=!1,ee.value=!0,te.value=!1,t="".concat(u.value,"/").concat(_.value,"/spatial/metadata.json"),a="".concat(u.value,"/").concat(_.value,"/spatial/scalefactors_json.json"),n="".concat(u.value,"/").concat(_.value,"/spatial/tissue_positions_list.csv"),i={params:{filename:t,bucket_name:r.value,no_aws_yes_server:!1}},e.next=11,d.value.getJsonFile(i);case 11:return s=e.sent,o={params:{filename:n,bucket_name:r.value,no_aws_yes_server:!1}},e.next=15,d.value.getCsvFile(o);case 15:return c=e.sent,v={params:{filename:a,bucket_name:r.value,no_aws_yes_server:!1}},e.next=19,d.value.getJsonFile(v);case 19:if(p=e.sent,!(s&&c&&p)){e.next=29;break}return Ee.value=p,ve.value=c,ee.value=!1,Qe.value=s,s.barcodes&&ut(s.barcodes),He.value=Qe.value.barcode_filename,ke.dispatch({text:"Metadata loaded from existing spatial directory",options:{color:"success",right:!0}}),e.abrupt("return",!0);case 29:if(!l.value){e.next=34;break}return e.next=32,ct();case 32:ee.value=!1,ke.dispatch({text:"Metadata not found locally. Pulling from Slims.",options:{color:"blue",right:!0}});case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}function ft(e){return gt.apply(this,arguments)}function gt(){return gt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Ei.a.atlasxbrowser.barcode_files_path.concat("/".concat(t)),i={params:{filename:r,bucket_name:n.value}},e.next=4,null===(a=d.value)||void 0===a?void 0:a.getCsvFile(i);case 4:return u=e.sent,l=[],u.forEach((function(e){l.push(e[0])})),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)}))),gt.apply(this,arguments)}function mt(e){var t=Math.floor(Math.sqrt(e.length));return t*t!==e.length?-1:t}function ht(e){return bt.apply(this,arguments)}function bt(){return bt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return e.next=4,ft(t);case 4:return a=e.sent,n=mt(a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),bt.apply(this,arguments)}function _t(){return wt.apply(this,arguments)}function wt(){return wt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Qe.value.barcode_filename){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,ft(Qe.value.barcode_filename);case 4:if(t=e.sent,t){e.next=7;break}return e.abrupt("return",!1);case 7:if(a=mt(t),-1!==a){e.next=10;break}return e.abrupt("return",!1);case 10:return ue.value=a,D.value.channels=ue.value,Ve.value=t,e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)}))),wt.apply(this,arguments)}function xt(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];le.value=!0,se.value=!0;var t=st(Qe.value.points,2),a=t.map((function(e){return{x:e[0],y:e[1]}}));D.value.setCoordinates(a),ie.value=Qe.value.orientation,e&&D.value.loadTixels(ve.value)}function yt(){le.value=!0,D.value.show_tixels()}function kt(){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Se.value=!1,t=!0,ee.value||(ee.value=!0,t=!1),Je.value){e.next=25;break}return e.next=6,_t();case 6:if(a=e.sent,a){e.next=13;break}Se.value=!0,Je.value=!1,ke.dispatch({text:"Invalid barcode file.",options:{color:"error"}}),e.next=25;break;case 13:if(n=!0,r=!0,!je.value){e.next=24;break}if(Qe.value.barcode_filename===He.value){e.next=21;break}return e.next=19,ht(He.value);case 19:i=e.sent,i!==ue.value&&(n=!1,r=!1);case 21:xt(r),j.value=n,n||yt();case 24:Je.value=!0;case 25:t||(ee.value=!1);case 26:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function jt(e){if(!d.value)return null;var t=d.value.getImageAsJPG(e);return t}function Rt(e){if(!d.value)return null;try{var t=M.value.getCoordinatesOnImage();je.value&&(t=Qe.value.crop_area);var a=t[0],r=t[1],i=t[2],u=t[3],l={params:{bucket_name:n.value,filename:e,rotation:ie.value.rotation,x1:a,x2:i,y1:r,y2:u}},s=d.value.getGrayImageAsCroppedJPG(l);return s}catch(o){return ee.value=!1,null}}function Ct(e){var t=new window.Image;t.src=URL.createObjectURL(e);var a=.1;return t&&(t.onload=function(e){L.value={x:0,y:0,draggable:!1,scale:{x:a,y:a},image:t,src:null,original_src:null},rt("")}),t}function St(){return It.apply(this,arguments)}function It(){return It=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,l,o,c,v,f,g,m,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:return s.value=!1,Re.value=!0,ee.value=!0,te.value=!1,a=!1,l=n.value,je.value?(t="".concat(u.value,"/").concat(_.value,"/spatial/figure/postB_BSA.tif"),Me.value=!0,Pe.value=!1,De.value=!1,a=!0,l=r.value):t=w.value,o={path:"".concat(i.value,"/").concat(_.value,"/"),filter:[""],bucket:n.value,only_files:!0},e.prev=10,c={params:{bucket_name:l,filename:t,rotation:ie.value.rotation,use_cache:a}},e.next=14,d.value.getImageAsJPG(c);case 14:return v=e.sent,Ie.value=v,f=Ct(v),e.next=19,d.value.getFileList(o);case 19:p.value=e.sent,Le.value=f.src,je.value&&(g="".concat(u.value,"/").concat(_.value,"/spatial/figure/postB.tif"),m={params:{rotation:0,filename:g,use_cache:!0,bucket_name:r.value}},h=jt(m),h&&(G.value=h)),ee.value=!1,Ce.value=!1,e.next=31;break;case 26:e.prev=26,e.t0=e["catch"](10),console.log(e.t0),ee.value=!1,ke.dispatch({text:"Failed to load the image file",options:{color:"error",right:!0}});case 31:case"end":return e.stop()}}),e,null,[[10,26]])}))),It.apply(this,arguments)}function At(){xe.value?D.value.fill_color_counts(me.value):D.value.remove_color_counts()}function Ft(e,t){var a=e.width,n=e.height,r=Math.abs(a*Math.cos(t))+Math.abs(n*Math.sin(t)),i=Math.abs(a*Math.sin(t))+Math.abs(n*Math.cos(t));return{width:r,height:i}}function Mt(e,t,a,n,r,i,u,l){var s,o;return a<n?(s=Math.min(r,l),o=0):a<Math.PI/2?(s=Math.max(r,l),o=0):a<Math.PI/2+n?(s=e,o=Math.min(u,i)):a<Math.PI?(s=e,o=Math.max(u,i)):a<Math.PI+n?(s=Math.max(r,l),o=t):a<Math.PI/2*3?(s=Math.min(r,l),o=t):a<Math.PI/2*3+n?(s=0,o=Math.max(u,i)):a<2*Math.PI&&(s=0,o=Math.min(u,i)),[s,o]}function Dt(e){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ee.value=!0,1===t?(n=90,ie.value.rotation+=270,Xe+=n):(r="90"===Te.value?3*parseInt(Te.value,10):315,Xe+=r,ie.value.rotation+="90"===Te.value?parseInt(Te.value,10):45),i=new window.Image,i.src=URL.createObjectURL(Ie.value),u=document.createElement("canvas"),l=u.getContext("2d"),i.onload=function(e){URL.revokeObjectURL(i.src);var t=Math.atan(i.width/i.height),n=Xe%360*Math.PI/180,r=Ft({width:i.width,height:i.height},n),s=r.width,o=r.height;u.width=s,u.height=o;var c=i.height*Math.abs(Math.sin(n)),d=i.height*Math.abs(Math.cos(n)),v=i.width*Math.abs(Math.cos(n)),p=i.width*Math.abs(Math.sin(n)),f=Mt(s,o,n,t,c,p,d,v);l.translate(f[0],f[1]),l.rotate(n),l.drawImage(i,0,0),u.toBlob((function(e){Ct(e);a=e}))},ee.value=!1;case 8:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function Tt(e){for(var t=e,a=[],n=new RegExp("".concat(t,"[a-zA-z]*[0-9]*")),r=0;r<g.value.length;r+=1)n.test(g.value[r].id)&&a.push(g.value[r]);m.value=a}function Et(){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:return t=Ei.a.atlasxbrowser.barcode_files_path.concat("/"),a={path:t,bucket:n.value,filter:".txt",only_files:!0,delimiter:"/"},e.next=6,d.value.getFileList(a);case 6:r=e.sent,r.forEach((function(e){var t=e.lastIndexOf("/");if(t<e.length-1){var a=e.substring(t+1,e.length);ze.value.push(a)}}));case 8:case"end":return e.stop()}}),e)}))),Ut.apply(this,arguments)}function Bt(e,t){e.sort((function(e,t){var a=e[7],n=t[7];return a>n?1:a<n?-1:0}));for(var a=Math.sqrt(e.length),n=0;n<e.length;n+=1){var r=Math.floor(n/e.length*100),i=Number.parseInt(e[n][2],10),u=Number.parseInt(e[n][3],10),l=i*a+u;me.value[l]=t[r]}var s=e[Math.round(.05*e.length)][7],o=e[Math.round(.95*e.length)][7];ye.value=Math.round(100*s)/100,Oe.value=Math.round(100*o)/100}function qt(){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,u,l,s,o,c,v,p,f,g,m=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=m.length>0&&void 0!==m[0]?m[0]:fe.value,n=m.length>1&&void 0!==m[1]?m[1]:r.value,i={params:{bucket_name:n,filename:a}},e.next=5,null===(t=d.value)||void 0===t?void 0:t.getCsvFile(i);case 5:if(u=e.sent,"Not-Found"!==u&&8===u[0].length){e.next=10;break}return ke.dispatch({text:"Error! Incompatible File!",options:{color:"red"}}),fe.value="",e.abrupt("return");case 10:u.sort((function(e,t){var a=Number.parseInt(e[2],10),n=Number.parseInt(e[3],10),r=Number.parseInt(t[2],10),i=Number.parseInt(t[3],10);return a>r?1:a<r?-1:n>i?1:-1})),ve.value=u,l=JSON.parse(JSON.stringify(u)),s=Bi()({colormap:"jet",nshades:100,format:"hex"}),Bt(l,s),o=s[0],c=Math.round(100*l[0][7])/100,v=s[49],p=Math.round(100*l[Math.round(.5*u.length)][7])/100,f=s[99],g=Math.round(100*l[l.length-1][7])/100,pe.value="linear-gradient(to right, ".concat(o,", ").concat(v,", ").concat(f,")"),$e.value=[c,p,g],ke.dispatch({text:"Successfully Loaded Tissue Position Counts",options:{color:"green",position:"center"}}),we.value=!0;case 25:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function Lt(e){var t=z.value;null!==L.value?(L.value.scale={x:t,y:t},y.value.width=t*L.value.image.width,y.value.height=t*L.value.image.height,q.value=y.value.width,N.value=y.value.height):(y.value.width=q.value,y.value.height=N.value)}function Gt(e){e.target.attrs.id}function $t(e){e.target.attrs.id,e.target._lastPos}function zt(e){var t=e.target.attrs.id,a=e.target._lastPos;a.x>5&&a.y>5&&a.x<L.value.image.width&&a.y<L.value.image.height?(M.value.coordinates[t].x=a.x,M.value.coordinates[t].y=a.y):(M.value.coordinates[t].x=Math.min(Math.max(0,a.x),q.value),M.value.coordinates[t].y=Math.min(Math.max(0,a.y),N.value))}function Vt(e){M.value.moveToNewCenter(e.target._lastPos,q.value,N.value)}function Wt(e){e.target.attrs.id;D.value.polygons=[]}function Ht(e){var t=e.target.attrs.id,a=e.target._lastPos;a.x>5&&a.y>5&&a.x<q.value&&a.y<N.value?(D.value.coordinates[t].x=a.x,D.value.coordinates[t].y=a.y):(D.value.coordinates[t].x=Math.min(Math.max(0,a.x),q.value),D.value.coordinates[t].y=Math.min(Math.max(0,a.y),N.value))}function Jt(e){D.value.polygons=[]}function Xt(e){D.value.moveToNewCenter(e.target._lastPos)}function Qt(){var e={};xe.value?e.opacity=I.value?.5:1:e.fill=I.value?null:"red",e.on_tissue=!I.value,D.value.setPolygonsInCircle(O.value.x,O.value.y,O.value.radius,e)}function Yt(e){if(0!==D.value.polygons.length){if(R.value)return B.value=!0,void Qt();var t=e.target.attrs.id,a=S.a.findIndex(D.value.polygons,{id:t}),n={},r=D.value.polygons[a].on_tissue;n.on_tissue=!r,xe.value?n.opacity=r?.5:1:n.fill=r?null:"red",D.value.setPolygonState(a,n),B.value=!0}}function Kt(e){B.value=!1}function Zt(e){if(R.value||I.value){var a=t.refs.konvaStage.getNode().getPointerPosition(),n=a.x,r=a.y;O.value.x=n,O.value.y=r,F.value&&Qt()}}function ea(e){F.value=!0,Qt()}function ta(e){F.value=!1}function aa(e){R.value=e}function na(){D.value.toggle_tixel_visibility()}function ra(e){return ia.apply(this,arguments)}function ia(){return ia=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Me.value=!1,Pe.value=!1,De.value=!1,a=null,"postB"!==t){e.next=12;break}if($.value||!je.value||null==G.value){e.next=8;break}return e.next=8,G.value.then((function(e){$.value=URL.createObjectURL(e)}));case 8:a=$.value,Pe.value=!0,e.next=13;break;case 12:"BSA"===t?(a=Le.value,Me.value=!0):"BW"===t&&(a=Be.value,De.value=!0);case 13:L.value.image.src=a;case 14:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function ua(){C.value=!0,Ie.value=a}function la(){var e=M.value.getCoordinatesOnImage(),t=L.value.image,a=t.width,n=t.height,r=Object(Lr["a"])(e,4),i=r[0],u=r[1],l=r[2],s=r[3];if(i<0||u<0||l>a||s>n)ke.dispatch({text:"Keeping Cropping on Image",options:{color:"warning",right:!0}});else{var o=Rt(w.value);o&&(G.value=o),oe.value=!0,se.value=!0,C.value=!0,E.value=!0;var c=new window.Image;new window.Image;c.src=URL.createObjectURL(Ie.value);var d=document.createElement("canvas"),v=d.getContext("2d");c.onload=function(t){URL.revokeObjectURL(c.src),d.width=e[2]-e[0],d.height=e[3]-e[1],v.drawImage(c,e[0],e[1],e[2]-e[0],e[3]-e[1],0,0,e[2]-e[0],e[3]-e[1]),d.toBlob((function(e){var t=Ct(e);Le.value=t.src,oe.value=!1}))},D.value=new Wi([(e[2]-e[0])*z.value,(e[3]-e[1])*z.value],z.value,ue.value)}}function sa(){le.value=!0,E.value=!1,T.value=!0}function oa(e){ce.value=!0,Y.value=!0;var t=z.value;Si()(e,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a,n){var r,i,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=new window.Image,i=Number(Ae.value),u=Number(Fe.value),l=Pi()(n,{compensation:i,size:u}),X.value=l,s=Mi()(),Ai()(l,"jpeg").pipe(s).on("finish",(function(){var e=s.toBlobURL("image/jpeg");r.src=e,Be.value=e,r.onload=function(e){L.value={x:0,y:0,draggable:!1,scale:{x:z.value,y:z.value},image:r,src:null,original_src:null,alternative_src:null},rt(t)},K.value=!0,ee.value=!1,ce.value=!1,ra("BW")}));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}function ca(){L.value&&G.value&&(ee.value=!0,G.value.then((function(e){var t=URL.createObjectURL(e);$.value=t,oa($.value)})))}var da=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:V.value=t;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function va(){return pa.apply(this,arguments)}function pa(){return pa=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Ue.value=!0;case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function fa(){return ga.apply(this,arguments)}function ga(){return ga=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,l,s,o,c,v,f,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:if(Qe.value.barcode_filename){e.next=5;break}return ke.dispatch({text:"Must Select Barcode File Before Generating Spatial Folder",options:{color:"warning",right:!0}}),e.abrupt("return");case 5:return e.prev=5,V.value=0,W.value=0,H.value=0,te.value=!0,ne.value=null,ee.value=!0,t="atlasbrowser.generate_spatial",a="atxcloud_atlasbrowser",l=D.value.getCoordinatesOnImage(),s=M.value.getCoordinatesOnImage(),je.value&&(s=Qe.value.crop_area),o=[],l.forEach((function(e,t){o.push(e.x),o.push(e.y)})),Qe.value=Object.assign(Qe.value,{points:o,run:_.value,blockSize:Fe.value,threshold:Q.value,cValue:Ae.value,numChannels:ue.value,orientation:ie.value,crop_area:s,onTissueTixels:D.value.getOnTissue()}),c={run_id:_.value,files:p.value,crop_area:s,mask:D.value.getMask(s),metadata:Qe.value,scalefactors:D.value.getQCScaleFactors(L.value,s),orientation:ie.value,barcode_filename:Qe.value.barcode_filename,barcode_list:Ve.value,bucket_name_bsa:n.value,bucket_name_spatial:r.value,root_dir_spatial:u.value,root_dir_bsa:i.value,bsa_filename:w.value,updating_existing:je.value},v=[c],f={},e.next=25,d.value.postTask(t,v,f,a);case 25:return g=e.sent,e.next=28,nt(g._id);case 28:if("SUCCESS"===ae.value.status||"FAILURE"===ae.value.status){e.next=40;break}if("PROGRESS"!==ae.value.status){e.next=33;break}return e.next=32,da(ae.value.progress);case 32:ne.value="".concat(ae.value.progress,"% - ").concat(ae.value.position);case 33:return e.next=35,new Promise((function(e){re.value=window.setTimeout(e,1e3)}));case 35:return re.value=null,e.next=38,nt(g._id);case 38:e.next=28;break;case 40:if("SUCCESS"===ae.value.status){e.next=46;break}return console.log("failed"),ke.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}),ee.value=!1,te.value=!1,e.abrupt("return");case 46:return ke.dispatch({text:"Spatial Folder Successfully Uploaded",options:{right:!0,color:"success"}}),e.next=49,da(ae.value.progress);case 49:ne.value=ae.value.status,ee.value=!1,te.value=!1,V.value=0,W.value=0,H.value=0,de.value=!0,e.next=68;break;case 58:e.prev=58,e.t0=e["catch"](5),console.log(e.t0),ee.value=!1,te.value=!1,V.value=0,W.value=0,H.value=0,de.value=!1,ke.dispatch({text:"Error generating spatial folder",options:{right:!0,color:"error"}});case 68:case"end":return e.stop()}}),e,null,[[5,58]])}))),ga.apply(this,arguments)}function ma(){d.value?j.value?fa():ke.dispatch({text:"Must complete image processing before genereating spatial folder",options:{right:!0,color:"error"}}):ke.dispatch({text:"Client is not initialized",options:{right:!0,color:"error"}})}function ha(){return ba.apply(this,arguments)}function ba(){return ba=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return he.value=!1,je.value=!0,e.next=4,St();case 4:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function _a(e){le.value=!0,0===D.value.polygons.length&&D.value.generatePolygons(),D.value.autoMask(X.value,Q.value),j.value=!0}function wa(){return xa.apply(this,arguments)}function xa(){return xa=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=2;break}return e.abrupt("return");case 2:return g.value=[],m.value=[],b.value="",ee.value=!0,t={bucket_name:n.value,prefix:"".concat(i.value,"/"),delimiter:"/"},e.next=9,d.value.getSubFolders(t);case 9:a=e.sent,a&&(r=a.map((function(e){return{id:e}})),g.value=r),m.value=g.value,ee.value=!1;case 13:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function ya(e){return ka.apply(this,arguments)}function ka(){return ka=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value=!1,_.value=t.id,at({component:"AtlasBrowser",run_id:_.value});case 3:case"end":return e.stop()}}),e)}))),ka.apply(this,arguments)}function Oa(e){return ja.apply(this,arguments)}function ja(){return ja=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={bucket:r.value,path:"".concat(u.value,"/").concat(t,"/"),filter:[".csv"]},e.next=3,null===(a=d.value)||void 0===a?void 0:a.getFileList(n);case 3:i=e.sent,ge.value=i;case 5:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Ra(e){return Ca.apply(this,arguments)}function Ca(){return Ca=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={bucket:n.value,path:"".concat(i.value,"/").concat(t,"/"),delimiter:"/",filter:[".tif",".tiff",".png",".jpg","jpeg"]},e.next=3,null===(a=d.value)||void 0===a?void 0:a.getFileList(r);case 3:x.value=e.sent,1===x.value.length?(u=Object(Lr["a"])(x.value,1),w.value=u[0],Se.value=!0,St()):0===x.value.length&&ke.dispatch({text:"No images found in folder",options:{right:!0,color:"error"}});case 5:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Sa(e){return Ia.apply(this,arguments)}function Ia(){return Ia=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ye(),e.next=3,ct();case 3:Ra(t),he.value=!1;case 5:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function Aa(e){return Fa.apply(this,arguments)}function Fa(){return Fa=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(bu){e.next=2;break}return e.abrupt("return");case 2:return _.value=t.id,Ke(),e.next=6,vt();case 6:he.value=e.sent,he.value?Se.value=!0:Ra(t.id);case 8:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}Object(v["h"])(A,(function(e){O.value.radius=e})),Object(v["h"])(I,(function(e){e&&(R.value=!1)})),Object(v["h"])(R,(function(e){e&&(I.value=!1)})),Object(v["h"])(L,(function(e){L.value&&!C.value&&(M.value=new Hi([z.value*L.value.image.width,z.value*L.value.image.height],z.value),rt(z.value))})),Object(v["h"])(Ae,(function(e,t){e!==t&&(K.value=!1)})),Object(v["h"])(Fe,(function(e,t){e!==t&&(K.value=!1)}));var Ma=[{text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,disabled:ee.value,click:function(){Ce.value=!Ce.value}},{text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:ee.value,click:function(){Se.value=!Se.value,_.value||(console.log("error message"),ke.dispatch({text:"Must select a Run ID",options:{right:!0,color:"error"}}))}},{text:"Restart",icon:!1,tooltip:"Restart Whole Process",enabled:!0,disabled:ee.value||s.value,click:function(){et()}}];return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,bu;case 2:return U.commit.setSubmenu(Ma),window.addEventListener("resize",Lt),e.next=6,wa();case 6:Et();case 7:case"end":return e.stop()}}),e)})))),Object(v["e"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:U.commit.setSubmenu(null),window.removeEventListener("resize",Lt);case 2:case"end":return e.stop()}}),e)})))),{allFiles:p,run_id:_,full_bsa_filename:w,metadata:Qe,run_id_folder_names:g,run_id_folder_namesHolder:m,searchInput:h,headers:_u,selectAction:ya,search:b,konvaConfig:y,brushConfig:O,handleDragStart_Crop:Gt,handleDragEnd_Crop:$t,handleDragMove_Crop:zt,handleDragCenterMove_Crop:Vt,handleDragStart:Wt,handleDragMove:Ht,handleDragCenterStart:Jt,handleDragCenterMove:Xt,handleMouseDown:Yt,handleMouseMoveStage:Zt,handleMouseDownBrush:ea,handleMouseUpBrush:ta,handleMouseUp:Kt,crop:M,roi:D,objectToArray:it,show_grid:yt,current_image:L,load_and_begin_image_processing:St,searchRuns:Tt,stageWidth:q,initialize:Ke,generateSpatial:fa,isCropMode:C,isBrushMode:R,setBrushMode:aa,isEraseMode:I,brushSize:A,scaleFactor:z,onChangeScale:rt,atpixels:X,autoFill:_a,threshold:Q,loading:ee,loadingMessage:te,cropLoading:oe,threshLoading:ce,orientation:ie,drop_down_manager:o,onCropButton:la,one:V,two:W,three:H,four:J,channels:ue,spatial:de,scaleFactor_json:Ee,grid:le,cropFlag:se,tissue_position_list_obj:ve,prompt_to_use_existing_spatial:he,uploadingTixels:xt,updating_existing:je,image_processing_begun:Re,run_id_search_active:Ce,show_metadata:Se,bsa_blob:Ie,getMeta:ct,resolveAuthGroup:Ze,welcome_screen:s,company_image:qe,thresh_clicked:ca,c_val:Ae,neighbor_size:Fe,active_roi_available:E,roi_active:T,finding_roi:sa,thresh_image_created:Y,bw_image:Be,linear_gradient_description_string:pe,thresh_same:K,tixels_filled:j,bsa_image_displayed:Me,change_image:ra,handle_spatial_call:ma,rotate_bsa_image:Dt,saved_grid_state:Z,hide_grid:na,degreeRotation:Te,assignMetadata:ot,checkSpatial:Ue,showSpatialFolder:va,availableFiles:Ne,imageClick:tt,root:i,bucket_name:n,bsa_image:Le,black_white:Ge,loadGrayCropped:Rt,postB_image_promise:G,postB_image:$,bw_image_displayed:De,postB_image_displayed:Pe,run_folder_selected:Aa,get_image_options:Ra,file_options:x,lims_available:l,selecting_counts_pos_file:_e,color_gradient_scale_numbers:$e,tixel_color_mapping:me,prompt_to_select_counts_positions:be,get_count_file_options:Oa,count_file_options:ge,tissue_positions_counts_filename:fe,load_counts_positions:qt,position_counts_present:we,show_counts_tixels:xe,toggle_tixel_counts_disp:At,grid_visible:P,lower_bound_count:ye,upper_bound_count:Oe,metadata_confirmed:kt,bucket_name_spatial:r,root_spatial:u,barcode_filename_options:ze,update_run_function:ha,retrieve_barcode_file:_t,barcodes_in_list:Ve,reprocess_image:Sa,metadata_confirmed_bool:Je,original_barcode_filename:He,pageRefresh:et,activateCrop:ua}}}),yu=xu,ku=(a("e4ae"),Object(te["a"])(yu,ji,Ri,!1,null,"031e7e34",null)),Ou=ku.exports,ju=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.atlasXplore_displayed?a("v-container",{style:{"background-color":e.backgroundColor,height:"100%",margin:"0",width:"100%",padding:"0"},attrs:{fluid:"",id:"container"}},[e.query.public?[a("v-app-bar",{staticStyle:{"margin-top":"-7px"}},[a("div",{staticStyle:{cursor:"pointer"}},[a("v-img",{attrs:{width:"40px",src:"favicon-nobg.png"},on:{click:e.redirectToVisual}})],1),a("v-tooltip",{attrs:{bottom:"",disabled:e.metaFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-1",attrs:{color:"black",icon:"",medium:"",disabled:!e.spatialData},on:{click:function(t){e.metaFlag=!e.metaFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-filter-variant")])],1)]}}],null,!1,3258238836)},[a("span",[e._v("Metadata")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-1",attrs:{medium:"",text:"",disabled:!e.spatialData||e.assayFlag},on:{click:function(t){e.clusters_ann_flag=!e.clusters_ann_flag}}},"v-btn",r,!1),n),[e._v(e._s(e.geneMotif)+" ")])]}}],null,!1,2668802560)},[a("span",[e._v("Cluster<->Annotations")])]),a("v-tooltip",{attrs:{disabled:e.backgroundFlag,bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-3",attrs:{disabled:!e.spatialData,small:""},on:{click:function(t){e.backgroundFlag=!e.backgroundFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-palette")])],1)]}}],null,!1,2551911586)},[a("span",[e._v("Background/Heatmap")])]),a("div",{attrs:{id:"geneac"}})],1)]:e._e(),a("v-row",[a("v-dialog",{attrs:{value:e.backgroundFlag,"hide-overlay":""},on:{"click:outside":function(t){e.backgroundFlag=!e.backgroundFlag}}},[a("v-card",{staticStyle:{width:"max-content",position:"absolute","z-index":"999",top:"47px",left:"210px"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",disabled:!e.spatialData,items:e.backgroundOptions,headers:e.backgroundHeader},scopedSlots:e._u([{key:"item",fn:function(t){return["custom"!=t.item["background"]?[a("tr",{on:{click:function(a){return e.chooseBackground(t.item)}}},[a("td",[e._v(e._s(t.item["background"]))])])]:[a("tr",{style:{"pointer-events":e.isClusterView?"auto":"none"},on:{click:function(t){e.clusterColorFlag=!0,e.backgroundFlag=!1}}},[a("td",[e._v("Heatmap")])])]]}}],null,!1,2445085356),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),e.metaFlag?a("v-dialog",{attrs:{value:e.metaFlag,"hide-overlay":""},on:{"click:outside":function(t){e.metaFlag=!e.metaFlag}}},[a("v-card",{staticStyle:{width:"200px",position:"absolute","z-index":"999",top:"47px",left:"130px"},attrs:{disabled:e.loading}},[a("v-card-title",[e._v(" "+e._s(e.runId)+" ")]),a("v-card-text",[a("v-text-field",{staticClass:"bold-disabled",attrs:{value:e.metadata.species.replace("_"," "),dense:"",disabled:"",outlined:"",label:"Species"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Organ"},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Type"},model:{value:e.metadata.type,callback:function(t){e.$set(e.metadata,"type",t)},expression:"metadata.type"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Run ID"},model:{value:e.metadata.runid,callback:function(t){e.$set(e.metadata,"runid",t)},expression:"metadata.runid"}})],1)],1)],1):e._e(),e.clusters_ann_flag?a("v-dialog",{attrs:{value:e.clusters_ann_flag,"hide-overlay":""},on:{"click:outside":function(t){e.clusters_ann_flag=!e.clusters_ann_flag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"47px",left:"150px"},attrs:{disabled:e.loading}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:e.clusters_ann_list},scopedSlots:e._u([{key:"item",fn:function(t){return["gene"==t.item||"motif"==t.item?[a("tr",{on:{click:function(a){return e.changeClustersAnn(t.item)}}},[a("td",[e._v(e._s(t.item))])])]:"eRegulon"==t.item?[a("tr",{on:{click:function(t){return e.changeClustersAnn("eRegulon")}}},[a("td",[e._v(e._s(t.item))])])]:e._e()]}}],null,!1,2820310983),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),a("v-col",{attrs:{cols:"2",sm:"1"}},[a("v-card",{style:{"margin-left":"5px",width:"65px","min-width":"65px",height:"342px","padding-top":"15px","margin-top":"5px","background-color":"silver"},attrs:{flat:""}},[a("v-tooltip",{attrs:{right:"",disabled:e.isDrawing},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{icon:"",disabled:!e.spatialData||e.isDrawingRect||!e.isClusterView,color:e.colorOnOff,small:""},on:{click:function(t){e.isDrawing=!e.isDrawing}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-lasso")])],1)]}}],null,!1,4117228559)},[a("span",[e._v("Lasso Select")])]),a("v-tooltip",{attrs:{right:"",disabled:e.isDrawingRect},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",disabled:!e.spatialData||e.isDrawing||!e.isClusterView,color:e.colorOnOffRect,small:""},on:{click:function(t){e.isDrawingRect=!e.isDrawingRect}},model:{value:e.isDrawingRect,callback:function(t){e.isDrawingRect=t},expression:"isDrawingRect"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-select")])],1)]}}],null,!1,1556311684)},[a("span",[e._v("Quad Select")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.isDrawing&&!e.isDrawingRect,small:""},on:{click:function(t){e.listId=!0}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-eye")])],1)]}}],null,!1,2645962557)},[a("span",[e._v("View Id's/Genes")])]),a("v-dialog",{attrs:{width:"600px",height:"300px"},model:{value:e.listId,callback:function(t){e.listId=t},expression:"listId"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("Tixel Id's Selected")])]),a("v-card-text",[e._v(" "+e._s(e.highlightIds)+" ")]),a("v-card-title",["gene"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Genes")])]:e._e(),"motif"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Motifs")])]:e._e(),"eRegulon"==e.geneMotif?[a("span",{staticClass:"text-h5"},[e._v("Top 10 Regulons")])]:e._e()],2),a("v-card-text",[e._v(" "+e._s(e.topSelected)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveTxt}},[e._v(" Save ")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.listId=!1}}},[e._v(" Close ")])],1)],1)],1),e.clusterColorFlag?a("v-dialog",{attrs:{value:e.clusterColorFlag,scrollable:!0},on:{"click:outside":e.clearClusterColor}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","z-index":"999",height:"90vh"}},[a("v-card-title",[e._v("Color Configuration")]),a("v-card-text",[a("v-divider"),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",attrs:{cols:"12",sm:"12"}},[a("table",{staticStyle:{"margin-bottom":"0"}},[a("tbody",e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n},[a("b",[e._v(e._s(n))]),a("td",{staticStyle:{"padding-left":"50px","vertical-align":"top"}},[a("v-tooltip",{attrs:{color:"black",right:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[a("v-btn",e._g(e._b({staticClass:"round_chip",attrs:{color:t},on:{click:function(a){return e.copyToClip(t)}}},"v-btn",i,!1),r))]}}],null,!0)},[a("span",[e._v(e._s(t))])])],1),a("td",{staticStyle:{"padding-left":"80px"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{value:t,clearable:"",label:"Color Choice"},on:{input:function(t){return e.checkFieldColor(n+t)}}})],1)])})),0)])])],1)],1),a("div",{staticStyle:{width:"100%",height:"8px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"12"}},[a("v-color-picker",{attrs:{value:"hex",mode:"hexa","hide-mode-switch":""}})],1)],1)],1),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-6",attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{color:"red",outlined:""},on:{click:e.clearClusterColor}},[e._v(" Cancel ")]),a("v-btn",{staticClass:"pl-5",attrs:{color:"blue",outlined:""},on:{click:e.changeClusterColor}},[e._v(" Apply ")])],1)],1)],1)],1)],1):e._e(),e.cellTypeFlag?a("v-dialog",{attrs:{value:e.cellTypeFlag,scrollable:!0},on:{"click:outside":function(t){e.cellTypeFlag=!e.cellTypeFlag}}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","z-index":"999"},attrs:{loading:e.loading}},[a("v-card-title",[e._v("Cell Type Mapping")]),a("v-card-text",[a("v-divider"),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",attrs:{cols:"12",sm:"12"}},[a("table",{staticStyle:{"margin-bottom":"0"}},[a("tbody",e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n},[a("b",[e._v(e._s(n))]),a("td",{staticStyle:{"padding-left":"50px","vertical-align":"top"}},[a("v-btn",{staticClass:"round_chip",attrs:{color:t}})],1),a("td",{staticStyle:{"padding-left":"80px"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{value:e.cellTypeMapCopy[n],clearable:"",label:"Cell Typing"},on:{blur:function(t){return e.checkFieldCell(n,t)}}})],1)])})),0)])])],1)],1),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-6",attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{color:"red",outlined:""},on:{click:e.clearCellType}},[e._v(" Cancel ")]),a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.uploadCellType()},click:e.resetFile}}),a("v-btn",{staticClass:"pl-5",attrs:{color:"green",outlined:""},on:{click:function(t){return e.$refs.file.click()}}},[e._v(" Upload ")]),a("v-btn",{staticClass:"pl-5",attrs:{color:"blue",outlined:""},on:{click:e.changeCellType}},[e._v(" Apply ")])],1)],1)],1)],1)],1):e._e(),e.displayFlag?a("v-dialog",{attrs:{value:e.displayFlag,"hide-overlay":""},on:{"click:outside":function(t){e.displayFlag=!e.displayFlag}}},[a("v-card",{staticStyle:{width:"max-content",position:"absolute",left:"65px",top:"240px","z-index":"999"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:e.saveImageTable},scopedSlots:e._u([{key:"item",fn:function(t){return["Transparent"==t.item?[a("tr",{on:{click:function(t){return e.captureScreen("null")}}},[a("td",[e._v(e._s(t.item))])])]:"Opaque"==t.item?[a("tr",{on:{click:function(t){return e.captureScreen(e.backgroundColor)}}},[a("td",[e._v(e._s(t.item))])])]:[a("tr",{on:{click:e.generateFrontPage}},[a("td",[e._v(e._s(t.item))])])]]}}],null,!1,714686825),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),e.scaleFlag?a("v-dialog",{attrs:{scrollable:!0,value:e.scaleFlag,"hide-overlay":""},on:{"click:outside":function(t){e.scaleFlag=!e.scaleFlag}}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"30%",transform:"translate(-50%, -50%)","z-index":"999"}},[a("v-card-title",[e._v("Min/Max Range")]),a("v-row",{staticStyle:{padding:"8px"}},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{type:"text",rules:e.onlyNumRule,label:"Min"},model:{value:e.userMinValue,callback:function(t){e.userMinValue=t},expression:"userMinValue"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{type:"text",rules:e.onlyNumRule,label:"Max"},model:{value:e.userMaxValue,callback:function(t){e.userMaxValue=t},expression:"userMaxValue"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{outlined:"",color:"red"},on:{click:e.resetBoundary}},[e._v("Reset")]),a("v-btn",{attrs:{outlined:"",color:"green"},on:{click:e.applyBoundary}},[e._v("Apply")])],1)],1)],1)],1):e._e(),a("v-tooltip",{attrs:{right:"",disabled:e.cellTypeFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.spatialData,small:""},on:{click:function(t){e.cellTypeFlag=!e.cellTypeFlag}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-eyedropper-variant")])],1)]}}],null,!1,2035222387)},[a("span",[e._v("Cell Typing")])]),a("v-tooltip",{attrs:{right:"",disabled:e.scaleFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:0===e.childGenes.length,small:""},on:{click:function(t){e.scaleFlag=!e.scaleFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-scale")])],1)]}}],null,!1,64403955)},[a("span",[e._v("Min/Max Range")])]),a("v-tooltip",{attrs:{right:"",disabled:e.displayFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.spatialData,small:""},on:{click:function(t){e.displayFlag=!e.displayFlag}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-download")])],1)]}}],null,!1,53105994)},[a("span",[e._v("Save Display")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.publicLink,expression:"publicLink",arg:"copy"}],staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",small:""},on:{click:e.linkAlert}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-content-copy")])],1)]}}],null,!1,981542642)},[a("span",[e._v("Copy Public Link")])])],1),a("v-card",{style:{position:"sticky","margin-left":"5px",width:"65px","min-width":"65px",height:"149px","padding-top":"15px","background-color":"silver",top:"62vh"},attrs:{flat:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{color:"black",icon:"",disabled:!e.spatialData,small:""},on:{click:function(t){e.featureTableFlag=!0,e.peakViewerFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-table-large")])],1)]}}],null,!1,2784972826)},[a("span",[e._v("Feature Table")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{loading:e.peakViewLoad,color:"black",icon:"",disabled:!e.spatialData||e.assayFlag||e.peakViewLoad,small:""},on:{click:function(t){e.peakViewerFlag=!0,e.featureTableFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-chart-line")])],1)]}}],null,!1,645798270)},[a("span",[e._v(e._s(e.regulons_flag?"Peak/Motif/Network Viewer":"Peak/Motif Viewer"))])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{color:"black",icon:"",disabled:!e.spatialData,small:""},on:{click:function(t){e.histoFlag=!0,e.peakViewerFlag=!1,e.featureTableFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-chart-bar")])],1)]}}],null,!1,865424421)},[a("span",[e._v("Histogram")])])],1)],1),a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"11"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"10"}},[a("atx-atac-viewer",{ref:"mainAtxViewer",attrs:{query:{public:e.query.public},filename:e.filename,standalone:!1,selected_tixels:e.topSelected,selected_genes:e.childGenes,background:e.backgroundColor,heatmap:e.heatMap,manualColor:e.manualClusterFlag,task:"gene.compute_qc",queue:"atxcloud_gene",lasso:e.isDrawing,rect:e.isDrawingRect,clickedCluster:e.clickedClusterFromChild,checkBoxCluster:e.selectedClusters,indFlag:e.averageInd,antiKey:e.tableKey,geneOmotif:e.geneMotif,idOfRun:e.runId,userBoundary:e.userMaxMinValue,assay_flag:e.assayFlag,regulonsFlag:e.regulons_flag},on:{loading_value:e.updateLoading,highlightedId:e.updateSelectors,totalClust:e.updateClustTotal,spatialCircleData:e.updateHistogram,singleCircleData:e.dataToSingle,sendColorBar:e.colorBarToSingle,totalGM:e.loadExpressions,maxMinCount:e.updateMaxMin}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("table",{staticStyle:{"margin-bottom":"0",height:"50vh","overflow-y":"scroll",display:"block"}},e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n,style:{"vertical-align":"middle"}},[a("td",[a("v-checkbox",{attrs:{color:t,dense:"",dark:"white"!=e.backgroundColor,"input-value":"1"},on:{click:function(t){return e.unClickCluster(n)}}})],1),a("td",{staticStyle:{"padding-bottom":"12px"}},[a("span",{style:{color:"white"==e.backgroundColor?"black":"white","font-weight":"bold"}},[e._v(e._s(n)+" "),a("span",{staticStyle:{"font-size":"10px"}},[e._v(" ("+e._s(e.totalInClust[n])+")")])])])])})),0)])],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[e.averageInd&&e.childGenes.length>0?a("singleview",{attrs:{gene:e.childGenes,circleData:e.singleData,userBoundary:e.userMaxMinValue,heatmap:e.heatMap,loadingProp:e.loading,colorBar:e.colorBarFromSibling,background:e.backgroundColor}}):e._e()],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.featureTableFlag,expression:"featureTableFlag"}],staticClass:"mt-3",attrs:{flat:""}},[a("table-component",{attrs:{loading:e.geneMotifLoad,lengthClust:e.lengthClust,gene:e.geneNames,clusters:e.topHeaders,colormap:e.colorMap},on:{sentGene:e.sendGene,sentCluster:e.sendCluster}})],1),a("div",{attrs:{id:"captureHisto"}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.spatialCircleData.length>0&&e.histoFlag,expression:"spatialCircleData.length > 0 && histoFlag"}],staticClass:"mt-3",attrs:{flat:""}},[a("histogram-graph",{directives:[{name:"show",rawName:"v-show",value:e.histoFlag,expression:"histoFlag"}],attrs:{colorCode:e.colorMap,idName:e.childGenes,chartData:e.spatialCircleData,assay:e.assayFlag}})],1)],1),a("div",{style:{visibility:e.visible},attrs:{id:"capturePeak"}},[e.assayFlag?e._e():a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],ref:"peakContainer",staticClass:"mt-3",attrs:{flat:""}},["motif"==e.geneMotif?[a("v-card-title",[e._v(e._s(e.trackBrowserGenes[0]?e.trackBrowserGenes[0]:"Please enter motif in search bar to see seqlogo"))]),a("bar-chart",{ref:"chart",attrs:{seqlogo:e.seqLogoData,width:e.widthFromCard,motif:e.trackBrowserGenes[0]}})]:e._e(),a("network-graph",{directives:[{name:"show",rawName:"v-show",value:"eRegulon"==e.geneMotif,expression:"geneMotif == 'eRegulon'"}],attrs:{selected_regulons:e.childGenes,run_id:e.runId,flag:e.regulons_flag}}),a("track-browser",{directives:[{name:"show",rawName:"v-show",value:"gene"==e.geneMotif,expression:"geneMotif == 'gene'"}],ref:"trackbrowser",attrs:{run_id:e.runId,metadata:e.metadata.species,search_key:e.trackBrowserGenes[0]},on:{loading_value:e.updateLoading}})],2)],1)],1)],1)],1)],2):e._e()],1)},Ru=[],Cu=a("ade3"),Su=(a("466d"),a("5319"),a("a434"),a("a15b"),a("ce5b")),Iu=a.n(Su);a("bf40");o["default"].use(Iu.a);var Au=new Iu.a,Fu=a("c0e9"),Mu=a.n(Fu),Du=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",{staticClass:"noScroll",attrs:{loading:0==e.genes.length,disabled:0==e.genes.length,id:"noScrollId",items:e.filteredGenes,outlined:!1,multiple:"",dense:"",clearable:"",placeholder:"",label:e.labelValue,"allow-overflow":!1,chips:"","cache-items":!1,color:"blue-grey lighten-2","item-text":"name","item-value":"name","search-input":e.searchInput,"menu-props":{closeOnContentClick:!0},width:"100%","small-chips":""},on:{paste:e.handlePaste,"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},change:e.onGenelistChanged,focus:e.cleanAuto,blur:e.cleanInput},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.name)+" ")]}},{key:"selection",fn:function(t){return[a("v-chip",{ref:t.item.name,attrs:{id:t.item.name,close:"",small:"",color:e.autoGenes.includes(t.item.name)?"warning":"rgb(0, 0, 0, .05)"},on:{click:function(a){return a.stopPropagation(),e.updateTrack(t.item.name)},"click:close":function(a){return e.remove(t.item)}}},[e._v(e._s(t.item.name)+" ")])]}},{key:"prepend",fn:function(){return[a("input",{ref:"filegac",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.readFile()},click:e.resetFile}}),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n2",staticStyle:{"min-width":"0"},attrs:{id:"no-background-hover",elevation:"0",color:"transparent",medium:""},on:{click:function(t){return e.$refs.filegac.click()}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-upload")])],1)]}}])},[a("span",[e._v("Upload gene IDs")])])]},proxy:!0},e.selectedGenes.length>0?{key:"append-outer",fn:function(){return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n1",staticStyle:{padding:"0","min-width":"0"},attrs:{id:"no-background-hover",elevation:"0",color:"transparent",medium:""},on:{click:e.collapseGene}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-menu")])],1)]}}],null,!1,3850458577)},[a("span",[e._v("Open/Collapse")])]),a("v-btn",{staticClass:"mt-n1",attrs:{id:"no-background-hover",color:"primary",medium:"",text:""},on:{click:e.showGene}},[e._v("Show")]),a("div",{staticClass:"customCheck"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-simple-checkbox",e._g(e._b({attrs:{label:"",color:"secondary","hide-details":"",dense:""},model:{value:e.de_select,callback:function(t){e.de_select=t},expression:"de_select"}},"v-simple-checkbox",r,!1),n))]}}],null,!1,3370899872)},[a("span",[e._v("(De)Select All")])])],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mt-n1",attrs:{medium:"",text:"",id:"averageIndButton"},on:{click:function(t){e.avgInd=!e.avgInd}}},"v-btn",r,!1),n),[e._v(e._s(e.avgInd?"Ind":"Avg")+" ")])]}}],null,!1,4256409343)},[a("span",[e._v("Average<->Individual")])])]},proxy:!0}:null],null,!0),model:{value:e.selectedGenes,callback:function(t){e.selectedGenes=t},expression:"selectedGenes"}})},Pu=[],Tu=(a("2ca0"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),Eu=Object(v["c"])({name:"GeneAutoComplete",props:["gene_list","gene_button","search_bar_enabled"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}));var a=Object(v["g"])([]),n=Object(v["g"])([]),r=Object(v["g"])(null),i=Object(v["a"])((function(){return e.gene_list})),u=Object(v["a"])((function(){return e.gene_button})),l=Object(v["g"])([]),s=Object(v["g"])(!1),o=Object(v["g"])(!1),c=Object(v["g"])("Enter ID"),d=Object(v["g"])(!1),p=Object(v["g"])(!1),f=Object(v["g"])(!1),g=Object(v["g"])(32),m=Object(v["g"])(0),h=Object(v["g"])([]),b=Object(v["g"])(!1),_=Object(v["g"])([]);function w(e){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.value.length>0&&(n.value=l.value.filter((function(e){return a.value.includes(e.name)})));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return O=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.value=null;case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e){return R.apply(this,arguments)}function R(){return R=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:o.value=!0,setTimeout((function(){n.value=l.value.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())||a.value.includes(e.name)})),o.value=!1}),500);case 4:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return S=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.emit("changed",a);case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return A=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:n=e.sent,i=n.split(/[,\s]+/),u=i.map((function(e){return e.replace(/[,\\/#!$%^&*;:{}=_`~()@'"\r\n\s]/g,"")})),u.forEach((function(e,t){var n,i=e,u=e.toLowerCase(),s=u.charAt(0).toUpperCase()+u.slice(1);n=1===l.value.filter((function(e){return e.name===i})).length?i:1===l.value.filter((function(e){return e.name===s})).length?s:null,a.value.includes(n)||null===n||(r.value=n,a.value.push(n))})),C(a.value),r.value=null;case 8:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function F(e){return M.apply(this,arguments)}function M(){return M=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value=!0,t.emit("sentgenes",h.value);case 2:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return P=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:h.value.includes(t)?(a=h.value.indexOf(t),a>-1&&h.value.splice(a,1)):h.value.push(t);case 1:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function T(e){if(h.value.includes(e.name)){var t=h.value.indexOf(e.name);t>-1&&h.value.splice(t,1)}var n=a.value.filter((function(t){return t!==e.name}));a.value=n,r.value="",C(a.value)}function E(){b.value=!b.value;var e=document.querySelector(".noScroll"),t=e.querySelector(".v-select__selections");b.value?(t.style.height="32px",t.style.overflow="auto"):(t.style.height="auto",t.style.overflow="none")}function B(){var e=t.refs.filegac.files[0],a=new FileReader;e.type.includes("csv")?(a.onload=function(e){_.value=[e.target.result]},a.onerror=function(e){return console.log(e)},a.readAsText(e)):ke.dispatch({text:"Wrong file type must be csv",options:{right:!0,color:"error"}})}function q(e){var t=e.target;t.value=""}return Object(v["h"])(r,(function(e){e&&j(e)})),Object(v["h"])(d,(function(e){e?a.value.forEach((function(e,a){h.value.includes(e)||(t.refs[e].toggle(),h.value.push(e))})):(a.value.forEach((function(e,a){h.value.includes(e)&&t.refs[e].toggle()})),h.value=[])})),Object(v["h"])(p,(function(e){t.emit("avgind",p.value)})),Object(v["h"])(i.value,(function(e){l.value=e})),Object(v["h"])(u.value,(function(e){var n=e[0];if(!a.value.includes(n)&&"string"===typeof n){r.value=n,a.value.push(n),C(a.value);var i=new MutationObserver((function(e){document.getElementById("".concat(n))&&(t.refs[n].toggle(),i.disconnect())}));i.observe(document.body,{childList:!0,subtree:!0,characterDataOldValue:!0})}0===e.length&&(r.value="",a.value=[])})),Object(v["h"])(a,(function(e){0===a.value.length?(n.value=l.value,h.value=[],s.value=!1,c.value="Enter ID"):c.value=""})),Object(v["h"])(_,(function(e){var t=e[0].split(","),n=t.map((function(e){return e.replace(/[.,\\/#!$%^&*;:{}=_`~()@'"\s]/g,"")}));n.forEach((function(e,t){var n,i=e,u=e.toLowerCase(),s=u.charAt(0).toUpperCase()+u.slice(1);n=1===l.value.filter((function(e){return e.name===i})).length?i:1===l.value.filter((function(e){return e.name===s})).length?s:null,a.value.includes(n)||null===n||(r.value=n,a.value.push(n))})),C(a.value)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Tu;case 2:case"end":return e.stop()}}),e)})))),{selectedGenes:a,filteredGenes:n,searchInput:r,autocompleteLoading:o,showFlag:s,labelValue:c,de_select:d,clicked:f,paddingValue:g,newRowCounter:m,autoGenes:h,valueCollapse:b,fileContent:_,avgInd:p,genes:l,querySelections:j,onGenelistChanged:C,remove:T,showGene:F,updateTrack:D,collapseGene:E,readFile:B,resetFile:q,handlePaste:I,cleanAuto:w,cleanInput:y}}}),Uu=Eu,Bu=(a("a173"),Object(te["a"])(Uu,Du,Pu,!1,null,"0ee6a4b8",null)),qu=Bu.exports,Nu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"dataTable",attrs:{dense:"","items-per-page":999,"hide-default-footer":"","hide-default-header":"",items:e.gene,headers:e.cluster,loading:e.loading},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.props;return e._l(n.headers,(function(t){return a("th",{key:t.text},["Anti"==t.text?[1==t.key?[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v("UP")])]:[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v("DOWN")])]]:[a("v-btn",{attrs:{text:"",dense:"",color:e.colormap[t.text]},on:{click:function(a){return e.sendCluster(t.text)}}},[e._v(e._s(t.text))])]],2)}))}},{key:"item",fn:function(t){return[a("tr",e._l(t.item,(function(t,n){return a("td",{key:n},["number"==typeof t?[e._v(" "+e._s(t)+" ")]:[a("v-btn",{attrs:{text:"","x-small":"",dense:""},on:{click:function(a){return e.sendGene(t)}}},[e._v(e._s(t))])]],2)})),0)]}}])})},Lu=[],Gu=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),$u=Object(v["c"])({name:"GeneDataTable",props:["gene","clusters","lengthClust","loading","colormap"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route})),Object(v["a"])((function(){return e.gene}));var a=Object(v["a"])((function(){return e.clusters}));Object(v["a"])((function(){return e.lengthClust})),Object(v["a"])((function(){return e.loading})),Object(v["a"])((function(){return e.colormap}));function n(e){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.emit("sentGene",a);case 1:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function i(e){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"Anti"===n&&(a.value[0].key*=-1),t.emit("sentCluster",n);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Gu;case 2:case"end":return e.stop()}}),e)})))),{cluster:a,sendGene:n,sendCluster:i}}}),zu=$u,Vu=(a("6bca"),Object(te["a"])(zu,Nu,Lu,!1,null,"07ba6f24",null)),Wu=Vu.exports,Hu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{flat:"",loading:e.loading}},[a("v-card-text",[a("div",{attrs:{id:e.pageId}})])],1)},Ju=[],Xu=a("2909"),Qu=(a("8a79"),a("841c"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),Yu=Object(v["c"])({name:"TrackBrowser",props:{value:{type:String,required:!1,default:null},search_key:{type:String,required:!1,default:null},params:{type:Object,required:!1,default:null},metadata:{type:String,required:!0,default:null}},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["a"])((function(){return t.root.$route})),r=Object(v["g"])(),i=Object(v["g"])(e.search_key),u=Object(v["a"])((function(){return e.search_key})),l=Object(v["a"])((function(){return e.metadata})),s=Object(v["g"])([]),o=(Object(v["g"])([]),Object(v["g"])(null),Object(v["g"])({})),c="svgHolder-".concat(rt()),d=Object(v["g"])(),p=Object(v["g"])(),f={homo_sapiens:"grch38",rattus_norvegicus:"rn6",mus_musculus:"mm10"},g=[],m=Object(v["g"])(!1);function h(e){var t=[];S.a.each(e,(function(e){if(e.key.includes(".2bit")){var a=e.key.split("/").reverse()[0].split(".")[0],n={id:a,name:a,desc:e.key,twoBitURI:e.href,tier_type:"sequence"};t.push(n)}})),S.a.each(e,(function(e){if(e.key.includes(".bed")){var a=e.key.split("/").reverse()[0].split(".")[0],n={id:a,name:a,desc:e.key,uri:e.href,tier_type:"memstore",payload:"bed"};t.push(n)}})),S.a.each(e,(function(a){if(a.key.includes(".bb")){var n=e.filter((function(e){return e.key.endsWith(".ix")})),r=Object(Lr["a"])(n,1),i=r[0].href,u=a.key.split("/").reverse()[0].split(".")[0],l={id:u,name:u,desc:a.key,bwgURI:a.href,stylesheet_uri:"//www.biodalliance.org/stylesheets/gencode.xml",tier_type:"bb",collapseSuperGroups:!0,trixURI:i};t.push(l)}})),S.a.each(e,(function(e,a){if(e.key.includes(".bw")){var n=e.key.split("/").reverse()[0].split(".")[0],r={id:n,name:n,desc:e.key,bwgURI:e.href,style:[{type:"default",style:{glyph:"HISTOGRAM",FGCOLOR:o.value[n],BGCOLOR:o.value[n],HEIGHT:30,id:"style1"}}],noDownsample:!0,tier_type:"bw"};t.push(r)}})),p.value.sources=t}function b(e){return _.apply(this,arguments)}function _(){return _=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,u,o,v,g,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return d.value=l.value,n=d.value.replace("_"," "),p.value={chr:"1",viewStart:0,viewEnd:1e6,maxViewWidth:1e7,pageName:c,coordSystem:{speciesName:n,auth:"",ucscName:f[d.value]},onFirstRender:function(){console.log("Rendered")}},r="atx-track-host",i={path:"data",filter:["".concat(t,"/tracks")]},u={bucket:r,path:"ref",filter:["".concat(f[d.value])]},e.next=10,a.value.getFileList(i);case 10:return o=e.sent,o.sort((function(e,t){if(null===e.match(/C\d+/)||null===t.match(/C\d+/))return 0;var a=e.match(/C\d+/)[0],n=t.match(/C\d+/)[0],r=parseFloat(a.split("C")[1]),i=parseFloat(n.split("C")[1]);return r<i?-1:r>i?1:0})),e.next=14,a.value.getFileList(u);case 14:return v=e.sent,g=o.concat.apply(o,Object(Xu["a"])(v)),m=g.filter((function(e){return e.includes(".bw")||e.includes(".bb")||e.includes(".2bit")||e.includes(".bed")||e.endsWith(".ix")||e.endsWith(".ixx")})),b=m.map((function(e){var t=null;a.value&&(t=e.endsWith(".ixx")||e.endsWith(".2bit")||e.endsWith(".ix")||e.endsWith(".bb")?a.value.downloadByLinkPublic(r,e):a.value.downloadByLink(e,3600));var n={key:e,href:t};return n})),e.next=20,Promise.allSettled(b.map((function(e){return e.href}))).then((function(e){S.a.each(e,(function(e,t){b[t].href=e.value.msg}))})).finally((function(){}));case 20:s.value=b,h(s.value);case 22:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function w(e){p.value.sources.forEach((function(t,a){"bw"===t.tier_type&&(p.value.sources[a].style=[{type:"default",style:{glyph:"HISTOGRAM",FGCOLOR:e[t.id],BGCOLOR:e[t.id],HEIGHT:30,id:"style1"}}])}))}function x(e){r.value.search(i.value,(function(e){e||ke.dispatch({text:"Expression ".concat(i.value," found"),options:{right:!0,color:"success"}})}),{})}function y(e,t){return O.apply(this,arguments)}function O(){return O=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m.value=!0,e.next=3,b(t);case 3:return w(a),e.next=6,new window.Browser(p.value);case 6:r.value=e.sent,m.value=!1;case 8:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return S.a.forIn(f,(function(e,t){g.push(t)})),Object(v["h"])(u,(function(e){i.value=e,x(null)})),Object(v["h"])(m,(function(e){t.emit("loading_value",e)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Qu;case 2:case"end":return e.stop()}}),e)})))),{currentRoute:n,species:g,selectedSpecies:d,pageId:c,search:i,loading:m,metadataFromParents:l,onClickSearch:x,reload:y}}}),Ku=Yu,Zu=Object(te["a"])(Ku,Hu,Ju,!1,null,null,null),el=Zu.exports,tl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"shrinkCol",attrs:{cols:"12",sm:"1"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{flat:"",height:"50vh",width:"100%"}},[a("v-card-text",[a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:e.resetScaleAndPos}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-expand")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScale("plus")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-plus")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScale("neg")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-minus")])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{id:"stageParentDualAtac",loading:e.loading,flat:"",height:"50vh",align:"center"},on:{mousedown:e.mouseDownOnStageLeft,mousemove:e.mouseMoveOnStageLeft,mouseup:e.mouseUpOnStageLeft,mouseleave:e.hideToolTipS}},[a("div",{style:{width:"max-content",position:"absolute","z-index":"999","background-color":"white",opacity:"0.7",visibility:e.visibility,top:e.TTposition[1],left:e.TTposition[0],"border-radius":"3px","font-size":"12px","text-align":"left"},attrs:{id:"toolTipSpatial"}}),a("svg",{attrs:{id:"svgSpatial",width:e.konvaConfigLeft.width,height:e.konvaConfigLeft.height,viewBox:"0 0 "+e.svg_spatial_wh[0]+" "+e.svg_spatial_wh[1]}},[a("svg",{staticStyle:{"pointer-events":"bounding-box"},attrs:{id:"spatialGroup",width:e.spatial_wh[0],height:e.spatial_wh[1],x:"30",y:"30"}})])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"10"}},[e.isClusterView||e.spatialRun?e._e():[a("div",{style:{"background-image":e.colorBarmap,display:"flex"}},e._l(e.stepArray,(function(t){return a("div",{key:""+t,style:{color:e.colorbarText,"font-size":"18px","font-weight":"bold",width:"20%","text-align":"center"}},[e._v(" "+e._s(t)+" ")])})),0)]],2)],1)],1),a("v-col",{staticClass:"shrinkCol",attrs:{cols:"12",sm:"1"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{flat:"",height:"50vh",width:"100%"}},[a("v-card-text",[a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:e.resetScaleAndPosUMAP}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-expand")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScaleUMAP("plus")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-plus")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){return e.reScaleUMAP("neg")}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-minus")])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{loading:e.loading,flat:"",height:"50vh"},on:{mousedown:e.mouseDownOnStageRight,mousemove:e.mouseMoveOnStageRight,mouseup:e.mouseUpOnStageRight,mouseleave:e.hideToolTipU}},[a("div",{style:{width:"max-content",position:"absolute","z-index":"999","background-color":"white",opacity:"0.7",visibility:e.visibilityUmap,top:e.TTpositionUmap[1],left:e.TTpositionUmap[0],"border-radius":"3px","font-size":"12px","text-align":"left"},attrs:{id:"toolTipUmap"}},[e._v(e._s(e.toolTipTextUmap))]),a("svg",{attrs:{id:"svgUmap",width:e.konvaConfigRight.width,height:e.konvaConfigRight.height,viewBox:"0 0 "+e.svg_umap_wh[0]+" "+e.svg_umap_wh[1]}},[a("svg",{staticStyle:{"pointer-events":"bounding-box"},attrs:{id:"umapGroup",width:e.umap_wh[0],height:e.umap_wh[1],x:"30",y:"30"}})])]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"10"}},[e.isClusterView||e.spatialRun?e._e():[a("div",{style:{"background-image":e.colorBarmap,display:"flex"}},e._l(e.stepArray,(function(t){return a("div",{key:""+t,style:{color:e.colorbarText,"font-size":"18px","font-weight":"bold",width:"20%","text-align":"center"}},[e._v(" "+e._s(t)+" ")])})),0)]],2)],1)],1)],1)},al=[],nl=(a("b65f"),a("b680"),new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}))),rl=[{text:"ID",value:"id"}],il=[{text:"Cluster",value:"name"}];function ul(e,t,a){var n=Math.min.apply(Math,Object(Xu["a"])(t))+12*a,r=Math.max.apply(Math,Object(Xu["a"])(t))+12*a,i=e.length,u=[];return S.a.each(t,(function(t){var l=t+12*a,s=(l-n)/(r-n)*(i-1),o=Math.trunc(s);u.push(e[o])})),u}var ll=Object(v["c"])({name:"AtxAtacViewer",props:["query","filename","selected_genes","heatmap","background","task","queue","standalone","lasso","rect","manualColor","clickedCluster","checkBoxCluster","indFlag","geneOmotif","idOfRun","antiKey","userBoundary","assay_flag","regulonsFlag"],setup:function(e,t){var a,n,r=Object(v["a"])((function(){return U.state.client})),i=Object(v["g"])(),u=Object(v["a"])((function(){return e.idOfRun})),l=Object(v["g"])(""),s=Object(v["a"])((function(){return e.filename})),o=Object(v["a"])((function(){return e.manualColor})),c=Object(v["g"])(),d=Object(v["g"])(null),p=Object(v["a"])((function(){return e.task})),f=Object(v["a"])((function(){return e.queue})),g=Object(v["g"])(),m=Object(v["g"])(!1),h=Object(v["g"])([]),b=Object(v["a"])((function(){return e.selected_genes})),_=Object(v["g"])(null),w=Object(v["g"])(null),x=window.innerWidth,y=window.innerHeight,O=Object(v["g"])({x:0,y:0,width:x,height:y,draggable:!0}),j=Object(v["g"])({x:0,y:0,width:x,height:y,draggable:!0}),R=Object(v["g"])(.75),C=Object(v["g"])(.75),I=Object(v["g"])(!0),A=Object(v["g"])(!1),F=Object(v["g"])(1e4),M=Object(v["g"])(0),D=Object(v["g"])(),P=Object(v["g"])([]),T=Object(v["g"])([]),E=Object(v["g"])([]),B=Object(v["g"])("darkgray"),q=Object(v["a"])((function(){return e.background?e.background:"black"})),N=Object(v["a"])((function(){return e.heatmap?e.heatmap:"jet"})),L=Object(v["g"])([]),G=Object(v["g"])(""),$=Object(v["g"])(null),z=Object(v["g"])([]),V=Object(v["a"])((function(){return e.lasso})),W=Object(v["a"])((function(){return e.rect})),H=Object(v["g"])(!1),J=Object(v["g"])(!1),X=Object(v["g"])([]),Q=Object(v["g"])([]),Y=Object(v["g"])(),K=Object(v["g"])(),Z=Object(v["g"])(),ee=Object(v["g"])("white"),te=Object(v["g"])([]),ae=Object(v["g"])([]),ne=Object(v["g"])(0),re=Object(v["g"])(!1),ie=Object(v["g"])({}),ue=Object(v["g"])({}),le=Object(v["a"])((function(){return e.clickedCluster})),se=Object(v["a"])((function(){return e.checkBoxCluster})),oe=Object(v["a"])((function(){return e.antiKey})),ce=Object(v["a"])((function(){return e.indFlag})),de=Object(v["g"])({}),ve=Object(v["g"])({}),pe=Object(v["g"])({}),fe=Object(v["g"])(0),ge=Object(v["g"])(0),me=Object(v["g"])(0),he=Object(v["g"])(0),be=Object(v["g"])(0),_e=Object(v["g"])(0),we=Object(v["g"])(0),xe=Object(v["g"])(0),ye=Object(v["g"])([]),Oe=Object(v["a"])((function(){return e.geneOmotif})),je=Object(v["a"])((function(){return e.userBoundary})),Re=Object(v["g"])([]),Ce=Object(v["g"])(""),Se=Object(v["g"])([]),Ie=Object(v["g"])([]),Ae=Object(v["g"])(),Fe=Object(v["g"])(),Me=Object(v["g"])(),De=Object(v["g"])(),Pe=Object(v["g"])([]),Te=Object(v["g"])([]),Ee=Object(v["g"])([0,0]),Ue=Object(v["g"])([0,0]),Be=Object(v["g"])([0,0]),qe=Object(v["g"])([0,0]),Ne=1,Le=[],Ge="",$e="",ze=document.createElementNS("http://www.w3.org/2000/svg","path"),Ve=document.createElementNS("http://www.w3.org/2000/svg","path"),We=document.createElementNS("http://www.w3.org/2000/svg","rect"),He=document.createElementNS("http://www.w3.org/2000/svg","rect"),Je=Object(v["g"])(!1),Xe=(document.getElementById("toolTipSpatial"),document.getElementById("toolTipUmap"),Object(v["g"])("hidden")),Qe=Object(v["g"])("hidden"),Ye=Object(v["g"])(""),Ke=Object(v["g"])(["0","0"]),Ze=Object(v["g"])(["0","0"]),et=Object(v["a"])((function(){return e.assay_flag})),tt=Object(v["a"])((function(){return e.regulonsFlag})),at=Object(v["g"])([]),nt=Object(v["g"])(!1),it=Object(v["g"])(!1),ut=0;function lt(){return ot.apply(this,arguments)}function ot(){return ot=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.querySelector("#stageParentDualAtac"),t){e.next=3;break}return e.abrupt("return");case 3:a=t.offsetWidth,n=t.offsetHeight,O.value.width=a,O.value.height=n,j.value.width=a,j.value.height=n,Ee.value=[O.value.width,O.value.height],Ue.value=[j.value.width,j.value.height],r=document.getElementById("spatialGroup"),i=document.getElementById("umapGroup"),Be.value=[r.getBoundingClientRect().width,r.getBoundingClientRect().height],qe.value=[i.getBoundingClientRect().width,i.getBoundingClientRect().height];case 15:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(e){var t=h.value.filter((function(t){return t!==e.name}));h.value=t}function dt(){var e=[],t={};if(it.value){var a=Object.keys(ue.value),n=N.value;a.forEach((function(e,a){t[e]=n[a]}))}else S.a.each(N.value,(function(t,a){e.push(t)}));for(var r=0;r<_.value.spatial.length;r+=1){var i=document.getElementById("tixel".concat(r)),u=document.getElementById("tixelUmap".concat(r)),l=/\d+/g,s=void 0;if(s=it.value?i?i.getAttribute("celltype"):"":i?i.getAttribute("cluster"):"",I.value||ce.value)if(it.value){var o=i?i.getAttribute("celltype"):"";null===i||void 0===i||i.setAttribute("fill","".concat(t[o])),null===u||void 0===u||u.setAttribute("fill","".concat(t[o]))}else{var c=Number(s.match(l)[0])-1,d=e[c];null===i||void 0===i||i.setAttribute("fill","".concat(d)),null===u||void 0===u||u.setAttribute("fill","".concat(d))}else null===i||void 0===i||i.setAttribute("fill","".concat(at.value[r])),null===u||void 0===u||u.setAttribute("fill","".concat(at.value[r]));null===i||void 0===i||i.setAttribute("opacity","1.0"),null===u||void 0===u||u.setAttribute("opacity","1.0")}D.value=""}function vt(e,t){var a=!1;if(V.value)for(var n=Object(Lr["a"])(e,2),r=n[0],i=n[1],u=0,l=t.length-1;u<t.length;l=u+0,u+=1){var s=Object(Lr["a"])(t[u],2),o=s[0],c=s[1],d=Object(Lr["a"])(t[l],2),v=d[0],p=d[1],f=c>i!==p>i&&r<(v-o)*(i-c)/(p-c)+o;f&&(a=!a)}if(W.value){var g,m=Object(Lr["a"])(e,2),h=m[0],b=m[1];g="left"===Z.value?Y.value[0].points:K.value[0].points,h>=g[0]&&h<=g[0]+g[2]&&b>=g[1]&&b<=g[1]+g[3]&&(a=!0)}return a}function pt(){te.value=[];var e=function(e){var t=!1;return"left"===Z.value&&Y.value.forEach((function(a,n){V.value&&vt(e,st(a.points,2))&&(t=!0),W.value&&vt(e,[])&&(t=!0)})),"right"===Z.value&&K.value.forEach((function(a,n){V.value&&vt(e,st(a.points,2))&&(t=!0),W.value&&vt(e,[])&&(t=!0)})),t},t=function(e){e.ownerSVGElement;var t="left"===Z.value?Ae.value.getAttribute("x"):Fe.value.getAttribute("x"),a="left"===Z.value?Ae.value.getAttribute("y"):Fe.value.getAttribute("y"),n={x:parseFloat(t)+parseFloat(e.cx.baseVal.value),y:parseFloat(a)+parseFloat(e.cy.baseVal.value)};return n},a=[];if("left"===Z.value)for(var n=0;n<_.value.spatial.length;n+=1){var r=document.getElementById("tixel".concat(n)),i=t(r);a.push(e([i.x,i.y]))}else for(var u=0;u<_.value.spatial.length;u+=1){var l=document.getElementById("tixelUmap".concat(u)),s=t(l);a.push(e([s.x,s.y]))}var o=a.filter((function(e){return e})).length;if(ne.value=o,o<1)return ae.value=[],void dt();S.a.each(a,(function(e,t){var a=document.getElementById("tixel".concat(t)),n=document.getElementById("tixelUmap".concat(t));e?te.value.push(t):(null===a||void 0===a||a.setAttribute("opacity","0.3"),null===n||void 0===n||n.setAttribute("opacity","0.2"))}))}function ft(e){var t=[],a={};if(it.value){var n=Object.keys(ue.value),r=N.value;n.forEach((function(e,t){a[e]=r[t]}))}else S.a.each(N.value,(function(e,a){t.push(e)}));"darkgrey"===q.value?B.value="white":B.value="darkgrey";for(var i=0;i<_.value.spatial.length;i+=1){var u=document.getElementById("tixel".concat(i)),l=document.getElementById("tixelUmap".concat(i)),s=/\d+/g,o=void 0;if(o=it.value?u?u.getAttribute("celltype"):"":u?u.getAttribute("cluster"):"",e.includes(o))if(I.value||ce.value)if(it.value){var c=u?u.getAttribute("celltype"):"";null===u||void 0===u||u.setAttribute("fill","".concat(a[c])),null===l||void 0===l||l.setAttribute("fill","".concat(a[c]))}else{var d=Number(o.match(s)[0])-1,v=t[d];null===u||void 0===u||u.setAttribute("fill","".concat(v)),null===l||void 0===l||l.setAttribute("fill","".concat(v))}else null===u||void 0===u||u.setAttribute("fill","".concat(at.value[i])),null===l||void 0===l||l.setAttribute("fill","".concat(at.value[i]));else null===u||void 0===u||u.setAttribute("fill","".concat(B.value)),null===l||void 0===l||l.setAttribute("fill","".concat(B.value))}D.value=e,A.value=!0}function gt(e,t){for(var a=[],n=5,r=(e-t)/(n-1),i=0;i<n;i+=1)a.push(parseFloat((t+r*i).toFixed(2)));return a}function mt(e){return 0===Re.value.length?e:e>parseFloat(Re.value[0])?parseFloat(Re.value[0]):e<parseFloat(Re.value[0])&&e>parseFloat(Re.value[1])?e:e<parseFloat(Re.value[1])?parseFloat(Re.value[1]):e}function ht(e){return 0===Re.value.length||!(e>parseFloat(Re.value[0]))&&(e<parseFloat(Re.value[0])&&e>parseFloat(Re.value[1])||!(e<parseFloat(Re.value[1]))&&e)}function bt(){return _t.apply(this,arguments)}function _t(){return _t=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,u,l,s,o,c,d,v,p,f,g,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Je.value){e.next=2;break}return e.abrupt("return");case 2:t=_.value.spatial.length<4e3?22:44,a=_.value.spatial.length<4e3?30:58,n=O.value,r=n.width,i=n.height,u=j.value,l=u.width,s=u.height,o=Math.min(r/(me.value-fe.value),i/(he.value-ge.value)),c=Math.min(l/(we.value-be.value),s/(xe.value-_e.value)),d=Math.min(r,i)/(5*t)*R.value,v=Math.min(l,s)/(5*a)*C.value,p=R.value*o*fe.value-d,f=R.value*o*ge.value-d,g=C.value*c*be.value-v,m=C.value*c*_e.value-v,_.value.spatial.forEach((function(e,t){var a=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]),i=parseFloat(e[4]),u=document.getElementById("tixel".concat(t)),l=document.getElementById("tixelUmap".concat(t));u.setAttribute("cx","".concat(a*R.value*o-p)),u.setAttribute("cy","".concat(n*R.value*o-f)),u.setAttribute("r","".concat(d)),l.setAttribute("cx","".concat(r*C.value*c-g)),l.setAttribute("cy","".concat(i*C.value*c-m)),l.setAttribute("r","".concat(v))}));case 15:case"end":return e.stop()}}),e)}))),_t.apply(this,arguments)}function wt(){return xt.apply(this,arguments)}function xt(){return xt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,l,s,o,c,d,v,p,f,g,m,h,b,w,x,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=[],S.a.each(N.value,(function(e,t){a.push(e)})),n=_.value.spatial.length<4e3?22:44,r=_.value.spatial.length<4e3?30:58,i=O.value,u=i.width,l=i.height,s=j.value,o=s.width,c=s.height,d=Math.min(u/(me.value-fe.value),l/(he.value-ge.value)),v=Math.min(o/(we.value-be.value),c/(xe.value-_e.value)),p=Math.min(u,l)/(5*n)*R.value,f=Math.min(o,c)/(5*r)*C.value,60,30,g=R.value*d*fe.value-p,m=R.value*d*ge.value-p,h=C.value*v*be.value-f,b=C.value*v*_e.value-f,w="http://www.w3.org/2000/svg",Ae.value=document.getElementById("spatialGroup"),Fe.value=document.getElementById("umapGroup"),Me.value=document.getElementById("svgSpatial"),De.value=document.getElementById("svgUmap"),x=[],y=[],_.value.spatial.forEach((function(e,t){x.push(parseFloat(e[5])),y.push(parseFloat(e[6]));var n=parseFloat(e[1]),r=parseFloat(e[2]),i=parseFloat(e[3]),u=parseFloat(e[4]),l=/\d+/g,s=e[0],o=Number(s.match(l)[0])-1,c=document.createElementNS(w,"circle"),_=document.createElementNS(w,"circle");c.setAttribute("cx","".concat(n*R.value*d-g)),c.setAttribute("cy","".concat(r*R.value*d-m)),c.setAttribute("r","".concat(p)),c.setAttribute("fill","".concat(a[o])),c.setAttribute("id","tixel".concat(t)),c.setAttribute("cluster","".concat(e[0])),c.setAttribute("opacity","1.0"),_.setAttribute("cx","".concat(i*C.value*v-h)),_.setAttribute("cy","".concat(u*C.value*v-b)),_.setAttribute("r","".concat(f)),_.setAttribute("fill","".concat(a[o])),_.setAttribute("id","tixelUmap".concat(t)),_.setAttribute("cluster","".concat(e[0])),_.setAttribute("opacity","1.0"),0!==ut&&(c.setAttribute("celltype","".concat(e[ut])),_.setAttribute("celltype","".concat(e[ut]))),nt.value&&(c.setAttribute("sample","".concat(e[7])),c.setAttribute("treatment","".concat(e[8])),_.setAttribute("sample","".concat(e[7])),_.setAttribute("treatment","".concat(e[8]))),Ae.value.appendChild(c),Fe.value.appendChild(_)})),Be.value=[Ae.value.getBoundingClientRect().width,Ae.value.getBoundingClientRect().height],qe.value=[Fe.value.getBoundingClientRect().width,Fe.value.getBoundingClientRect().height],Je.value=!0,t.emit("spatialCircleData",[x,y]);case 27:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function yt(){return kt.apply(this,arguments)}function kt(){return kt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,l,s,o,c,d,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==_.value&&void 0!==_.value.spatial){e.next=2;break}return e.abrupt("return");case 2:A.value=!1,a=[],L.value=[],n=[],r=[],i=[],u={},it.value?(l=Object.keys(ue.value),s=N.value,l.forEach((function(e,t){u[e]=s[t]}))):S.a.each(N.value,(function(e,t){n.push(e)})),r=Bi()({colormap:"jet",nshades:64,format:"hex",alpha:1}),G.value="linear-gradient(to right, ".concat(r[0],", ").concat(r[16],", ").concat(r[32]," , ").concat(r[48],", ").concat(r[63],")"),E.value=n,M.value=-1e4,F.value=1e4,o=0,I.value||ce.value?(c=[],d=[],v=[],_.value.spatial.forEach((function(e,t){o=0,d.push(parseFloat(e[5])),v.push(parseFloat(e[6]));var r=parseFloat(e[1]),l=parseFloat(e[2]),s=/\d+/g,p=e[0],f=Number(p.match(s)[0])-1;c.push([r,l,e]);var g={cluster:e[0],ogx:r,ogy:l,total:0,genes:{}},m=document.getElementById("tixel".concat(t)),b=document.getElementById("tixelUmap".concat(t));if(it.value?(null===m||void 0===m||m.setAttribute("fill","".concat(u[e[ut]])),null===b||void 0===b||b.setAttribute("fill","".concat(u[e[ut]]))):(null===m||void 0===m||m.setAttribute("fill","".concat(n[f])),null===b||void 0===b||b.setAttribute("fill","".concat(n[f]))),h.value.forEach((function(e,a){o+=parseFloat(ye.value[a][t]),g.genes[e]=parseFloat(ye.value[a][t])})),ce.value){g.total=o,i.push(mt(o));var _=o/h.value.length;_>M.value&&(M.value=_),_<F.value&&(F.value=_)}a.push(g)})),I.value?t.emit("spatialCircleData",[d,v]):t.emit("spatialCircleData",a)):(_.value.spatial.forEach((function(e,t){o=0;var n=parseFloat(e[1]),r=parseFloat(e[2]),u={cluster:e[0],ogx:n,ogy:r,total:0,genes:{}};h.value.forEach((function(e,a){o+=parseFloat(ye.value[a][t]),u.genes[e]=parseFloat(ye.value[a][t])})),u.total=o,i.push(mt(o));var l=o/h.value.length;l>M.value&&(M.value=l),l<F.value&&(F.value=l),a.push(u)})),p=ul(r,i,h.value.length),t.emit("spatialCircleData",a),a.forEach((function(e,t){var n=ht(a[t].total),r=n?p[t]:B.value;at.value.push(r);var i=document.getElementById("tixel".concat(t)),u=document.getElementById("tixelUmap".concat(t));null===i||void 0===i||i.setAttribute("fill","".concat(r)),null===u||void 0===u||u.setAttribute("fill","".concat(r))})),L.value=gt(0!==Re.value.length?parseFloat(Re.value[0]):M.value,0!==Re.value.length?parseFloat(Re.value[1]):F.value),t.emit("maxMinCount",[M.value.toString(),F.value.toString()])),ce.value&&(t.emit("singleCircleData",{coords:a,intense:r}),t.emit("sendColorBar",{color:G.value,maxMin:[fe.value,ge.value,me.value,he.value],tixelColor:r}),t.emit("maxMinCount",[M.value.toString(),F.value.toString()])),re.value=!1;case 19:case"end":return e.stop()}}),e)}))),kt.apply(this,arguments)}var Ot=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.value.getTaskStatus(t);case 4:c.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function jt(){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(k["a"])(regeneratorRuntime.mark((function a(){var n,i,s,o,c,d,v,p,f,g,h,b,w,x,y,k,O,j,R,C;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==_.value){a.next=51;break}if(_.value={},e.query.public){a.next=10;break}return n="data/".concat(u.value,"/h5/data.csv.gz"),a.next=6,r.value.getSpatialData(n);case 6:i=a.sent,_.value.spatial=i,a.next=28;break;case 10:return a.next=12,r.value.getSpatialDataByToken(l.value,0);case 12:return s=a.sent,_.value.spatial=s,a.next=16,r.value.getGeneMotifNamesByToken(l.value,1);case 16:if(o=a.sent,_.value.gene=o,et.value){a.next=23;break}return a.next=21,r.value.getGeneMotifNamesByToken(l.value,2);case 21:c=a.sent,_.value.motif=c;case 23:if(!tt.value){a.next=28;break}return a.next=26,r.value.getGeneMotifNamesByToken(l.value,3);case 26:d=a.sent,_.value.eRegulon=d;case 28:v=[],p=[],f=[],g=[],h={},b={},8===_.value.spatial[0].length?ut=7:9===_.value.spatial[0].length?nt.value=!0:10===_.value.spatial[0].length&&(nt.value=!0,ut=9),_.value.spatial.forEach((function(e,t){e[0].includes("C")&&(v.push(parseFloat(e[1])),p.push(parseFloat(e[2])),f.push(parseFloat(e[3])),g.push(parseFloat(e[4])),Object.keys(h).includes(e[0])?h[e[0]]+=1:h[e[0]]=1,0!==ut&&(Object.keys(b).includes(e[ut])?b[e[ut]]+=1:b[e[ut]]=1))})),w=Object.keys(h),x=Object.keys(b),w.sort((function(e,t){if(null===e.match(/C\d+/)||null===t.match(/C\d+/))return 0;var a=e.match(/C\d+/)[0],n=t.match(/C\d+/)[0],r=parseFloat(a.split("C")[1]),i=parseFloat(n.split("C")[1]);return r<i?-1:r>i?1:0})),x.sort(),w.forEach((function(e,t){ie.value[e]=h[e]})),x.forEach((function(e,t){ue.value[e]=b[e]})),fe.value=Math.min.apply(Math,v),ge.value=Math.min.apply(Math,p),me.value=Math.max.apply(Math,v),he.value=Math.max.apply(Math,p),be.value=Math.min.apply(Math,f),_e.value=Math.min.apply(Math,g),we.value=Math.max.apply(Math,f),xe.value=Math.max.apply(Math,g),wt();case 51:if(e.query.public||null!==_.value.gene&&void 0!==_.value.gene){a.next=70;break}return y="data/".concat(u.value,"/h5/geneNames.txt.gz"),a.next=55,r.value.getGeneMotifNames(y);case 55:if(k=a.sent,_.value.gene=k,et.value){a.next=63;break}return O="data/".concat(u.value,"/h5/motifNames.txt.gz"),a.next=61,r.value.getGeneMotifNames(O);case 61:j=a.sent,_.value.motif=j;case 63:if(!tt.value){a.next=70;break}return R="data/".concat(u.value,"/h5/eRegulonNames.txt.gz"),a.next=67,r.value.getGeneMotifNames(R);case 67:C=a.sent,C.sort(),_.value.eRegulon=C;case 70:m.value=!1,"gene"===Oe.value?(t.emit("totalClust",ie.value),it.value=!1,t.emit("totalGM",_.value.gene)):"motif"===Oe.value?(t.emit("totalClust",ie.value),it.value=!1,t.emit("totalGM",_.value.motif)):"eRegulon"===Oe.value&&(t.emit("totalClust",ue.value),t.emit("totalGM",_.value.eRegulon),0!==ut?(it.value=!0,yt()):it.value=!1);case 72:case"end":return a.stop()}}),a)}))),Rt.apply(this,arguments)}function Ct(){return St.apply(this,arguments)}function St(){return St=Object(k["a"])(regeneratorRuntime.mark((function a(){var n,i,u,s,o,v,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.value){a.next=2;break}return a.abrupt("return");case 2:if(a.prev=2,!(te.value.length>0)){a.next=44;break}if(m.value=!0,$.value=null,re.value=!0,n=p.value,i=f.value,u=[l.value,te.value,oe.value],s={},o=0,e.query.public&&("gene"===Oe.value&&(o=4),"motif"===Oe.value&&(o=5),"eRegulon"===Oe.value&&(o=6)),!e.query.public){a.next=19;break}return a.next=16,r.value.postPublicTask(n,u,s,i,o);case 16:a.t0=a.sent,a.next=22;break;case 19:return a.next=21,r.value.postTask(n,u,s,i);case 21:a.t0=a.sent;case 22:return v=a.t0,a.next=25,Ot(v._id);case 25:if("SUCCESS"===c.value.status||"FAILURE"===c.value.status){a.next=34;break}return"PROGRESS"===c.value.status&&($.value="".concat(c.value.progress,"% - ").concat(c.value.position)),a.next=29,new Promise((function(e){d.value=window.setTimeout(e,1e3)}));case 29:return d.value=null,a.next=32,Ot(v._id);case 32:a.next=25;break;case 34:if("SUCCESS"===c.value.status){a.next=38;break}return ke.dispatch({text:"Worker failed in AtxAtacViewer",options:{right:!0,color:"error"}}),m.value=!1,a.abrupt("return");case 38:$.value=c.value.status,g=c.value.result,t.emit("highlightedId",{ids:te.value,genes:g.top_selected}),m.value=!1,a.next=46;break;case 44:return a.next=46,lt();case 46:a.next=53;break;case 48:a.prev=48,a.t1=a["catch"](2),console.log(a.t1),m.value=!1,ke.dispatch({text:a.t1,options:{right:!0,color:"error"}});case 53:re.value=!1;case 54:case"end":return a.stop()}}),a,null,[[2,48]])}))),St.apply(this,arguments)}function It(){return At.apply(this,arguments)}function At(){return At=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="","gene"===Oe.value?(a="data/".concat(u.value,"/h5/summations/geneSummation"),n=_.value.gene):"motif"===Oe.value?(a="data/".concat(u.value,"/h5/summations/motifSummation"),n=_.value.motif):"eRegulon"===Oe.value&&(a="data/".concat(u.value,"/h5/summations/eRegulonSummation"),n=_.value.eRegulon),i=h.value.map((function(e){return n.indexOf(e)})),e.next=5,null===(t=r.value)||void 0===t?void 0:t.getSummation(a,i);case 5:l=e.sent,s=[],l.forEach((function(e,t){s.push(e.split(","))})),ye.value=s;case 9:case"end":return e.stop()}}),e)}))),At.apply(this,arguments)}function Ft(){Ge="",$e="",ze.setAttribute("d",""),Ve.setAttribute("d",""),We.setAttribute("x","0"),We.setAttribute("y","0"),We.setAttribute("width","0"),We.setAttribute("height","0"),He.setAttribute("x","0"),He.setAttribute("y","0"),He.setAttribute("width","0"),He.setAttribute("height","0"),K.value=[],Q.value=[],Y.value=[],X.value=[],dt()}var Mt=function(e){Le.push(e);while(Le.length>Ne)Le.shift()},Dt=function(e){var t=Le.length;if(t%2===1||t>=Ne){var a,n,r=0,i=0,u=0;for(n=e;n<t;n+=1)u+=1,a=Le[n],r+=a.x,i+=a.y;return{x:r/u,y:i/u}}return{x:"no"}},Pt=function(){var e=Dt(0);if("no"!==e.x){H.value&&(Ge+=" L".concat(e.x," ").concat(e.y)),J.value&&($e+=" L".concat(e.x," ").concat(e.y));for(var t="",a=2;a<Le.length;a+=2)e=Dt(a),t+=" L".concat(e.x," ").concat(e.y);H.value&&ze.setAttribute("d",Ge+t),J.value&&Ve.setAttribute("d",$e+t)}};function Tt(e,t,a){var n=document.getElementById("toolTipSpatial");while(null!==n&&void 0!==n&&n.firstChild)null===n||void 0===n||n.firstChild.remove();if(nt.value){var r=[e,t,a],i=[it.value?"CellType":"Cluster","Run_ID","Condition"];r.forEach((function(e,t){var a=document.createElement("p");a.innerText="".concat(i[t],": ").concat(r[t]),a.setAttribute("style","margin: 0; padding: 0"),null===n||void 0===n||n.appendChild(a)}))}else{var u=document.createElement("p");u.innerText=it.value?"CellType: ".concat(e):"Cluster: ".concat(e),u.setAttribute("style","margin: 0; padding: 0"),null===n||void 0===n||n.appendChild(u)}Xe.value="visible"}function Et(e){Ye.value=it.value?"CellType: ".concat(e):"Cluster: ".concat(e),Qe.value="visible"}function Ut(){Xe.value="hidden"}function Bt(){Qe.value="hidden"}function qt(e){H.value=!0,Xe.value="hidden";var t=Me.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var n=Me.value.getScreenCTM(),r=t.matrixTransform(n.inverse());if(V.value)Z.value="left",Ft(),ze.setAttribute("fill","none"),ze.setAttribute("stroke","#6ffc03"),ze.setAttribute("stroke-width","1"),ze.getAttribute("id")||ze.setAttribute("id","spa"),Mt({x:r.x,y:r.y}),Ge+="M".concat(r.x," ").concat(r.y),ze.setAttribute("d",Ge),Me.value.appendChild(ze);else if(W.value)Z.value="left",Ft(),We.setAttribute("x","".concat(r.x)),We.setAttribute("y","".concat(r.y)),We.setAttribute("fill","none"),We.setAttribute("stroke","#6ffc03"),We.setAttribute("width","0"),We.setAttribute("height","0"),Me.value.appendChild(We),a=[r.x,r.y];else{Se.value=[r.x,r.y];var i=Ae.value.getAttribute("x"),u=Ae.value.getAttribute("y");Pe.value=[parseFloat(i),parseFloat(u)]}}function Nt(e){J.value=!0,Qe.value="hidden";var t=De.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=De.value.getScreenCTM(),r=t.matrixTransform(a.inverse());if(V.value)Z.value="right",Ft(),Ve.setAttribute("fill","none"),Ve.setAttribute("stroke","#6ffc03"),Ve.setAttribute("stroke-width","1"),Ve.getAttribute("id")||Ve.setAttribute("id","uma"),Mt({x:r.x,y:r.y}),$e+="M".concat(r.x," ").concat(r.y),Ve.setAttribute("d",$e),De.value.appendChild(Ve),Q.value=[];else if(W.value)Z.value="right",Ft(),He.setAttribute("x","".concat(r.x)),He.setAttribute("y","".concat(r.y)),He.setAttribute("fill","none"),He.setAttribute("stroke","#6ffc03"),He.setAttribute("width","0"),He.setAttribute("height","0"),De.value.appendChild(He),n=[r.x,r.y];else{Ie.value=[r.x,r.y];var i=Fe.value.getAttribute("x"),u=Fe.value.getAttribute("y");Te.value=[parseFloat(i),parseFloat(u)]}}function Lt(e){if(H.value){var t=Me.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var n=Me.value.getScreenCTM(),r=t.matrixTransform(n.inverse());if(V.value)Mt({x:r.x,y:r.y}),Pt(),X.value.push(r.x),X.value.push(r.y);else if(W.value){var i=Math.abs(r.x-a[0]),u=Math.abs(r.y-a[1]);r.x<a[0]&&We.setAttribute("x","".concat(r.x)),r.y<a[1]&&We.setAttribute("y","".concat(r.y)),We.setAttribute("width","".concat(i)),We.setAttribute("height","".concat(u))}else{var l=Math.abs(Se.value[0]-r.x),s=Math.abs(Se.value[1]-r.y),o=Se.value[0]<r.x?1:-1,c=Se.value[1]<r.y?1:-1;Ae.value.setAttribute("x","".concat(Pe.value[0]+l*o)),Ae.value.setAttribute("y","".concat(Pe.value[1]+s*c))}}else if("circle"===e.target.nodeName){var d=it.value?7:5,v=it.value?1:0;nt.value?Tt(e.target.attributes[d].value,e.target.attributes[7+v].value,e.target.attributes[8+v].value):Tt(e.target.attributes[d].value,"","");var p=["".concat(e.offsetX+10,"px"),"".concat(e.offsetY-13,"px")];Ke.value=p}else"spatialGroup"!==e.target.id&&"circle"!==e.target.nodeName&&(Xe.value="hidden")}function Gt(e){if(J.value){var t=De.value.createSVGPoint();t.x=e.clientX,t.y=e.clientY;var a=De.value.getScreenCTM(),r=t.matrixTransform(a.inverse());if(V.value)Mt({x:r.x,y:r.y}),Pt(),Q.value.push(r.x),Q.value.push(r.y);else if(W.value){var i=Math.abs(r.x-n[0]),u=Math.abs(r.y-n[1]);r.x<n[0]&&He.setAttribute("x","".concat(r.x)),r.y<n[1]&&He.setAttribute("y","".concat(r.y)),He.setAttribute("width","".concat(i)),He.setAttribute("height","".concat(u))}else{var l=Math.abs(Ie.value[0]-r.x),s=Math.abs(Ie.value[1]-r.y),o=Ie.value[0]<r.x?1:-1,c=Ie.value[1]<r.y?1:-1;Fe.value.setAttribute("x","".concat(Te.value[0]+l*o)),Fe.value.setAttribute("y","".concat(Te.value[1]+s*c))}}else if("circle"===e.target.nodeName){Et(e.target.attributes[it.value?7:5].value);var d=["".concat(e.offsetX+10,"px"),"".concat(e.offsetY-13,"px")];Ze.value=d}else"umapGroup"!==e.target.id&&"circle"!==e.target.nodeName&&(Qe.value="hidden")}function $t(e){if(H.value=!1,V.value){var t={key:"lasso",points:X.value};Y.value.push(t),X.value=[],pt(),ne.value>0&&Ct()}if(W.value){var a={key:"rect",points:[parseFloat(We.getAttribute("x")),parseFloat(We.getAttribute("y")),parseFloat(We.getAttribute("width")),parseFloat(We.getAttribute("height"))]};Y.value.push(a),pt(),ne.value>0&&Ct()}}function zt(e){if(J.value=!1,V.value){var t={key:"lasso",points:Q.value};K.value.push(t),Q.value=[],pt(),ne.value>0&&Ct()}if(W.value){var a={key:"rect",points:[parseFloat(He.getAttribute("x")),parseFloat(He.getAttribute("y")),parseFloat(He.getAttribute("width")),parseFloat(He.getAttribute("height"))]};K.value.push(a),pt(),ne.value>0&&Ct()}}function Vt(e){i.value=e}function Wt(e){var t=[];t="plus"===e?[Ee.value[0]-20,Ee.value[1]-20]:[Ee.value[0]+20,Ee.value[0]+20],Ee.value=t}function Ht(e){var t=[];t="plus"===e?[Ue.value[0]-20,Ue.value[1]-20]:[Ue.value[0]+20,Ue.value[0]+20],Ue.value=t}function Jt(e){var t=[O.value.width,O.value.height];Ee.value=t}function Xt(e){var t=[j.value.width,j.value.height];Ue.value=t}function Qt(){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,lt();case 2:bt();case 3:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}return Object(v["h"])(ce,(function(e){h.value.length>0&&yt()})),Object(v["h"])(V,(function(e){Ft(),V.value||dt()})),Object(v["h"])(W,(function(e){Ft(),W.value||dt()})),Object(v["h"])(le,(function(e){if(!V.value&&!W.value)if(Ce.value===e[0])Ce.value="",dt();else{var t=Object(Lr["a"])(e,1);Ce.value=t[0],ft(e)}})),Object(v["h"])(se,(function(e){V.value||W.value||ft(e)})),Object(v["h"])(N,(function(e){ee.value="picnic"===e?"black":"bone"===e?"brown":"hot"===e?"grey":"white",yt()})),Object(v["h"])(s,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l.value=a,e.query.public&&(_.value=null,m.value=!0,jt());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(v["h"])(u,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null===a||e.query.public||(_.value=null,m.value=!0,jt());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(v["h"])(Oe,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==_.value&&(m.value=!0,(V.value||W.value)&&Ct(),jt(),h.value.length>0&&(h.value=[]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(h,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Re.value=[],!t||0!==h.value.length){e.next=9;break}at.value=[],I.value=!0,L.value=[],ye.value=[],yt(),e.next=17;break;case 9:return at.value=[],m.value=!0,I.value=!1,e.next=14,It();case 14:Ft(),yt(),m.value=!1;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(b,(function(e){var t=e;"undefined"===typeof e&&(t=[]),"string"===typeof e&&(t=[t]),h.value=t})),Object(v["h"])(je,(function(e){""===e[0]&&""===e[1]?Re.value=[]:Re.value=e,yt()})),Object(v["h"])(m,(function(e){})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,nl;case 2:case"end":return e.stop()}}),e)})))),{get_uuid:rt,scale:R,scaleUMAP:C,filenameGene:l,filenameFromParent:s,headers:rl,selected:g,loading:m,selectedFiles:i,onFilesChanged:Vt,clusterHeaders:il,selectedGenes:h,remove:ct,konvaConfigLeft:O,konvaConfigRight:j,circlesSpatial:P,circlesSpatialUMAP:T,isHighlighted:A,onResize:Qt,isClusterView:I,clusterItems:w,clusterColors:E,inactiveColor:B,backgroundColor:q,updateCircles:yt,heatMap:N,stepArray:L,colorBarmap:G,highestCount:M,lowestCount:F,geneNames:z,isDrawing:V,isDrawingRect:W,mouseDownOnStageLeft:qt,mouseDownOnStageRight:Nt,mouseMoveOnStageLeft:Lt,mouseMoveOnStageRight:Gt,mouseUpOnStageLeft:$t,mouseUpOnStageRight:zt,polygon:X,polygonUMAP:Q,regions:Y,regionsUMAP:K,removeRegions:Ft,reScale:Wt,reScaleUMAP:Ht,resetScaleAndPos:Jt,resetScaleAndPosUMAP:Xt,runId:u,colorbarText:ee,highlightIds:te,lassoSide:Z,highlightCount:ne,spatialData:_,spatialRun:re,colorFromParent:o,clickedClusterFromParent:le,totalInClust:ie,totalInCellType:ue,averageInd:ce,retrieveData:jt,geneObject:de,motifObject:ve,tixelObject:pe,minX:fe,minY:ge,maxX:me,maxY:he,minX_UMAP:be,minY_UMAP:_e,maxX_UMAP:we,maxY_UMAP:xe,geneMotif:Oe,tableKeyFromParent:oe,geneSummation:ye,maxMinBoundary:Re,maxMinBoundaryFromParents:je,checkBoundary:mt,checkBoundaryColor:ht,currentClickedCluster:Ce,assayFlag:et,regulons_flag:tt,originalClickedPoint:Se,originalClickedPointU:Ie,globalSpatialGroup:Ae,globalUmapGroup:Fe,globalSvgS:Me,globalSvgU:De,initializePlots:wt,translatePoint:Pe,translatePointU:Te,svg_spatial_wh:Ee,svg_umap_wh:Ue,initialized:Je,visibility:Xe,visibilityUmap:Qe,showToolTipSpatial:Tt,showToolTipUmap:Et,toolTipTextUmap:Ye,TTposition:Ke,TTpositionUmap:Ze,hideToolTipS:Ut,hideToolTipU:Bt,current_tixel_colors:at,multi_sample_flag:nt,clusters_ann_flag:it,spatial_wh:Be,umap_wh:qe}}}),sl=ll,ol=(a("3b6e"),Object(te["a"])(sl,tl,al,!1,null,"7d123393",null)),cl=ol.exports,dl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("canvas",{ref:"logo",attrs:{id:"logo"}})])},vl=[];function pl(e){for(var t=e,a=[],n=0;n<t.length;n+=1)a.push([t[n],n]);a.sort((function(e,t){return e[0]<t[0]?-1:1}));var r=[];t=[];for(var i=0;i<a.length;i+=1)t.push(a[i][0]),r.push(a[i][1]);return r}var fl=Object(v["c"])({name:"BarChart",props:["seqlogo","width","motif"],setup:function(e,t){var a=Object(v["a"])((function(){return e.seqlogo})),n=Object(v["a"])((function(){return e.width})),r=Object(v["a"])((function(){return e.motif}));function i(){return u.apply(this,arguments)}function u(){return u=Object(k["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.refs.logo.getContext("2d"),a.clearRect(0,0,n.value,300);case 2:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(a){var r,u,l,s,o,c,d,v,p,f,g,m,h,b,_,w,x,y,k,O,j,R;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:for(r={textcolor:"black",bgcolor:"white",border:35,padding:6,labelfont:"14px Arial,sans-serif",letterfont:"30px Lucida Console,monospace",fontpixelheight:24,ymaxs:0},u=t.refs.logo.getContext("2d"),u.save(),l=n.value,s=300,t.refs.logo.width=l,t.refs.logo.height=s,u.fillStyle=r.bgcolor,u.fillRect(0,0,l,s),o=["A","#0d9647"],c=["C","#255c9a"],d=["G","#f7b32b"],v=["T","#d6273a"],p=0;p<=a.length;p+=1)if(a[p])for(f=0;f<=a[p].length;f+=1)a[p][f]&&(a[p][f].includes("A")&&o.push(a[p][f][1]),a[p][f].includes("C")&&c.push(a[p][f][1]),a[p][f].includes("G")&&d.push(a[p][f][1]),a[p][f].includes("T")&&v.push(a[p][f][1]));for(g=[o,c,d,v],m=["A","C","G","T"],h=g[0].length-2,b=r.ymaxs,S.a.each(g,(function(e,t){var a=S.a.sum(e);a>b&&(b=Math.floor(a))})),_=0;_<h;_+=1){for(w=0,x=0;x<m.length;x+=1)w+=parseFloat(g[x][_+2]);w>b&&(b=w)}for(y=r.border,k=(l-r.border)/h,O=s-r.border,u.font=r.letterfont,j=function(e){for(var t=O,a=m.map((function(t){var a;return g.forEach((function(n,r){n.includes(t)&&(a=n[e+2])})),a})),n=pl(a).map((function(e){return e})),i=function(a){var i=m[n[a]],l=0,s=0;if(g.forEach((function(t,a){t.includes(i)&&(l=t[e+2],s=a)})),l>0){u.save(),u.fillStyle=g[s][1],u.translate(y,t);var o=O*l/(r.fontpixelheight*b),c=u.measureText(i),d=c.width,v=k/d;u.scale(v,o),u.fillText(i,0,0),u.restore(),t-=l*O/b}},l=0;l<m.length;l+=1)i(l);u.save(),u.fillStyle=r.textcolor,u.textAlign="center",u.textBaseline="top",u.font=r.labelfont,u.fillText((e+1).toString(),y+k/2,s-r.border+r.padding),u.restore(),y+=k},R=0;R<h;R+=1)j(R);u.fillStyle=r.textcolor,u.font=r.labelfont,u.textAlign="right",u.textBaseline="top",u.fillText("2 -",r.border-r.padding,64),u.textBaseline="top",u.fillText("1.5 -",r.border-r.padding,113),u.textBaseline="center",u.fillText("1 -",r.border-r.padding,s/2+11),u.textBaseline="bottom",u.fillText(".5 -",r.border-r.padding,s-74),u.textBaseline="bottom",u.fillText("0 -",r.border-r.padding,s-27),u.restore();case 42:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}return Object(v["h"])(a,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,l(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(n,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=3;break}return e.next=3,l(a.value);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(r,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return e.next=3,i();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)})))),{checker:l,dataFromParent:a,widthFromParent:n,motifFromParent:r}}}),gl=fl,ml=Object(te["a"])(gl,dl,vl,!1,null,null,null),hl=ml.exports,bl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"ma-0 pa-0",attrs:{fluid:""}},[e.allRuns.length>0?a("table",{staticStyle:{width:"100%","border-spacing":"35px"}},[a("tr",{staticStyle:{"border-bottom":"1px solid rgb(92, 112, 128)",color:"rgb(92, 112, 128)","font-weight":"500"}},[a("th",[e._v(" NGS ID ")]),a("th",[e._v("Run ID")]),a("th",[e._v(" Sample ID ")]),a("th",[e._v("Tissue")]),a("th",[e._v("Organism")]),a("th",[e._v("Experimental Condition")]),a("th",[e._v("Date")]),a("th",[e._v("Browser Link")])]),e._l(e.allRuns,(function(t){return a("tr",{key:t.inx,staticStyle:{"border-bottom":"1px solid rgb(92, 112, 128)"}},[a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.ngs_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.run_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.sample_id)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.tissue_type)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.species)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.experimental_condition)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("div",[e._v(" "+e._s(t.created_on)+" ")])]),a("td",{staticStyle:{"text-align":"center"}},[a("v-btn",{attrs:{outlined:""},on:{click:function(a){return e.toAtlasXplore(t)}}},[e._v(" AtlasXplore ")])],1)])}))],2):e._e(),a("div",{staticStyle:{padding:"10px","text-align":"right"}},[e._v("("),a("a",{attrs:{href:"https://docs.atlasxomics.com/projects/AtlasXplore",target:"_blank"}},[e._v("Browser Documentation")]),e._v(")")])])},_l=[],wl=Object(v["c"])({name:"LoadingPage",props:{relevantRuns:{type:Array,required:!0},collabName:{type:String,required:!0}},setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return e.relevantRuns})),r=Object(v["a"])((function(){return e.collabName})),i=(Object(v["g"])([]),Object(v["g"])(!0));function u(e){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.open("".concat(t),"_blank");case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(e){this.$emit("run-selected",e.ngs_id)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),{allRuns:n,name:r,loading:i,nextPage:u,toAtlasXplore:s,router:a}}}),xl=wl,yl=Object(te["a"])(xl,bl,_l,!1,null,"3f0dcc82",null),kl=yl.exports,Ol=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[e.idName.length>0?[a("v-row",[e._l(e.data,(function(e){return[a("v-col",{key:e.id,attrs:{cols:"12",sm:"4"}},[a("Plotly",{attrs:{data:e.data,layout:e.layout,"display-mode-bar":!0}})],1)]}))],2)]:[a("v-row",[e._l(e.data,(function(e){return[a("v-col",{key:e.id,attrs:{vols:"12",sm:"6"}},[a("Plotly",{attrs:{data:e.data,layout:e.layout,"display-mode-bar":!0}})],1)]}))],2)]],2)],1)},jl=[],Rl=a("04d1"),Cl=Object(v["c"])({name:"HistogramGraph",components:{Plotly:Rl["Plotly"]},props:["colorCode","chartData","idName","assay"],setup:function(e,t){var a=Object(v["a"])((function(){return e.colorCode})),n=Object(v["a"])((function(){return e.chartData})),r=Object(v["a"])((function(){return e.idName})),i=Object(v["a"])((function(){return e.assay})),u=Object(v["g"])({}),l=Object(v["g"])(),s=Object(v["g"])();function o(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,l,s,o,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n={},u.value={},r.value.length>0){for(l=function(e){var i={},u=[];t.forEach((function(t,a){Object.keys(i).includes(t.cluster)||(i[t.cluster]=[]),i[t.cluster].push(t.genes[r.value[e]])})),S.a.each(i,(function(e,t){var n={x:e,type:"histogram",opacity:.5,marker:{color:a.value[t]},name:t};u.push(n)})),u.sort((function(e,t){var a=parseFloat(e.name.split("C")[1]),n=parseFloat(t.name.split("C")[1]);return a<n?-1:a>n?1:0})),n[r.value[e]]={id:r.value[e],data:u,layout:{barmode:"overlay",title:r.value[e],traceorder:"normal"}}},s=0;s<r.value.length;s+=1)l(s);u.value=n}else{for(o=0;o<t.length;o+=1)c={x:Object.values(t[o]),marker:{color:"lightblue"},histnorm:"count",type:"histogram"},d=[i.value?"Gene Count":"TSS Enrichment",i.value?"UMI Count":"Log10 Unique Fragments"],n[o]={id:o,data:[c],layout:{title:d[o],traceorder:"normal",xaxis:{title:"Count"},yaxis:{title:"Amount of Tixels"}}};u.value=n}case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(v["h"])(n,(function(e){o(e)})),{data:u,layout:l,created:s,assayFromParent:i,constructChart:o}}}),Sl=Cl,Il=Object(te["a"])(Sl,Ol,jl,!1,null,"3a0c7fd6",null),Al=Il.exports,Fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],attrs:{cols:"12",sm:"12"}},[a("v-row",{staticStyle:{height:"34vh"},attrs:{id:"viewContainer"}})],1)],1)},Ml=[],Dl=a("362d"),Pl=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}));function Tl(e,t,a){var n=Math.min.apply(Math,Object(Xu["a"])(t))+12*a,r=Math.max.apply(Math,Object(Xu["a"])(t))+12*a,i=e.length,u=[];return S.a.each(t,(function(t){var l=t+12*a,s=(l-n)/(r-n)*(i-1),o=Math.trunc(s);u.push(e[o])})),u}var El=Object(v["c"])({name:"Singleview",props:["query","gene","heatmap","background","circleData","colorBar","loadingProp","userBoundary"],setup:function(e,t){Object(v["a"])((function(){return U.state.client}));var a=Object(v["a"])((function(){return e.loadingProp})),n=Object(v["a"])((function(){return e.gene})),r=Object(v["g"])(null),i=window.innerWidth,u=window.innerHeight,l=Object(v["g"])({x:0,y:0,width:i,height:u,draggable:!0,ogx:0}),s=Object(v["g"])([i,u]),o=Object(v["g"])(.8),c=Object(v["g"])(!0),d=Object(v["g"])(1e4),p=Object(v["g"])(0),f=(new Dl["default"].Label({visible:!1}),new Dl["default"].Tag({fill:"white",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round",shadowColor:"black",shadowBlur:10,shadowOffsetX:10,shadowOffsetY:10,shadowOpacity:.5}),new Dl["default"].Text({text:"",fontFamily:"Calibri",fontSize:15,padding:5,fill:"black"}),Object(v["a"])((function(){return e.circleData}))),g=Object(v["g"])([]),m=Object(v["a"])((function(){return e.heatmap?e.heatmap:"jet"})),h=Object(v["g"])(""),b=Object(v["a"])((function(){return e.colorBar})),_=Object(v["a"])((function(){return e.background})),w=Object(v["g"])("white"),x=Object(v["g"])([]),y=Object(v["g"])([]),O=Object(v["g"])(),j=Object(v["g"])(),R=Object(v["a"])((function(){return e.userBoundary})),C=Object(v["g"])([]),S=Object(v["g"])(),I=Object(v["g"])(!1);function A(){return F.apply(this,arguments)}function F(){return F=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.querySelector("#viewContainer"),t){e.next=3;break}return e.abrupt("return");case 3:a=t.offsetWidth,n=t.offsetHeight,l.value.width=Math.floor(a/3)-1,l.value.height=n,l.value.ogx=a,s.value=[l.value.width,l.value.height];case 9:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function M(e,t){if(0===p.value)return[];for(var a=[],n=5,r=(e-t)/(n-1),i=0;i<n;i+=1)a.push(parseFloat((t+r*i).toFixed(2)));return a}function D(e){return 0===C.value.length?e:e>parseFloat(C.value[0])?parseFloat(C.value[0]):e<parseFloat(C.value[0])&&e>parseFloat(C.value[1])?e:e<parseFloat(C.value[1])?parseFloat(C.value[1]):e}function P(e){return 0===C.value.length||!(e>parseFloat(C.value[0]))&&(e<parseFloat(C.value[0])&&e>parseFloat(C.value[1])||!(e<parseFloat(C.value[1]))&&e)}function T(){return E.apply(this,arguments)}function E(){return E=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,s,c,d,v,p,f,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(I.value){e.next=2;break}return e.abrupt("return");case 2:t=y.value[0],a=y.value[1],r=y.value[2],i=y.value[3],u=l.value,s=u.width,c=u.height,d=Math.min(s/(r-t),c/(i-a)),v=j.value.length<4e3?22:44,p=Math.min(s,c)/(5*v)*o.value,f=o.value*d*t-p,g=o.value*d*a-p,n.value.forEach((function(e){var t=document.getElementById("svg".concat(e));null===t||void 0===t||t.setAttribute("width","".concat(s,"px")),j.value.forEach((function(t,a){var n=document.getElementById("tixel".concat(a).concat(e));n.setAttribute("cx","".concat(t.ogx*o.value*d-f)),n.setAttribute("cy","".concat(t.ogy*o.value*d-g)),n.setAttribute("r","".concat(p))}))}));case 13:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function B(e){return new Promise((function(t){return setTimeout(t,e)}))}function q(){return N.apply(this,arguments)}function N(){return N=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,s,c,v,f,g,m,b,_,x,R,S,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==j.value){e.next=2;break}return e.abrupt("return");case 2:[],t=[],a=y.value[0],r=y.value[1],i=y.value[2],u=y.value[3],s=l.value,c=s.width,v=s.height,f=Math.min(c/(i-a),v/(u-r)),g=j.value.length<4e3?22:44,m=Math.min(c,v)/(5*g)*o.value,b=o.value*f*a-m,_=o.value*f*r-m,x="http://www.w3.org/2000/svg",R=document.getElementById("viewContainer"),null===R||void 0===R||R.setAttribute("style","height: auto"),S=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(a,n){var r,i,u,l,s,v,g,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],i=document.createElement("div"),i.setAttribute("id","plotWrapper".concat(a)),u=document.createElementNS("http://www.w3.org/2000/svg","svg"),u.setAttribute("width","".concat(c,"px")),u.setAttribute("height","34vh"),u.setAttribute("id","svg".concat(a)),l=document.createElementNS("http://www.w3.org/2000/svg","svg"),l.setAttribute("id","svgGroup".concat(a)),l.setAttribute("y","30"),s=document.createElementNS("http://www.w3.org/2000/svg","text"),s.setAttribute("fill","white"),s.setAttribute("y","15"),v=document.createTextNode("".concat(a)),s.appendChild(v),g=document.createElement("div"),g.setAttribute("id","colorBar".concat(a)),g.setAttribute("style","background-image:".concat(h.value,"; display:flex; width: 85%")),t=[],j.value.forEach((function(e,n){t.push(D(e.genes[a]))})),p.value=-1e4,d.value=1e4,y=Tl(O.value,t,1),j.value.forEach((function(e,n){var r=P(e.genes[a]),i=r?y[n]:"grey";p.value=t[n]>p.value?t[n]:p.value,d.value=t[n]<d.value?t[n]:d.value;var u=document.createElementNS(x,"circle");u.setAttribute("cx","".concat(e.ogx*o.value*f-b)),u.setAttribute("cy","".concat(e.ogy*o.value*f-_)),u.setAttribute("r","".concat(m)),u.setAttribute("id","tixel".concat(n).concat(a)),u.setAttribute("fill","".concat(i)),l.appendChild(u)})),r=M(0!==C.value.length?parseFloat(C.value[0]):p.value,0!==C.value.length?parseFloat(C.value[1]):d.value),u.appendChild(s),u.appendChild(l),null===i||void 0===i||i.appendChild(u),r.forEach((function(e){var t=document.createElement("div");t.setAttribute("style","color:".concat(w.value,"; font-size:16px; font-weight:bold; width:20%; text-align:center")),t.innerHTML=e,g.appendChild(t)})),null===i||void 0===i||i.appendChild(g),null===R||void 0===R||R.appendChild(i),e.next=33,B(30);case 33:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=0;case 19:if(!(A<n.value.length)){e.next=25;break}return e.next=22,S(n.value[A],A);case 22:A+=1,e.next=19;break;case 25:I.value=!0;case 26:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(){return G.apply(this,arguments)}function G(){return G=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.getElementById("viewContainer");while(t.firstChild)t.firstChild.remove();case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function $(){return z.apply(this,arguments)}function z(){return z=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==j.value){e.next=2;break}return e.abrupt("return");case 2:t=[],a=[],n.value.forEach((function(e){var n=document.getElementById("colorBar".concat(e));while(null!==n&&void 0!==n&&n.firstChild)null===n||void 0===n||n.firstChild.remove();null===n||void 0===n||n.setAttribute("style","background-image:".concat(h.value,"; display:flex; width: 85%")),j.value.forEach((function(t,n){a.push(D(t.genes[e]))})),p.value=-1e4,d.value=1e4;var r=Tl(O.value,a,1);j.value.forEach((function(t,n){var i=P(t.genes[e]),u=i?r[n]:"grey";p.value=a[n]>p.value?a[n]:p.value,d.value=a[n]<d.value?a[n]:d.value;var l=document.getElementById("tixel".concat(n).concat(e));l.setAttribute("fill","".concat(u))})),t=M(0!==C.value.length?parseFloat(C.value[0]):p.value,0!==C.value.length?parseFloat(C.value[1]):d.value),t.forEach((function(e){var t=document.createElement("div");t.setAttribute("style","color:".concat(w.value,"; font-size:16px; font-weight:bold; width:20%; text-align:center")),t.innerHTML=e,null===n||void 0===n||n.appendChild(t)}))}));case 5:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function V(e){var t=[];t="plus"===e?[s.value[0]-20,s.value[1]-20]:[s.value[0]+20,s.value[0]+20],s.value=t}function W(e){var t=[l.value.width,l.value.height];s.value=t}function H(){return J.apply(this,arguments)}function J(){return J=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:T();case 3:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}return Object(v["h"])(m,(function(e){w.value="picnic"===e?"black":"bone"===e?"brown":"hot"===e?"grey":"white",$()})),Object(v["h"])([f,n,b,R],function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,i,u,l,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Lr["a"])(t,4),r=n[0],i=n[1],u=n[2],l=n[3],s=Object(Lr["a"])(a,4),o=s[0],s[1],s[2],s[3],void 0===r||void 0===i||void 0===u||r===o){e.next=11;break}return j.value=r.coords,O.value=r.intense,h.value=u.color,y.value=u.maxMin,""===l[0]&&""===l[1]?C.value=[]:C.value=l,e.next=10,L();case 10:q();case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),{deep:!0}),Object(v["h"])(R,(function(e){""===e[0]&&""===e[0]?C.value=[]:C.value=e,$()})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pl;case 2:A();case 3:case"end":return e.stop()}}),e)})))),{get_uuid:rt,scale:o,loading:a,konvaConfigLeft:l,onResize:H,isClusterView:c,clusterColors:g,updateCircles:$,heatMap:m,colorBarmap:h,highestCount:p,lowestCount:d,reScale:V,resetScaleAndPos:W,colorbarText:w,spatialData:r,selectedGenesFromParent:n,colorsValues:b,maxMin:y,circlesSpatialSingle:x,colors_intensity:O,coordinates:j,backgroundColor:_,maxMinBoundary:C,maxMinBoundaryFromParents:R,checkBoundary:D,checkBoundaryColor:P,globalSpatial:S,viewBoxSpatial:s,resizeCircles:T,initialized:I,initializePlots:q,removeOld:L}}}),Ul=El,Bl=(a("b7d7"),Object(te["a"])(Ul,Fl,Ml,!1,null,"1caf7563",null)),ql=Bl.exports,Nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.go?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"9"}},[e.elements?[a("VueCytoscape",{key:e.update_component,ref:"cyRef",attrs:{config:e.config,preConfig:e.preConfig,afterCreated:e.afterCreated}})]:e._e()],2),a("v-col",{staticClass:"pr-22",attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[e._v("Layout")]),a("v-select",{attrs:{items:["Forced-Algorithm","Concentric","Circle","Grid"]},on:{input:e.updateLayout},model:{value:e.default_layout,callback:function(t){e.default_layout=t},expression:"default_layout"}}),a("v-card-text",[e._v("Connection Strength")]),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-slider",{attrs:{disabled:0==e.regulons_from_parent.length,min:e.min_width,max:e.max_width,ticks:"always","tick-size":"7","thumb-label":"always"},on:{end:function(t){return e.sliceGraph(e.regulons_from_parent,e.slider,!1)}},scopedSlots:e._u([{key:"thumb-label",fn:function(t){var a=t.value;return[e._v(" "+e._s(e.slider_labels[a])+" ")]}}],null,!1,1627719166),model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}})],1)],1)],1):e._e()},Ll=[],Gl=a("3a6f"),$l=a("233c"),zl=a.n($l),Vl={style:[{selector:"node",style:{width:"mapData(size, 10, 30.0, 25, 50)",height:"mapData(size, 10, 30.0, 25, 50)","font-weight":"bold",content:"data(label)","text-valign":"center","text-wrap":"wrap","text-max-width":140,"background-color":"data(color)",color:"#000000ff"}},{selector:"edge",style:{"curve-style":"bezier",width:"mapData(width, 1, 1.5, 1, 10)","target-arrow-shape":"triangle","line-color":"data(color)","target-arrow-color":"data(color)","font-weight":"bold"}},{selector:"edge.label",style:{"line-color":"orange","target-arrow-color":"orange"}}]},Wl=Object(v["c"])({name:"NetworkGraph",components:{VueCytoscape:Gl["VueCytoscape"]},props:["selected_regulons","run_id","flag"],setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["a"])((function(){return e.selected_regulons})),r=Object(v["a"])((function(){return e.run_id})),i=Object(v["a"])((function(){return e.flag})),u=Object(v["g"])(),l=Object(v["g"])(),s=Object(v["g"])(),o=Object(v["g"])(),c=Object(v["g"])(0),d=Object(v["g"])([]),p=Object(v["g"])(0),f={Concentric:"concentric","Forced-Algorithm":"cola",Circle:"circle",Grid:"grid"},g=Object(v["g"])("Forced-Algorithm"),m=Object(v["g"])(4),h=Object(v["g"])(0),b=Object(v["g"])(4),_=Object(v["g"])(),w=Object(v["g"])([.15,.25,.5,.75,1]),x=Object(v["g"])(["15%","25%","50%","75%","100%"]);function y(e){"Forced-Algorithm"===g.value&&e.use(zl.a)}function O(e){e.add(u.value).layout({name:"".concat(f[g.value]),idealEdgeLength:230}).run(),e.on("mouseover","edge",(function(e){}))}function j(e){var t=[],a={},n={};e.forEach((function(e,r){Object.keys(e).includes("position")?a={data:{id:e.data.name,label:e.data.name,color:e.data.color_rgb,size:e.data.size}}:(a={data:{id:r,source:e.data.source,color:e.data.color_rgb,target:e.data.target,width:e.data.width}},n[r]=a),t.push(a)})),_.value=n,l.value=t,u.value=t,s.value=Vl,c.value+=1}function R(e,t,a){var n=[],r=[],i=[],s=!1,d=function(e,a){var n=[],r=[],i=Object.keys(o.value);return e.forEach((function(e,u){if(i.includes(e)){var s=o.value[e].index,c=Math.ceil((s.length-1)*w.value[t]);"TF"===o.value[e].group&&(s=s.slice(0,c));var d=s.map((function(e){return l.value[e].data.target}));n.push.apply(n,Object(Xu["a"])(s)),d.forEach((function(e){a.includes(e)||r.push(e)}))}})),[n,r]},v=d(e,i);i.push.apply(i,Object(Xu["a"])(e)),r.push.apply(r,Object(Xu["a"])(v[0])),e.forEach((function(e){var t=o.value[e].control.map((function(e){return e}));t.forEach((function(e){var a=o.value[_.value[e].data.source].index[0];t.push(a)}));var a=t.map((function(e){return l.value[e]}));n.push.apply(n,Object(Xu["a"])(a))}));while(!s)0===v[1].length&&(s=!0),v=d(v[1],i),v[1].forEach((function(e){i.includes(e)||i.push(e)})),v[0].forEach((function(e){r.includes(e)||r.push(e)}));r.forEach((function(e,t){var a=l.value[e];n.push(a)})),u.value=n,c.value+=1}function C(e){c.value+=1}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(v["h"])(r,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,u,l,s,c,v,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!==typeof t||!i.value){e.next=19;break}return u={path:"data/".concat(r.value,"/h5/networks"),bucket:"",filter:["json"]},e.next=4,null===(n=a.value)||void 0===n?void 0:n.getFileList(u);case 4:l=e.sent,l.sort(),s=[],c=0;case 8:if(!(c<l.length)){e.next=19;break}return p={params:{filename:"".concat(l[c])}},e.next=12,null===(v=a.value)||void 0===v?void 0:v.getJsonFile(p);case 12:f=e.sent,s.push(f),1===c&&(j(s[0]),o.value=f),c%2===1&&(d.value.push(s),s=[]);case 16:c+=1,e.next=8;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(n,(function(e){if(e.length>0)m.value=4,R(e,4,!0);else if(0===e.length&&l.value){var t=[];l.value.forEach((function(e,a){t.push(e)})),u.value=t,c.value+=1}})),{elements:u,config:s,regulons_from_parent:n,update_component:c,all_cell_types:d,current_selected:p,default_layout:g,go:i,slider:m,min_width:h,max_width:b,index_edges:_,truncate_value:w,slider_labels:x,preConfig:y,afterCreated:O,constructGraph:j,sliceGraph:R,updateLayout:C}}}),Hl=Wl,Jl=Object(te["a"])(Hl,Nl,Ll,!1,null,"7ecfa312",null),Xl=Jl.exports,Ql=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Yl=[{text:"ID",value:"id"}],Kl=[{text:"Cluster",value:"name"}],Zl=[{text:"",value:"background"}],es=[{background:"black"},{background:"white"},{background:"darkgrey"},{background:"custom"}],ts=[function(e){return!!e.match(/\d+/)||"Value must be digit"}],as=Object(v["c"])({name:"AtlasXplore",components:{"table-component":Wu,"search-component":qu,TrackBrowser:el,AtxAtacViewer:cl,BarChart:hl,LoadingPage:kl,HistogramGraph:Al,Singleview:ql,NetworkGraph:Xl},props:["query"],setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return U.state.client})),r=(Object(v["a"])((function(){return t.root.$route})),Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.workers}))),i=Object(v["a"])((function(){return U.state.xploreData})),u=Object(v["g"])(Ze(["admin"])?["Transparent","Opaque","FrontPage"]:["Transparent","Opaque"]),l=Object(v["g"])([]),s=Object(v["g"])(null),c=Object(v["g"])(null),d=Object(v["g"])(null),p=Object(v["g"])(null),f=Object(v["g"])(null),g=Object(v["g"])([]),m=Object(v["g"])(),h=Object(v["g"])([]),b=Object(v["g"])(!1),_=Object(v["g"])([]),w=Object(v["g"])([]),x=Object(v["g"])([]),y=Object(v["g"])(!1),O=Object(v["g"])([]),j=(window.innerWidth,window.innerHeight,Object(v["g"])(.75)),R=Object(v["g"])(.75),C=Object(v["g"])(!0),I=Object(v["g"])(!0),A=Object(v["g"])(!1),F=Object(v["g"])(0),M=Object(v["g"])(1e4),D=Object(v["g"])(""),P=Object(v["g"])(!1),T=Object(v["g"])({type:"",species:"",assay:"",organ:"",condition:"",date:"",runid:"",ngsid:""}),E=Object(v["g"])("black"),B=Object(v["g"])(),q=Object(v["g"])(null),N=Object(v["g"])(),L=Object(v["g"])(null),G=Object(v["g"])([]),$=Object(v["g"])([]),z=Object(v["g"])(!1),V=Object(v["g"])(!1),W=Object(v["g"])(0),H=Object(v["g"])(!1),J=Object(v["g"])([!1]),X=Object(v["g"])(null),Q=Object(v["g"])(!1),Y=Object(v["g"])(!1),K=Object(v["g"])(!1),Z=Object(v["g"])(!1),ee=Object(v["g"])(),te=Object(v["g"])("black"),ae=Object(v["g"])("black"),ne=Object(v["g"])("white"),re=Object(v["g"])([]),ie=Object(v["g"])([]),ue=Object(v["g"])(0),le=Object(v["g"])([""]),se=Object(v["g"])("gene"),oe=Object(v["g"])(!0),ce=Object(v["g"])(!1),de=Object(v["g"])(!1),ve=Object(v["g"])(!1),pe=Object(v["g"])(!1),fe=Object(v["g"])(!1),ge=Object(v["g"])("hidden"),me=Object(v["g"])(!1),he=Object(v["g"])({}),be=Object(v["g"])({}),_e=Object(v["g"])({}),we=Object(v["g"])({}),xe=Object(v["g"])(),ye=Object(v["g"])(),Oe=Object(v["g"])(),je=Object(v["g"])(""),Re=Object(v["g"])(""),Ce=Object(v["g"])(!1),Se=Object(v["g"])([]),Ie=Object(v["g"])([]),Ae=Object(v["g"])([]),Fe=Object(v["g"])(""),Me=Object(v["g"])({}),De=Object(v["g"])({}),Pe=Object(v["g"])([]),Te=Object(v["g"])({}),Ee=Object(v["g"])(),Ue=Object(v["g"])(),Be=Object(v["g"])(!1),qe=Object(v["g"])({}),Ne=Object(v["g"])(1),Le=Object(v["g"])(!1),Ge=Object(v["g"])(!1),$e=Object(v["g"])(!1),ze=Object(v["g"])(""),Ve=Object(v["g"])(""),We=Object(v["g"])(["",""]),He=Object(v["g"])(!1),Je=Object(v["g"])(!1),Xe=(Object(v["g"])(!1),Object(v["g"])(["#D51F26","#272E6A","#208A42","#89288F","#F47D2B","#FEE500","#8A9FD1","#C06CAB","#D8A767","#90D5E4","#89C75F","#F37B7D","#9983BD","#D24B27","#3BBCA8","#6E4B9E","#0C727C","#7E1416","#E6C2DC","#3D3D3D"])),Qe=Object(v["g"])(!0),et=Object(v["g"])(!1),tt=Object(v["g"])([]);function at(){var e=t.refs.peakContainer;e&&(ye.value=e.$el.offsetWidth-2)}function nt(){null===n.value.user?a.go(-1):a.push("/")}function rt(e){return e.match("[A-Z]+[0-9]+")[0]}function it(e){if(!e.includes("D"))return"";var t=e.replace(/D0+/i,"D");return t}function ut(e){He.value=e}function lt(e){re.value=e.ids,ie.value=e.genes}function st(e){Te.value=e}function ot(e){return ct.apply(this,arguments)}function ct(){return ct=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:et.value=!1,se.value=t;case 2:case"end":return e.stop()}}),e)}))),ct.apply(this,arguments)}function dt(e){Ue.value=e}function vt(e){Ee.value=e}function pt(){ke.dispatch({text:"Public link copied to clipboard",options:{left:!0,color:"success"}})}function ft(e){navigator.clipboard.writeText(e)}function gt(e){je.value=e}function mt(e){if(-1!==e.indexOf("#")){var t=e.split("#")[0],a=e.split("#")[1],n="#";a.length>=6&&(n+=a,be.value[t]=n)}}function ht(){if(pe.value=!1,he.value!==be.value){Ce.value=!0;var e={},a=[];S.a.each(be.value,(function(t,n){e[n]=t,a.push(t)})),Xe.value=a,he.value=e,"gene"===se.value&&C.value&&!Le.value&&(He.value=!0,t.refs.trackbrowser.reload(p.value,he.value),He.value=!1)}}function bt(){pe.value=!1;var e={};S.a.each(he.value,(function(t,a){e[a]=t})),be.value=e}function _t(e,t){var a="string"!==typeof t.srcElement._value?"":t.srcElement._value;we.value[e]=[a]}function wt(){fe.value=!1;var e={};S.a.each(_e.value,(function(t,a){e[a]=t})),we.value=e}function xt(){fe.value=!1;var e={};S.a.each(we.value,(function(t,a){e[a]=t})),_e.value=e}function yt(e){if(Pe.value.includes(e)){var t=Pe.value.indexOf(e);t>-1&&Pe.value.splice(t,1)}else Pe.value.push(e)}function kt(){ze.value.match(/\d+/)&&Ve.value.match(/\d+/)&&(We.value=[ze.value,Ve.value],$e.value=!$e.value)}function Ot(){ze.value="",Ve.value="",We.value=[ze.value,Ve.value]}function jt(e){var t=Object(Lr["a"])(e,2),a=t[0],n=t[1];ze.value=a,Ve.value=n}function Rt(){Z.value=!1;var e=re.value.join(),t=ie.value.join(),a="".concat(e,"\n\n").concat(t),n=document.createElement("a"),r=new Blob([a],{type:"text;charset=utf-8;"}),i=URL.createObjectURL(r);n.href=i,n.setAttribute("download","".concat(p.value,"/Selection.txt")),n.click()}function Ct(e){if(ve.value=!1,C.value||!C.value&&!Be.value){var t=document.createElement("canvas"),a=t.getContext("2d"),n=["spatialGroup","umapGroup"],r=document.getElementById("spatialGroup"),i=document.getElementById("umapGroup"),u=parseFloat(r.getAttribute("width"))>parseFloat(i.getAttribute("width"))?parseFloat(r.getAttribute("width")):parseFloat(i.getAttribute("width")),l=parseFloat(r.getAttribute("height"))>parseFloat(i.getAttribute("height"))?parseFloat(r.getAttribute("height")):parseFloat(i.getAttribute("height"));u+=12,l+=12,t.width=2*u,t.height=l;var s=0,o=[0,u],c=function(e,n,r){if(s+=1,null===a||void 0===a||a.drawImage(e,n,r),2===s){var i=t.toDataURL("image/png"),u=document.createElement("a");u.id="".concat(p.value,"link"),u.href=i;var l=w.value.join();u.setAttribute("download","".concat(p.value,"/").concat(l,".png")),u.click()}};n.forEach((function(e,t){var a="".concat(e),n=document.createElement("canvas"),r=n.getContext("2d"),i=document.getElementById("".concat(a)),u=parseFloat(i.getAttribute("width")),l=parseFloat(i.getAttribute("height"));n.width=u+8,n.height=l+8;var s=(new XMLSerializer).serializeToString(i),d=new window.Image,v=o[t],p=0;d.onload=function(){null===r||void 0===r||r.drawImage(d,0,0,u,l),c(n,v,p)},d.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(s))}))}else{var d,v=document.createElement("canvas"),f=v.getContext("2d"),g=0,m=0,h=0,b=Math.floor(w.value.length/3)+1,_=-1,y=function(e,t,a){if(h+=1,null===f||void 0===f||f.drawImage(e,t,a),h===w.value.length){var n=v.toDataURL("image/png"),r=document.createElement("a");r.id="".concat(p.value,"link"),r.href=n;var i=w.value.join();r.setAttribute("download","".concat(p.value,"/").concat(i,".png")),r.click()}};w.value.forEach((function(e,t){var a="svgGroup".concat(e),n=document.createElement("canvas"),r=n.getContext("2d"),i=document.getElementById("".concat(a));g=i.getBoundingClientRect().width+8,m=i.getBoundingClientRect().height+8,0===t&&(v.width=3*g,v.height=b>=1?m*b+8*b:m,d=[0,g,2*g]),n.width=g,n.height=m;var u=(new XMLSerializer).serializeToString(i),l=new window.Image,s=d[t%3];t%3===0&&(_+=1);var o=_*m;l.onload=function(){null===r||void 0===r||r.drawImage(l,0,0,g,m),y(n,s,o)},l.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(u))}))}if(ce.value){var k=document.getElementById("capturePeak");Mu()(k,{backgroundColor:e}).then((function(e){var t,a=e.toDataURL("image/png"),n=document.createElement("a");n.href=a,t="motif"===se.value?"".concat(p.value,"_").concat(x.value[0],"_seqlogo"):"".concat(p.value,"_").concat(x.value[0],"_peaks"),n.setAttribute("download","".concat(t,".png")),n.click()}))}if(de.value){var O=document.getElementById("captureHisto");Mu()(O,{backgroundColor:e}).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;var n=w.value.join();a.setAttribute("download","".concat(p.value,"/").concat(n,"_histogram.png")),a.click()}))}}function St(){return It.apply(this,arguments)}function It(){return It=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ve.value=!1,t=document.getElementById("spatialGroup"),a=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),t.cloneNode(!0),i=(new XMLSerializer).serializeToString(t),u=new window.Image,u.onload=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var i,l,s,o,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l=document.createElement("canvas"),l.width=a,l.height=r,s=l.getContext("2d"),s.drawImage(u,0,0,a,r),o=l.toDataURL("image/png"),c=document.createElement("a"),c.id="".concat(p.value,"link"),c.href=o,d="frontPage_".concat(p.value,".png"),c.setAttribute("download","".concat(d)),c.click(),e.next=14,null===(i=n.value)||void 0===i?void 0:i.generateFrontPage(o,p.value);case 14:e.sent;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.src="data:image/svg+xml; charset=utf8,".concat(encodeURIComponent(i));case 9:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function At(e){!_.value.includes(e)&&h.value.length>0&&(le.value=[e],C.value=!1)}function Ft(e){"Anti"!==e?Se.value=[e]:Ne.value*=-1}function Mt(e){return Dt.apply(this,arguments)}function Dt(){return Dt=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:h.value=t.map((function(e){return{name:e}})),b.value=!1;case 4:case"end":return e.stop()}}),e)}))),Dt.apply(this,arguments)}function Pt(e){E.value=e.background,Q.value=!1}function Tt(){return Et.apply(this,arguments)}function Et(){return Et=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(y.value){e.next=2;break}return e.abrupt("return");case 2:if(A.value=!1,a={},n={},r={},i={},[],u=Object.keys(Me.value),Object.keys(Me.value).length,!Ce.value){for(l=0;l<u.length;l+=1)s=u[l],a[s]=Xe.value[l],i[s]=Xe.value[l],n[s]="",r[s]="";he.value=a,be.value=i,"C1"in _e.value||(_e.value=n,we.value=r)}"gene"!==se.value||!C.value||z.value||V.value||Le.value||t.refs.trackbrowser.reload(p.value,he.value);case 12:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ut(){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=[],a=[],n=Object.keys(Me.value),O.value=n.map((function(e){return{name:e}})),a.push({text:"Anti",value:"id",sortable:!1,key:Ne.value}),r=0;r<O.value.length;r+=1)a.push({text:O.value[r].name,value:O.value[r].name,sortable:!1});$.value=a,S.a.each(qe.value[se.value][Ne.value],(function(e,a){var n={},r=[],i=[];r.push("id"),i.push(a);for(var u=0;u<O.value.length;u+=1)r.push(O.value[u].name),i.push(e[u]);for(var l=0;l<r.length;l+=1)n[r[l]]=i[l];t.push(n)})),G.value=t,W.value=O.value.length;case 10:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function qt(){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value=!0,y.value=!0,e.next=4,Ut();case 4:return e.next=6,Tt();case 6:at(),b.value=!1;case 8:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function Lt(e){Me.value=e,Pe.value=Object.keys(Me.value).map((function(e){return e})),"eRegulon"===se.value&&(De.value=e),Object.keys(qe.value).length>0&&qt()}function Gt(){return $t.apply(this,arguments)}function $t(){return $t=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,l,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={params:{filename:"data/".concat(p.value,"/h5/topTen_genes.json")}},e.next=3,null===(t=n.value)||void 0===t?void 0:t.getJsonFile(a);case 3:if(r=e.sent,qe.value.gene=r,Le.value){e.next=11;break}return u={params:{filename:"data/".concat(p.value,"/h5/topTen_motifs.json")}},e.next=9,null===(i=n.value)||void 0===i?void 0:i.getJsonFile(u);case 9:l=e.sent,qe.value.motif=l;case 11:if(!Ge.value){e.next=17;break}return o={params:{filename:"data/".concat(p.value,"/h5/topTen_eRegulons.json")}},e.next=15,null===(s=n.value)||void 0===s?void 0:s.getJsonFile(o);case 15:c=e.sent,qe.value.eRegulon=c;case 17:y.value=!1,Object.keys(Me.value).length>1&&qt();case 19:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}var zt=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.value.getTaskStatus(t);case 4:B.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Vt(){return Wt.apply(this,arguments)}function Wt(){return Wt=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(y.value){t.next=2;break}return t.abrupt("return");case 2:try{e.query.public||("motif"===se.value?(a=s.value,s.value=a.replace(/eRegulons|genes/i,"motifs")):"gene"===se.value?(n=s.value,s.value=n.replace(/eRegulons|motifs/i,"genes")):"eRegulon"===se.value&&(r=s.value,s.value=r.replace(/motifs|genes/i,"eRegulons")))}catch(i){console.log(i)}case 3:case"end":return t.stop()}}),t)}))),Wt.apply(this,arguments)}function Ht(){return Jt.apply(this,arguments)}function Jt(){return Jt=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,r,i,u,l,o,c,d,v,g,m=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=m.length>0&&void 0!==m[0]?m[0]:p.value,n.value){t.next=3;break}return t.abrupt("return");case 3:if(s.value){t.next=5;break}return t.abrupt("return");case 5:if(t.prev=5,e.query.public){t.next=19;break}return r=Ye(),i=null===r||void 0===r?void 0:r.token.split("JWT ")[1],u="data/".concat(a,"/h5/geneNames.txt.gz"),l="data/".concat(a,"/h5/motifNames.txt.gz"),o="data/".concat(a,"/h5/data.csv.gz"),c=s.value,t.next=15,n.value.encodeLink({args:[o,u,l,c.replace(/motifs/i,"genes"),c.replace(/genes/i,"motifs"),"data/".concat(p.value,"/h5/obj/motifs.csv")],meta:{run_id:a,species:T.value.species,tissue:T.value.organ,assay:T.value.assay}});case 15:d=t.sent,v=d.encoded,g=window.location.host,f.value="https://".concat(g,"/public?component=PublicGeneViewer&run_id=").concat(v,"&public=true&token=JWT%20").concat(i);case 19:t.next=26;break;case 21:t.prev=21,t.t0=t["catch"](5),console.log(t.t0),b.value=!1,ke.dispatch({text:"".concat(t.t0),options:{right:!0,color:"error"}});case 26:case"end":return t.stop()}}),t,null,[[5,21]])}))),Jt.apply(this,arguments)}function Xt(){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,r,i,u,l,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a="data",r="gene.seq_logo",i="atxcloud_gene",u=[e.query.public?s.value:"".concat(a,"/").concat(p.value,"/h5/obj/motifs.csv"),x.value[0]],l={},!e.query.public){t.next=12;break}return t.next=9,n.value.postPublicTask(r,u,l,i,7);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,n.value.postTask(r,u,l,i);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,zt(o._id);case 18:if("SUCCESS"===B.value.status||"FAILURE"===B.value.status){t.next=27;break}return"PROGRESS"===B.value.status&&(L.value="".concat(B.value.progress,"% - ").concat(B.value.position)),t.next=22,new Promise((function(e){q.value=window.setTimeout(e,1e3)}));case 22:return q.value=null,t.next=25,zt(o._id);case 25:t.next=18;break;case 27:"SUCCESS"!==B.value.status?(ke.dispatch({text:"Worker failed in AtlasXplore",options:{right:!0,color:"error"}}),b.value=!1):(ke.dispatch({text:"Motif ".concat(x.value[0]," found"),options:{right:!0,color:"success"}}),L.value=B.value.status,c=B.value.result,xe.value=c),t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](0),console.log(t.t1);case 33:case"end":return t.stop()}}),t,null,[[0,30]])}))),Qt.apply(this,arguments)}function Yt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(k["a"])(regeneratorRuntime.mark((function t(a){var r,i,u,l,o,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=37;break}if(b.value=!0,r="gene.compute_cell_type",i="atxcloud_gene",u=[s.value,a],l={},!e.query.public){t.next=12;break}return t.next=9,n.value.postPublicTask(r,u,l,i,"gene"===se.value?3:4);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,n.value.postTask(r,u,l,i);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,zt(o._id);case 18:if("SUCCESS"===B.value.status||"FAILURE"===B.value.status){t.next=27;break}return"PROGRESS"===B.value.status&&(L.value="".concat(B.value.progress,"% - ").concat(B.value.position)),t.next=22,new Promise((function(e){q.value=window.setTimeout(e,1e3)}));case 22:return q.value=null,t.next=25,zt(o._id);case 25:t.next=18;break;case 27:if("SUCCESS"===B.value.status){t.next=31;break}return ke.dispatch({text:"Worker failed for CellType",options:{right:!0,color:"error"}}),b.value=!1,t.abrupt("return");case 31:L.value=B.value.status,c=B.value.result,d={},S.a.each(we.value,(function(e,t){Object.keys(c).includes(t)?d[t]=c[t]:d[t]=["Undefined"]})),we.value=d,b.value=!1;case 37:case"end":return t.stop()}}),t)}))),Kt.apply(this,arguments)}function Zt(){var e=t.refs.file.files[0],a=new FileReader;e.type.includes("csv")?(a.onload=function(e){Ie.value=[e.target.result]},a.onerror=function(e){return console.log(e)},a.readAsText(e)):ke.dispatch({text:"Wrong file type must be csv",options:{right:!0,color:"error"}})}function ea(e){var t=e.target;t.value=""}function ta(){return aa.apply(this,arguments)}function aa(){return aa=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.length>0&&void 0!==a[0]?a[0]:p.value,i.value){e.next=3;break}return e.abrupt("return");case 3:T.value.organ=i.value.organ,T.value.species=i.value.species,T.value.type=i.value.assay,T.value.runid=i.value.run_id,t=["gene"],"Transcriptome"===i.value.assay?Le.value=!0:t.push("motif"),i.value.regulons_flag&&(Ge.value=!0,t.push("eRegulon")),tt.value=t;case 11:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function na(e){return ra.apply(this,arguments)}function ra(){return ra=Object(k["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n="data",e.query.public||(r="","gene"===se.value&&(r="".concat(n,"/").concat(a.id,"/h5/obj/genes.h5ad")),"motif"===se.value&&(r="".concat(n,"/").concat(a.id,"/h5/obj/motifs.h5ad")),"eRegulon"===se.value&&(r="".concat(n,"/").concat(a.id,"/h5/obj/eRegulons.h5ad")),s.value=r,c.value="",p.value=a.id,T.value.species=""),Ht(p.value),ta(p.value),Gt();case 5:case"end":return t.stop()}}),t)}))),ra.apply(this,arguments)}function ia(e){return ua.apply(this,arguments)}function ua(){return ua=Object(k["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(p.value=a.run_id,T.value.organ=a.tissue,n=["gene"],"Transcriptome"===a.assay?Le.value=!0:n.push("motif"),a.regulons_flag&&(Ge.value=!0,n.push("eRegulon")),tt.value=n,T.value.species=a.species,T.value.type=a.assay,Gt(),!e.query||null!==p.value){t.next=13;break}if(!e.query.run_id){t.next=13;break}return t.next=13,na({id:e.query.run_id});case 13:case"end":return t.stop()}}),t)}))),ua.apply(this,arguments)}var la=o["default"].extend(qu),sa=Object(v["g"])(new la({vuetify:Au,propsData:{gene_list:h,gene_button:le},created:function(){this.$on("changed",(function(e){_.value=e})),this.$on("avgind",(function(e){Be.value=e})),this.$on("sentgenes",(function(e){C.value=!1,w.value=[],x.value=[],e.forEach((function(e,t){w.value.push(e)})),1===e.length&&"eRegulon"!==se.value&&(e.forEach((function(e,t){x.value.push(e)})),"motif"===se.value&&Xt())}))}}));Object(v["h"])(ce,(function(e){ge.value=e?"visible":"hidden"})),Object(v["h"])(se,(function(t){if(Je.value=!0,!Le.value){if(!e.query.public){var a=document.getElementById("geneMotifButton"),n=a.childNodes[0];"gene"===t?n.innerText="GENE":"motif"===t?n.innerText="MOTIF":"eRegulon"===t&&(n.innerText="EREGULON")}ze.value="",Ve.value="",We.value=[ze.value,Ve.value],h.value=[],oe.value=!0,ce.value=!1,de.value=!1,C.value=!0,w.value.length>0&&(_.value=[]),J.value=[!1],le.value=[],x.value=[],Vt()}Je.value=!1})),Object(v["h"])(Ne,(function(e){oe.value=!0,ce.value=!1,de.value=!1,C.value=!0,_.value=[],J.value=[!1],le.value=[],w.value=[],x.value=[],Ut()})),Object(v["h"])(z,(function(e){z.value?te.value="green":te.value="black"})),Object(v["h"])(V,(function(e){V.value?ae.value="green":ae.value="black"})),Object(v["h"])(_,(function(e){0===_.value.length?(C.value=!0,J.value=[!1],x.value=[],w.value=[]):(z.value=!1,V.value=!1)})),Object(v["h"])(Ne,(function(e){oe.value=!0,ce.value=!1,de.value=!1,C.value=!0,_.value=[],J.value=[!1],le.value=[],w.value=[],x.value=[]})),Object(v["h"])(J,(function(e){var t=e[0];t||(C.value=!0,le.value=[],me.value=!0)})),Object(v["h"])(pe,(function(e){e||(Re.value="",je.value="")})),Object(v["h"])(Ie,(function(e){var t=function(e){var t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return a},a=e[0].split("\n"),n=a.map((function(e){return e.split(",")})),r=n.map((function(e){return Object(Cu["a"])({},e[0].replace(/[.\\/#!$%^&*;:{}=_`~()@'"\r\n]/g,""),e.slice(1,e.length))})),i={};i={},r.forEach((function(e,a){var n=Object.values(e),r=Object.keys(e);n.forEach((function(e,a){var n=e.filter((function(e){return e.length>1}));i[r[0]]=n.map((function(e){return t(e.replace(/[.,\\/#!$%^&*;:{}=_`~()@'"\r\n\s]/g,""))}))}))})),Yt(i)}));var oa=Object(v["g"])([]),ca={text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:b.value,click:function(){P.value=!P.value}},da={text:se.value,icon:null,tooltip:"Cluster<->Annotations",disabled:b.value,ref:"geneMotifButton",enabled:!0,click:function(){et.value=!et.value}},va={text:"Background/Heatmap",icon:"mdi-palette",tooltip:"Background/Heatmap",enabled:!0,click:function(){Q.value=!Q.value}},pa={type:"component",name:"GeneAutoComplete",id:"geneac",enabled:!0,component:sa};function fa(){oa.value.push(ca,da,va,pa)}function ga(e){return ma.apply(this,arguments)}function ma(){return ma=Object(k["a"])(regeneratorRuntime.mark((function t(a){var r,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(oa.value.length<1&&fa(),U.commit.setSubmenu(oa.value),e.query.public){t.next=8;break}return t.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:return t.next=7,na({id:a});case 7:N.value={task:"gene.compute_qc",queues:["atxcloud_gene"]};case 8:if(!(e.query&&e.query.run_id&&e.query.public)){t.next=15;break}return t.next=11,null===(r=n.value)||void 0===r?void 0:r.decodeMetadata(e.query.run_id);case 11:i=t.sent,ia(i),u=e.query.run_id,s.value=u;case 15:sa.value.$mount("#geneac");case 16:case"end":return t.stop()}}),t)}))),ma.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ql;case 2:null!==i.value||e.query.public?(p.value=null,H.value=!0,ga(e.query.run_id)):nt();case 3:case"end":return t.stop()}}),t)})))),Object(v["e"])((function(){sa.value.$el&&(sa.value.$destroy(),sa.value.$el.parentNode.removeChild(sa.value.$el),U.commit.setSubmenu(null))})),{scale:j,scaleUMAP:R,filename:s,publicLink:f,items:g,headers:Yl,selected:m,loading:b,loadExpressions:Mt,clusterHeaders:Kl,backgroundOptions:es,backgroundHeader:Zl,genes:h,selectedGenes:_,generatePublicLink:Ht,spatialData:y,isHighlighted:A,onResize:at,isClusterView:C,isSummation:I,clusterItems:O,backgroundColor:E,updateCircles:Tt,heatMap:Xe,progressMessage:L,selectAction:na,workers:r,candidateWorkers:l,currentTask:N,highestCount:F,lowestCount:M,topHeaders:$,geneNames:G,isDrawing:z,isDrawingRect:V,runId:p,sendGene:At,sendCluster:Ft,lengthClust:W,colorBarmap:D,showFlag:J,backgroundFlag:Q,chooseBackground:Pt,heatmapFlag:Y,lassoSide:ee,colorOnOff:te,colorOnOffRect:ae,colorbarText:ne,highlightIds:re,topSelected:ie,listId:Z,captureScreen:Ct,saveTxt:Rt,highlightCount:ue,autoCompleteFlag:K,geneButton:le,geneMotif:se,featureTableFlag:oe,peakViewerFlag:ce,histoFlag:de,colorMap:he,spatialRun:me,visible:ge,trackBrowserGenes:x,metadata:T,metaFlag:P,displayFlag:ve,clusterColorFlag:pe,cellTypeFlag:fe,getMeta:ta,cleanRunId:rt,childGenes:w,updateLoading:ut,updateSpatial:qt,updateFilename:Vt,updateSelectors:lt,getPublicId:ia,resolveAuthGroup:Ze,seqlogo:Xt,publicSeqlogo:Oe,seqLogoData:xe,widthFromCard:ye,linkAlert:pt,holdGene:d,holdMotif:c,copyToClip:ft,updateClusterLabel:gt,clickedCluster:je,userSelectedColor:Re,changeClusterColor:ht,manualClusterFlag:Ce,clearClusterColor:bt,checkFieldColor:mt,checkFieldCell:_t,clearCellType:wt,changeCellType:xt,colorMapCopy:be,clickedClusterFromChild:Se,cellTypeMap:_e,cellTypeMapCopy:we,uploadCellType:Zt,fileContent:Ie,runCellType:Yt,resetFile:ea,collabData:Ae,removeZeros:it,collabName:Fe,updateClustTotal:Lt,totalInClust:Me,totalInCellType:De,unClickCluster:yt,selectedClusters:Pe,updateHistogram:st,spatialCircleData:Te,colorBarToSingle:vt,colorBarFromSibling:Ee,dataToSingle:dt,singleData:Ue,averageInd:Be,atlasXplore_displayed:H,collaborator_specific_ids:X,prep_atlasxplore:ga,acInstance:sa,submenu:oa,metadata_button:ca,gene_motif_button:da,bg_color_button:va,gene_ac_bar:pa,prep_sub_menu:fa,tableKey:Ne,topTenIds:qe,updateTen:Gt,redirectToVisual:nt,assayFlag:Le,regulons_flag:Ge,updateTable:Ut,logout:Ke,scaleFlag:$e,userMaxValue:ze,userMinValue:Ve,applyBoundary:kt,resetBoundary:Ot,onlyNumRule:ts,userMaxMinValue:We,updateMaxMin:jt,peakViewLoad:He,geneMotifLoad:Je,oneTime:Qe,saveImageTable:u,generateFrontPage:St,clusters_ann_flag:et,clusters_ann_list:tt,changeClustersAnn:ot}}}),ns=as,rs=(a("4a16"),Object(te["a"])(ns,ju,Ru,!1,null,null,null)),is=rs.exports,us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("run-id-auto-complete",{attrs:{filter:"tracks",multiple:!1,label:"Search Run ID"},on:{changed:e.onRunIdChanged},model:{value:e.runId,callback:function(t){e.runId=t},expression:"runId"}}),a("track-browser",{attrs:{run_id:e.runId,params:e.trackBrowserParams,colormap:e.colorMap,search_key:"Pex2"}}),a("v-btn",{on:{click:e.onClicked}},[e._v(" Click ")])],1)},ls=[],ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",e._b({attrs:{items:e.filteredOnes,outlined:!1,dense:"",clearable:"","allow-overflow":!1,chips:"",label:"Search Files",multiple:!1,"cache-items":!1,color:"blue-grey lighten-2","item-text":"name","item-value":"name","search-input":e.searchInput,loading:e.autocompleteLoading,width:"100%","small-chips":""},on:{input:e.acInputChanged,"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},change:e.onChanged},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"v-autocomplete",e.dProps,!1))},os=[],cs=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),ds=Object(v["c"])({name:"FileAutoComplete",props:{value:{type:String,required:!1,default:null},filter:{type:String,required:!0,default:""}},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}})),r=Object(v["a"])((function(){return t.attrs})),i=Object(v["g"])(),u=Object(v["g"])([]),l=Object(v["g"])([]),s=Object(v["g"])(null),o=Object(v["g"])(!1);function c(){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return");case 2:return r={params:{path:"data",filter:e.filter}},t.next=5,a.value.getFileList(r);case 5:i=t.sent,l.value=i.map((function(e){return{id:"".concat(e.split("/")[1]),name:e}}));case 7:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return m=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:o.value=!0,setTimeout(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:u.value=l.value.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||i.value===e.name})),o.value=!1;case 4:case"end":return e.stop()}}),e)}))),500);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.value=t,i.value=t;case 2:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(e){i.value=null,h(i.value)}return Object(v["h"])(s,(function(e){e&&g(e)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,cs;case 2:case"end":return e.stop()}}),e)})))),{model:n,dProps:r,autocompleteLoading:o,searchInput:s,acInputChanged:c,selectedOnes:i,filteredOnes:u,onChanged:h,remove:_}}}),vs=ds,ps=Object(te["a"])(vs,ss,os,!1,null,null,null),fs=ps.exports,gs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-autocomplete",e._b({attrs:{items:e.filteredOnes,outlined:!1,dense:"",clearable:"","allow-overflow":!1,chips:"",multiple:!1,"cache-items":!1,color:"blue-grey lighten-2","item-text":"id","item-value":"id","search-input":e.searchInput,loading:e.autocompleteLoading,width:"100%","small-chips":""},on:{input:e.acInputChanged,"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},change:e.onChanged},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"v-autocomplete",e.dProps,!1))},ms=[],hs=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),bs=Object(v["c"])({name:"RunIdAutoComplete",props:{value:{type:String,required:!1,default:null},filter:{type:String,required:!0,default:"data"}},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}})),r=Object(v["a"])((function(){return t.attrs})),i=Object(v["g"])(),u=Object(v["g"])([]),l=Object(v["g"])([]),s=Object(v["g"])(null),o=Object(v["g"])(!1);function c(){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.value){t.next=2;break}return t.abrupt("return");case 2:return r={params:{path:"data",filter:e.filter}},t.next=5,a.value.getFileList(r);case 5:i=t.sent,l.value=i.map((function(e){return{id:"".concat(e.split("/")[1]),name:e}})),l.value=S.a.uniqBy(l.value,(function(e){return e.id}));case 8:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return m=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:o.value=!0,setTimeout(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:u.value=l.value.filter((function(e){return e.id.toLowerCase().includes(t.toLowerCase())||i.value===e.id})),o.value=!1;case 4:case"end":return e.stop()}}),e)}))),500);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.value=a,i.value=a,t.emit("changed",a);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(e){i.value=null,h(i.value)}return Object(v["h"])(s,(function(e){e&&g(e)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,hs;case 2:case"end":return e.stop()}}),e)})))),{model:n,dProps:r,autocompleteLoading:o,searchInput:s,acInputChanged:c,selectedOnes:i,filteredOnes:u,onChanged:h,remove:_}}}),_s=bs,ws=Object(te["a"])(_s,gs,ms,!1,null,null,null),xs=ws.exports,ys=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),ks=Object(v["c"])({name:"AtlasTest",props:["query"],components:{TrackBrowser:el,FileAutoComplete:fs,RunIdAutoComplete:xs,FreshDialog:kt},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client}));var a=Object(v["g"])(!1),n=Object(v["g"])([]),r=Object(v["a"])((function(){return t.root.$route})),i=Object(v["g"])(),u=(Object(v["g"])([]),Object(v["g"])()),l=Object(v["g"])({C1:"blue",C2:"red",C3:"green",C4:"yellow"});function s(e){""!==e&&(u.value=e)}function o(e){a.value=!a.value}function c(e){a.value=!1}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ys;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{dialog:a,currentRoute:r,onRunIdChanged:s,selectedFiles:n,onClicked:o,onSelect:c,runId:u,trackBrowserParams:i,colorMap:l}}}),Os=ks,js=Object(te["a"])(Os,us,ls,!1,null,null,null),Rs=js.exports,Cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[e.resolveAuthGroup(["admin","user"])?a("v-container",{style:{"background-color":e.backgroundColor,height:"100%",margin:"0",width:"100%",padding:"0"},attrs:{fluid:"",id:"container"}},[e.query.public?[a("v-app-bar",{staticStyle:{"margin-top":"-7px"}},[a("div",{staticStyle:{cursor:"pointer"}},[a("v-img",{attrs:{width:"40px",src:"favicon-nobg.png"},on:{click:e.redirectToVisual}})],1),a("v-tooltip",{attrs:{bottom:"",disabled:e.metaFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-1",attrs:{color:"black",icon:"",medium:"",disabled:!e.spatialData},on:{click:function(t){e.metaFlag=!e.metaFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-filter-variant")])],1)]}}],null,!1,3258238836)},[a("span",[e._v("Metadata")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-1",attrs:{medium:"",text:"",disabled:!e.spatialData||e.assayFlag},on:{click:function(t){"gene"===e.geneMotif?e.geneMotif="motif":e.geneMotif="gene"}}},"v-btn",r,!1),n),[e._v(e._s(e.geneMotif)+" ")])]}}],null,!1,3047174188)},[a("span",[e._v("Gene/Motif")])]),a("v-tooltip",{attrs:{disabled:e.backgroundFlag,bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-3",attrs:{disabled:!e.spatialData,small:""},on:{click:function(t){e.backgroundFlag=!e.backgroundFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-palette")])],1)]}}],null,!1,2551911586)},[a("span",[e._v("Background Color")])]),a("v-tooltip",{attrs:{disabled:e.heatmapFlag,bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-3 mr-3",attrs:{disabled:!e.spatialData,small:""},on:{click:function(t){e.heatmapFlag=!e.heatmapFlag}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-fire")])],1)]}}],null,!1,876938749)},[a("span",[e._v("Heatmap")])]),a("div",{attrs:{id:"geneac"}})],1)]:e._e(),a("v-row",[!e.query.public&&e.runIdFlag?a("v-dialog",{attrs:{value:e.runIdFlag,"hide-overlay":""},on:{"click:outside":function(t){e.runIdFlag=!e.runIdFlag}}},[a("v-card",{staticStyle:{width:"220px",position:"absolute","z-index":"999",top:"40px",left:"85px"},attrs:{disabled:e.loading}},[a("v-text-field",{staticStyle:{width:"190px"},attrs:{loading:e.loading,"prepend-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{staticClass:"thickBorder",attrs:{height:"20vh",width:"20%",dense:"","single-select":"",search:e.search,loading:e.loading,items:e.items,headers:e.headers,"sort-by":"id"},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{style:{"background-color":e.colorForGroups[t.item.group]}},[a("td",[a("v-checkbox",{attrs:{color:"black",label:t.item.runID},on:{click:function(a){return e.organizeGroup(t.item.runID)}}})],1)])]}}],null,!1,1123790313),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-btn",{attrs:{color:"red",text:"",small:""}},[e._v("Clear")]),a("v-spacer"),a("v-btn",{attrs:{disabled:e.selectedGroups.length<1,text:"",small:"",color:"green"},on:{click:e.startMultiSample}},[e._v("Begin")])],1)],1)],1):e._e(),a("v-dialog",{attrs:{value:e.backgroundFlag,"hide-overlay":""},on:{"click:outside":function(t){e.backgroundFlag=!e.backgroundFlag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"40px",left:"210px"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",disabled:!e.spatialData,items:e.backgroundOptions,headers:e.backgroundHeader},on:{"click:row":e.chooseBackground},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),a("v-dialog",{attrs:{value:e.heatmapFlag,"hide-overlay":""},on:{"click:outside":function(t){e.heatmapFlag=!e.heatmapFlag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"40px",left:"250px"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",disabled:!e.spatialData||!e.isClusterView,items:e.heatmapOptions,headers:e.heatmapHeader},scopedSlots:e._u([{key:"item",fn:function(t){return["custom"!=t.item["heat"]?[a("tr",{on:{click:function(a){return e.chooseHeatmap(t.item["heat"])}}},[a("td",[e._v(e._s(t.item["heat"]))])])]:[a("tr",{style:{"pointer-events":e.isClusterView?"auto":"none"},on:{click:function(t){e.clusterColorFlag=!0,e.heatmapFlag=!1}}},[a("td",[e._v("customize")])])]]}}],null,!1,3768403795),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),e.metaFlag?a("v-dialog",{attrs:{value:e.metaFlag,"hide-overlay":""},on:{"click:outside":function(t){e.metaFlag=!e.metaFlag}}},[a("v-card",{staticStyle:{width:"200px",position:"absolute","z-index":"999",top:"40px",left:"130px"},attrs:{disabled:e.loading}},[a("v-card-title",[e._v(" "+e._s(e.runId)+" ")]),a("v-card-text",[a("v-text-field",{staticClass:"bold-disabled",attrs:{value:e.metadata.species.replace("_"," "),dense:"",disabled:"",outlined:"",label:"Species"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Organ"},model:{value:e.metadata.organ,callback:function(t){e.$set(e.metadata,"organ",t)},expression:"metadata.organ"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Type"},model:{value:e.metadata.type,callback:function(t){e.$set(e.metadata,"type",t)},expression:"metadata.type"}}),a("v-text-field",{staticClass:"bold-disabled",attrs:{dense:"",outlined:"",disabled:"",label:"Run ID"},model:{value:e.metadata.runid,callback:function(t){e.$set(e.metadata,"runid",t)},expression:"metadata.runid"}})],1)],1)],1):e._e(),e.geneMotifFlag?a("v-dialog",{attrs:{value:e.geneMotifFlag,"hide-overlay":""},on:{"click:outside":function(t){e.geneMotifFlag=!e.geneMotifFlag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"40px",left:"150px"},attrs:{disabled:e.loading}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:["Genes","Motifs"]},scopedSlots:e._u([{key:"item",fn:function(t){return["Genes"==t.item?[a("tr",{on:{click:function(t){e.geneMotif="gene"}}},[a("td",[e._v(e._s(t.item))])])]:e._e(),"Motifs"==t.item?[a("tr",{on:{click:function(t){e.geneMotif="motif"}}},[a("td",[e._v(e._s(t.item))])])]:e._e(),"Features"==t.item?[a("tr",{on:{click:function(t){e.geneMotif="feat"}}},[a("td",[e._v(e._s(t.item))])])]:e._e()]}}],null,!1,4293101694),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e(),a("v-col",{attrs:{cols:"2",sm:"1"}},[a("v-card",{style:{"margin-left":"5px",width:"65px","min-width":"65px",height:"300px","padding-top":"15px","margin-top":"5px","background-color":"silver"},attrs:{flat:""}},[a("v-tooltip",{attrs:{right:"",disabled:e.isDrawing},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{icon:"",disabled:!e.spatialData||e.isDrawingRect||!e.isClusterView,color:e.colorOnOff,small:""},on:{click:function(t){e.isDrawing=!e.isDrawing}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-lasso")])],1)]}}],null,!1,4117228559)},[a("span",[e._v("Lasso Select")])]),a("v-tooltip",{attrs:{right:"",disabled:e.isDrawingRect},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",disabled:!e.spatialData||e.isDrawing||!e.isClusterView,color:e.colorOnOffRect,small:""},on:{click:function(t){e.isDrawingRect=!e.isDrawingRect}},model:{value:e.isDrawingRect,callback:function(t){e.isDrawingRect=t},expression:"isDrawingRect"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-select")])],1)]}}],null,!1,1556311684)},[a("span",[e._v("Rect Select")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.isDrawing&&!e.isDrawingRect,small:""},on:{click:function(t){e.listId=!0}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-eye")])],1)]}}],null,!1,2645962557)},[a("span",[e._v("View Id's/Genes")])]),a("v-tooltip",{attrs:{right:"",disabled:e.displayFlag},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",disabled:!e.spatialData,small:""},on:{click:function(t){e.displayFlag=!e.displayFlag}},model:{value:e.isDrawing,callback:function(t){e.isDrawing=t},expression:"isDrawing"}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-download")])],1)]}}],null,!1,53105994)},[a("span",[e._v("Save Display")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.publicLink,expression:"publicLink",arg:"copy"}],staticClass:"ml-4 mt-5",attrs:{icon:"",color:"black",small:""},on:{click:e.linkAlert}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-content-copy")])],1)]}}],null,!1,981542642)},[a("span",[e._v("Copy Public Link")])]),a("v-dialog",{attrs:{width:"600px",height:"300px"},model:{value:e.listId,callback:function(t){e.listId=t},expression:"listId"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("Tixel Id's Selected")])]),a("v-card-text",[e._v(" "+e._s(e.highlightIds)+" ")]),a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("Top 10 Genes")])]),a("v-card-text",[e._v(" "+e._s(e.topSelected)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveTxt}},[e._v(" Save ")]),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.listId=!1}}},[e._v(" Close ")])],1)],1)],1),e.clusterColorFlag?a("v-dialog",{attrs:{value:e.clusterColorFlag,scrollable:!0},on:{"click:outside":e.clearClusterColor}},[a("v-card",{staticStyle:{width:"600px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","z-index":"999",height:"90vh"}},[a("v-card-title",[e._v("Color Configuration")]),a("v-card-text",[a("v-divider"),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",attrs:{cols:"12",sm:"12"}},[a("table",{staticStyle:{"margin-bottom":"0"}},[a("tbody",e._l(e.colorMapCopy,(function(t,n){return a("tr",{key:n},[a("b",[e._v(e._s(n))]),a("td",{staticStyle:{"padding-left":"50px","vertical-align":"top"}},[a("v-tooltip",{attrs:{color:"black",right:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,i=n.attrs;return[a("v-btn",e._g(e._b({staticClass:"round_chip",attrs:{color:t},on:{click:function(a){return e.copyToClip(t)}}},"v-btn",i,!1),r))]}}],null,!0)},[a("span",[e._v(e._s(t))])])],1),a("td",{staticStyle:{"padding-left":"80px"}},[a("v-text-field",{staticClass:"ma-0 pa-0",attrs:{value:t,clearable:"",label:"Color Choice"},on:{input:function(t){return e.checkFieldColor(n+t)}}})],1)])})),0)])])],1)],1),a("div",{staticStyle:{width:"100%",height:"8px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"d-flex justify-center align-center",staticStyle:{"margin-top":"15px"},attrs:{cols:"12",sm:"12"}},[a("v-color-picker",{attrs:{value:"hex",mode:"hexa","hide-mode-switch":""}})],1)],1)],1),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-divider"),a("v-card-text",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"pt-6",attrs:{cols:"12",sm:"12",align:"right"}},[a("v-btn",{attrs:{color:"red",outlined:""},on:{click:e.clearClusterColor}},[e._v(" Cancel ")]),a("v-btn",{staticClass:"pl-5",attrs:{color:"blue",outlined:""},on:{click:e.changeClusterColor}},[e._v(" Apply ")])],1)],1)],1)],1)],1):e._e(),e.displayFlag?a("v-dialog",{attrs:{value:e.displayFlag,"hide-overlay":""},on:{"click:outside":function(t){e.displayFlag=!e.displayFlag}}},[a("v-card",{staticStyle:{width:"100px",position:"absolute","z-index":"999",top:"240px",left:"65px"}},[a("v-data-table",{staticClass:"thickBorder",attrs:{width:"20%",dense:"","single-select":"","hide-default-footer":"","hide-default-header":"",items:["Transparent","Opaque"]},scopedSlots:e._u([{key:"item",fn:function(t){return["Transparent"==t.item?[a("tr",{on:{click:function(t){return e.captureScreen("null")}}},[a("td",[e._v(e._s(t.item))])])]:[a("tr",{on:{click:function(t){return e.captureScreen(e.backgroundColor)}}},[a("td",[e._v(e._s(t.item))])])]]}}],null,!1,2900855741),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1):e._e()],1),a("v-card",{style:{position:"sticky","margin-left":"5px",width:"65px","min-width":"65px",height:"149px","padding-top":"15px","background-color":"silver",top:"55vh"},attrs:{flat:""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4",attrs:{color:"black",icon:"",disabled:!e.spatialData,small:""},on:{click:function(t){e.featureTableFlag=!0,e.peakViewerFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-table-large")])],1)]}}],null,!1,2784972826)},[a("span",[e._v("Feature Table")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"ml-4 mt-5",attrs:{color:"black",icon:"",disabled:!e.spatialData||e.assayFlag,small:""},on:{click:function(t){e.peakViewerFlag=!0,e.featureTableFlag=!1,e.histoFlag=!1}}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-chart-line")])],1)]}}],null,!1,362272879)},[a("span",[e._v("Peak Viewer")])])],1)],1),a("v-col",{staticClass:"mt-5",attrs:{cols:"12",sm:"11"}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("multi-singleview",{attrs:{query:{public:e.query.public},filename:e.filename,standalone:!1,selected_tixels:e.topSelected,selected_genes:e.childGenes,background:e.backgroundColor,heatmap:e.heatMap,manualColor:e.manualClusterFlag,task:"gene.compute_qc",queue:"joshua_gene",lasso:e.isDrawing,rect:e.isDrawingRect,clickedCluster:e.clickedClusterFromChild,checkBoxCluster:e.selectedClusters,indFlag:e.averageInd,antiKey:e.tableKey,geneOmotif:e.geneMotif,plot:"umap",idOfRun:e.runId},on:{loading_value:e.updateLoading,highlightedId:e.updateSelectors,totalClust:e.updateClustTotal,spatialCircleData:e.updateHistograph,singleCircleData:e.dataToSingle,sendColorBar:e.colorBarToSingle,totalGM:e.loadExpressions}})],1),a("v-col",{attrs:{cols:"12",sm:"5"}},[a("multi-singleview",{attrs:{query:{public:e.query.public},filename:e.filename,standalone:!1,selected_tixels:e.topSelected,selected_genes:e.childGenes,background:e.backgroundColor,heatmap:e.heatMap,manualColor:e.manualClusterFlag,task:"gene.compute_qc",queue:"joshua_gene",lasso:e.isDrawing,rect:e.isDrawingRect,clickedCluster:e.clickedClusterFromChild,checkBoxCluster:e.selectedClusters,indFlag:e.averageInd,antiKey:e.tableKey,geneOmotif:e.geneMotif,plot:"spatial",idOfRun:e.allRunIds[0]},on:{loading_value:e.updateLoading,highlightedId:e.updateSelectors,totalClust:e.updateClustTotal,spatialCircleData:e.updateHistograph,singleCircleData:e.dataToSingle,sendColorBar:e.colorBarToSingle,totalGM:e.loadExpressions}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("table",{staticStyle:{"margin-bottom":"0",height:"37vh","overflow-y":"scroll",display:"block"}},e._l(e.cellTypeMap,(function(t,n){return a("tr",{key:n,style:{"vertical-align":"middle"}},[[a("td",[a("v-checkbox",{attrs:{color:e.colorMap[n],dense:"",dark:"white"!=e.backgroundColor,"input-value":"1"},on:{click:function(t){return e.unClickCluster(n)}}})],1)],t.length>0?[a("td",{staticStyle:{"padding-bottom":"8px"}},[a("span",{style:{color:"white"==e.backgroundColor?"black":"white","font-weight":"bold"}},[e._v(e._s(t[0])+" "),a("span",{staticStyle:{"font-size":"10px"}},[e._v(" ("+e._s(e.totalInClust[n])+")")])])])]:[a("td",{staticStyle:{"padding-bottom":"8px"}},[a("span",{style:{color:"white"==e.backgroundColor?"black":"white","font-weight":"bold"}},[e._v(e._s(n)+" "),a("span",{staticStyle:{"font-size":"10px"}},[e._v(" ("+e._s(e.totalInClust[n])+")")])])])]],2)})),0)])],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-row",[e._l(e.allRunIds.slice(1),(function(t){return[a("v-col",{key:t,attrs:{cols:"12",sm:"4"}},[a("multi-singleview",{attrs:{query:{public:e.query.public},filename:e.filename,standalone:!1,selected_tixels:e.topSelected,selected_genes:e.childGenes,background:e.backgroundColor,heatmap:e.heatMap,manualColor:e.manualClusterFlag,task:"gene.compute_qc",queue:"joshua_gene",lasso:e.isDrawing,rect:e.isDrawingRect,clickedCluster:e.clickedClusterFromChild,checkBoxCluster:e.selectedClusters,indFlag:e.averageInd,antiKey:e.tableKey,geneOmotif:e.geneMotif,plot:"spatial",idOfRun:t},on:{loading_value:e.updateLoading,highlightedId:e.updateSelectors,totalClust:e.updateClustTotal,spatialCircleData:e.updateHistograph,singleCircleData:e.dataToSingle,sendColorBar:e.colorBarToSingle,totalGM:e.loadExpressions}})],1)]}))],2)],1)],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.featureTableFlag,expression:"featureTableFlag"}],staticClass:"mt-3",attrs:{flat:""}},[a("table-component",{attrs:{loading:e.loading,lengthClust:e.lengthClust,gene:e.geneNames,clusters:e.topHeaders,colormap:e.colorMap},on:{sentGene:e.sendGene,sentCluster:e.sendCluster}})],1),a("div",{style:{visibility:e.visible},attrs:{id:"capturePeak"}},[e.assayFlag?e._e():a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],ref:"peakContainer",staticClass:"mt-3",attrs:{disabled:e.loading,loading:e.loading,flat:""}},["gene"==e.geneMotif?[a("track-browser",{ref:"trackbrowser",attrs:{run_id:e.runId,metadata:e.metadata.species,search_key:e.trackBrowserGenes[0]},on:{loading_value:e.updateLoading}})]:e._e(),"motif"==e.geneMotif?[a("v-card-title",[e._v(e._s(e.trackBrowserGenes[0]?e.trackBrowserGenes[0]:"Please enter motif in search bar to see seqlogo"))]),a("bar-chart",{ref:"chart",attrs:{seqlogo:e.seqLogoData,width:e.widthFromCard,motif:e.trackBrowserGenes[0]}})]:e._e()],2)],1)],1)],1)],1)],2):e._e()],1)},Ss=[],Is=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"shrinkCol",attrs:{cols:"12",sm:"1"}},[a("v-card",{staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{flat:"",height:"50vh",width:"100%"}},[a("v-card-text",[a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:e.resetScaleAndPos}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-arrow-expand")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){e.scale=1.1*e.scale}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-plus")])],1)],1),a("v-row",{attrs:{justify:"end"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:!e.spatialData},on:{click:function(t){e.scale=.9*e.scale}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-magnify-minus")])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"rounded-0",style:{"background-color":"transparent","overflow-x":"None"},attrs:{id:"stageParentDualAtac",loading:e.loading,flat:"",height:"50vh",align:"center"}},[a("v-stage",{ref:"konvaStageDualAtac",staticClass:"mainStage",style:{overflow:"hidden"},attrs:{config:e.konvaConfigLeft},on:{mousedown:e.mouseDownOnStageLeft,mousemove:e.mouseMoveOnStageLeft,mouseup:e.mouseUpOnStageLeft}},[a("v-layer",{ref:"spatialLayerDualAtac",attrs:{id:"spatialLayerDualAtac"}},e._l(e.circlesSpatial,(function(t){return a("v-circle",{key:t.id,attrs:{config:t},on:{mouseover:e.mouseMoveOnSpatial,mouseout:e.mouseOutOnSpatial}})})),1),a("v-layer",{ref:"annotationLayerDualAtac"}),e.isDrawing?a("v-layer",{ref:"drawingLayer",attrs:{id:"drawingLayer"}},[e._l(e.regions,(function(e){return[a("v-line",{key:e.id,attrs:{config:e}})]})),a("v-line",{attrs:{config:e.polygon}})],2):e._e(),e.isDrawingRect?a("v-layer",{ref:"drawingLayerRect",attrs:{id:"drawingLayerRect"}},[a("v-rect",{attrs:{config:e.rectangle}})],1):e._e()],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"10"}},[e.isClusterView||e.spatialRun?e._e():[a("div",{style:{"background-image":e.colorBarmap,display:"flex"}},e._l(e.stepArray,(function(t){return a("div",{key:""+t,style:{color:e.colorbarText,"font-size":"18px","font-weight":"bold",width:"20%","text-align":"center"}},[e._v(" "+e._s(t)+" ")])})),0)]],2)],1)],1)],1)},As=[],Fs=a("5bc1"),Ms=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Ds=[{text:"ID",value:"id"}],Ps=[{text:"Cluster",value:"name"}];function Ts(e,t,a){var n=Math.min.apply(Math,Object(Xu["a"])(t))+12*a,r=Math.max.apply(Math,Object(Xu["a"])(t))+12*a,i=e.length,u=[];return S.a.each(t,(function(t){var l=t+12*a,s=(l-n)/(r-n)*(i-1),o=Math.trunc(s);u.push(e[o])})),u}var Es=Object(v["c"])({name:"MultiSingleview.vue",props:["query","filename","selected_genes","heatmap","background","task","queue","standalone","lasso","rect","manualColor","clickedCluster","checkBoxCluster","indFlag","geneOmotif","idOfRun","antiKey","plot"],setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(),r=Object(v["a"])((function(){return e.idOfRun})),i=Object(v["g"])(""),u=Object(v["a"])((function(){return e.filename})),l=Object(v["a"])((function(){return e.manualColor})),s=Object(v["a"])((function(){return e.plot})),o=Object(v["g"])(),c=Object(v["g"])(null),d=Object(v["a"])((function(){return e.task})),p=Object(v["a"])((function(){return e.queue})),f=Object(v["g"])(),g=Object(v["g"])(!1),m=Object(v["g"])([]),h=Object(v["a"])((function(){return e.selected_genes})),b=Object(v["g"])(null),_=Object(v["g"])(null),w=window.innerWidth,x=window.innerHeight,y=Object(v["g"])({x:0,y:0,width:w,height:x,draggable:!0}),O=Object(v["g"])(.75),j=Object(v["g"])(!0),R=Object(v["g"])(!1),C=Object(v["g"])(1e4),I=Object(v["g"])(0),A=Object(v["g"])(),F=new Dl["default"].Label({visible:!1}),M=new Dl["default"].Tag({fill:"white",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round",shadowColor:"black",shadowBlur:10,shadowOffsetX:10,shadowOffsetY:10,shadowOpacity:.5}),D=new Dl["default"].Text({text:"",fontFamily:"Calibri",fontSize:15,padding:5,fill:"black"}),P=Object(v["g"])([]),T=Object(v["g"])([]),E=Object(v["g"])("darkgray"),B=Object(v["a"])((function(){return e.background?e.background:"black"})),q=Object(v["a"])((function(){return e.heatmap?e.heatmap:"jet"})),N=Object(v["g"])([]),L=Object(v["g"])(""),G=Object(v["g"])(null),$=Object(v["g"])([]),z=Object(v["a"])((function(){return e.lasso})),V=Object(v["a"])((function(){return e.rect})),W=Object(v["g"])(!1),H=Object(v["g"])({x:0,y:0,points:[],opacity:.8,closed:!0,fill:"white",stroke:"green",strokeWidth:1}),J=Object(v["g"])({x:0,y:0,width:0,height:0,opacity:.8,fill:"white",stroke:"green",strokeWidth:1,endPointx:0,endPointy:0}),X=Object(v["g"])(),Q=Object(v["g"])(),Y=Object(v["g"])("white"),K=Object(v["g"])([]),Z=Object(v["g"])([]),ee=Object(v["g"])(0),te=Object(v["g"])(!1),ae=Object(v["g"])({}),ne=Object(v["a"])((function(){return e.clickedCluster})),re=Object(v["a"])((function(){return e.checkBoxCluster})),ie=Object(v["a"])((function(){return e.antiKey})),ue=Object(v["a"])((function(){return e.indFlag})),le=Object(v["g"])({}),se=Object(v["g"])({}),oe=Object(v["g"])({}),ce=Object(v["g"])(0),de=Object(v["g"])(0),ve=Object(v["g"])(0),pe=Object(v["g"])(0),fe=Object(v["g"])([]),ge=Object(v["a"])((function(){return e.geneOmotif}));function me(e){y.value.draggable=e}function he(){return be.apply(this,arguments)}function be(){return be=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=document.querySelector("#stageParentDualAtac"),t){e.next=3;break}return e.abrupt("return");case 3:a=t.offsetWidth,n=t.offsetHeight,y.value.width=a,y.value.height=n;case 7:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function _e(e){var t=m.value.filter((function(t){return t!==e.name}));m.value=t}function we(){S.a.each(P.value,(function(e,t){P.value[t].fill=e.originalColor,P.value[t].stroke=e.originalColor})),A.value=""}function xe(e,t){var a=!1;if(z)for(var n=Object(Lr["a"])(e,2),r=n[0],i=n[1],u=0,l=t.length-1;u<t.length;l=u+0,u+=1){var s=Object(Lr["a"])(t[u],2),o=s[0],c=s[1],d=Object(Lr["a"])(t[l],2),v=d[0],p=d[1],f=c>i!==p>i&&r<(v-o)*(i-c)/(p-c)+o;f&&(a=!a)}if(V){var g=Object(Lr["a"])(e,2),m=g[0],h=g[1],b=X;m>=b.value[0].x&&m<=b.value[0].endPointx&&h>=b.value[0].y&&h<=b.value[0].endPointy&&(a=!0)}return a}function ye(){K.value=[];var e=function(e){var t=!1;return void 0!==X.value&&X.value.forEach((function(a,n){xe(e,st(a.points,2))&&(t=!0)})),t},t=P.value.map((function(t){return e([t.x,t.y])})),a=t.filter((function(e){return e})).length;if(ee.value=a,a<1)return Z.value=[],void we();S.a.each(t,(function(e,t){var a;e?(a="white"===B.value?"darkgrey":"white",K.value.push(t),P.value[t].fill=a,P.value[t].stroke=a):(P.value[t].fill=P.value[t].originalColor,P.value[t].stroke=P.value[t].originalColor)}))}function Oe(e){"darkgrey"===B.value?E.value="white":E.value="darkgrey",S.a.each(P.value,(function(t,a){e.includes(t.cluster)?(P.value[a].fill=t.originalColor,P.value[a].stroke=t.originalColor):(P.value[a].fill=E.value,P.value[a].stroke=E.value)})),A.value=e,R.value=!0}function je(e,t){for(var a=[],n=5,r=(e-t)/(n-1),i=0;i<n;i+=1)a.push(parseFloat((t+r*i).toFixed(2)));return a}function Re(){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,s,o,c,d,v,p,f,g,h,_,w,x,k,A,F,M,D,U,B,G;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==b.value&&void 0!==b.value.spatial){e.next=2;break}return e.abrupt("return");case 2:if(R.value=!1,a=[],N.value=[],n=[],r=[],{},i=S.a.uniq(b.value.spatial.map((function(e){return e[0]}))).length,l.value)for(s="linear-gradient(to right,",S.a.each(q.value,(function(e,t){n.push(e),s+="".concat(e,",")})),o=s.slice(0,-1),o+=")",L.value=o,c=64,d=Object(Fs["rainbow"])(),d.setNumberRange(1,c),d.setSpectrum.apply(d,n),v=1;v<=c;v+=1)p="#",r.push(p+=d.colourAt(v));else u=Bi()({colormap:q.value,nshades:3*i,format:"hex",alpha:1}),u.forEach((function(e,t){t%3===0&&n.push(u[t+1])})),r=Bi()({colormap:q.value,nshades:64,format:"hex",alpha:1}),L.value="linear-gradient(to right, ".concat(r[0],", ").concat(r[16],", ").concat(r[32]," , ").concat(r[48],", ").concat(r[63],")");T.value=n,f=y.value,g=f.width,h=f.height,_=Math.min(g/(ve.value-ce.value),h/(pe.value-de.value)),w=Math.min(g,h)/150*O.value,x=60,k=30,j.value||ue.value?(A=[],F=[],M=[],b.value.spatial.forEach((function(e,t){if(e[0].includes("C")){F.push(parseFloat(e[3])),M.push(parseFloat(e[4]));var r=e[1],i=e[2];e[1].includes("'")&&(r=e[1].replace(/'/g,"")),e[1].includes('"')&&(r=e[1].replace(/"/g,"")),e[2].includes("'")&&(i=e[2].replace(/'/g,"")),e[2].includes('"')&&(i=e[2].replace(/"/g,""));var u=r.split(","),l=Object(Lr["a"])(u,2),s=l[0],o=l[1],c=i.split(","),d=Object(Lr["a"])(c,2),v=d[0],p=d[1],f=parseFloat(s.slice(1)),g=parseFloat(o.slice(0,-1)),h=(parseFloat(v.slice(1)),parseFloat(p.slice(0,-1)),f-ce.value),b=g-de.value,y=/\d+/g,j=e[0],R=Number(j.match(y)[0])-1;A.push([h,b,e]);var C={id:rt(),x:h*O.value*_+x,y:b*O.value*_+k,ogx:h,ogy:b,radius:w,originalColor:n[R],fill:n[R],stroke:n[R],strokeWidth:1,cluster:e[0],total:0,inactive:!1,hitStrokeWidth:4*w,genes:{}};m.value.forEach((function(e,a){C.genes[e]=parseFloat(fe.value[a][t])})),C.total=S.a.sum(Object.values(C.genes)),a.push(C)}})),j.value?t.emit("spatialCircleData",[F,M]):t.emit("spatialCircleData",a)):(D=[],b.value.spatial.forEach((function(e,t){if(e[0].includes("C")){var r=e[1],i=e[2];e[1].includes("'")&&(r=e[1].replace(/'/g,"")),e[1].includes('"')&&(r=e[1].replace(/"/g,"")),e[2].includes("'")&&(i=e[2].replace(/'/g,"")),e[2].includes('"')&&(i=e[2].replace(/"/g,""));var u=r.split(","),l=Object(Lr["a"])(u,2),s=l[0],o=l[1],c=i.split(","),d=Object(Lr["a"])(c,2),v=d[0],p=d[1],f=parseFloat(s.slice(1)),g=parseFloat(o.slice(0,-1)),h=(parseFloat(v.slice(1)),parseFloat(p.slice(0,-1)),f-ce.value),b=g-de.value,y=/\d+/g,j=e[0],R=Number(j.match(y)[0])-1,C={id:rt(),x:h*O.value*_+x,y:b*O.value*_+k,ogx:h,ogy:b,radius:w,originalColor:n[R],fill:n[R],stroke:n[R],strokeWidth:1,cluster:e[0],total:0,inactive:!1,genes:{}};m.value.forEach((function(e,a){C.genes[e]=parseFloat(fe.value[a][t])})),C.total=S.a.sum(Object.values(C.genes)),D.push(C.total),a.push(C)}})),I.value=-1e4,C.value=1e4,U=-1e4,B=1e7,G=Ts(r,D,m.value.length),a.forEach((function(e,t){var n=D[t]+12*m.value.length>0?G[t]:E.value;I.value=D[t]>I.value?D[t]:I.value,C.value=D[t]<C.value?D[t]:C.value,a[t].originalColor=n,a[t].fill=n,a[t].stroke=n;var r=e.total/m.value.length;r>U&&(U=r),r<B&&(B=r)})),N.value=je(U,B),t.emit("spatialCircleData",a)),ue.value&&(t.emit("singleCircleData",{coords:a,intense:r}),t.emit("sendColorBar",{color:L.value,maxMin:[ce.value,de.value,ve.value,pe.value],tixelColor:r})),P.value=a,ye(),te.value=!1;case 20:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var Se=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.getTaskStatus(t);case 4:o.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ie(){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(k["a"])(regeneratorRuntime.mark((function n(){var u,l,s,o,c,d,v,p,f,m,h,_;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null!==b.value){n.next=34;break}if(b.value={},e.query.public){n.next=11;break}return console.log(r.value),u="data/".concat(r.value,"/h5/data.csv"),n.next=7,a.value.getCsvFile({params:{filename:u}});case 7:l=n.sent,b.value.spatial=l,n.next=23;break;case 11:return n.next=13,a.value.getSpatialDataByToken(i.value,0);case 13:return s=n.sent,b.value.spatial=s,n.next=17,a.value.getGeneMotifNamesByToken(i.value,1);case 17:return o=n.sent,b.value.gene=o,n.next=21,a.value.getGeneMotifNamesByToken(i.value,2);case 21:c=n.sent,b.value.motif=c;case 23:console.log(b.value),d=[],v=[],p={},b.value.spatial.forEach((function(e,t){if(e[0].includes("C")){var a=e[1],n=e[2];e[1].includes("'")&&(a=e[1].replace(/'/g,"")),e[1].includes('"')&&(a=e[1].replace(/"/g,"")),e[2].includes("'")&&(n=e[2].replace(/'/g,"")),e[2].includes('"')&&(n=e[2].replace(/"/g,""));var r=a.split(","),i=Object(Lr["a"])(r,2),u=i[0],l=i[1],s=n.split(","),o=Object(Lr["a"])(s,2),c=o[0],f=o[1],g=parseFloat(u.slice(1)),m=parseFloat(l.slice(0,-1));parseFloat(c.slice(1)),parseFloat(f.slice(0,-1));d.push(g),v.push(m),Object.keys(p).includes(e[0])?p[e[0]]+=1:p[e[0]]=1}})),Object.keys(p).forEach((function(e,t){var a="C".concat(t+1);ae.value[a]=p[a]})),ce.value=Math.min.apply(Math,d),de.value=Math.min.apply(Math,v),ve.value=Math.max.apply(Math,d),pe.value=Math.max.apply(Math,v),t.emit("totalClust",ae.value);case 34:if(Re(),e.query.public||null!==b.value.gene&&void 0!==b.value.gene){n.next=46;break}return f="data/".concat(r.value,"/h5/geneNames.txt"),n.next=39,a.value.getGeneMotifNames(f);case 39:return m=n.sent,b.value.gene=m,h="data/".concat(r.value,"/h5/motifNames.txt"),n.next=44,a.value.getGeneMotifNames(h);case 44:_=n.sent,b.value.motif=_;case 46:g.value=!1,"gene"===ge.value?t.emit("totalGM",b.value.gene):t.emit("totalGM",b.value.motif);case 48:case"end":return n.stop()}}),n)}))),Ae.apply(this,arguments)}function Fe(){return Me.apply(this,arguments)}function Me(){return Me=Object(k["a"])(regeneratorRuntime.mark((function n(){var r,u,l,s,v,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.value){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,!(K.value.length>0)){n.next=39;break}if(G.value=null,te.value=!0,r=d.value,u=p.value,l=[i.value,K.value,ie.value],s={},!e.query.public){n.next=16;break}return n.next=13,a.value.postPublicTask(r,l,s,u,"gene"===ge.value?3:4);case 13:n.t0=n.sent,n.next=19;break;case 16:return n.next=18,a.value.postTask(r,l,s,u);case 18:n.t0=n.sent;case 19:return v=n.t0,n.next=22,Se(v._id);case 22:if("SUCCESS"===o.value.status||"FAILURE"===o.value.status){n.next=31;break}return"PROGRESS"===o.value.status&&(G.value="".concat(o.value.progress,"% - ").concat(o.value.position)),n.next=26,new Promise((function(e){c.value=window.setTimeout(e,1e3)}));case 26:return c.value=null,n.next=29,Se(v._id);case 29:n.next=22;break;case 31:if("SUCCESS"===o.value.status){n.next=34;break}return ke.dispatch({text:"Worker failed in MultSingleview.vue",options:{right:!0,color:"error"}}),n.abrupt("return");case 34:G.value=o.value.status,f=o.value.result,t.emit("highlightedId",{ids:K.value,genes:f.top_selected}),n.next=41;break;case 39:return n.next=41,he();case 41:n.next=48;break;case 43:n.prev=43,n.t1=n["catch"](2),console.log(n.t1),g.value=!1,ke.dispatch({text:n.t1,options:{right:!0,color:"error"}});case 48:te.value=!1;case 49:case"end":return n.stop()}}),n,null,[[2,43]])}))),Me.apply(this,arguments)}function De(){return Pe.apply(this,arguments)}function Pe(){return Pe=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,i,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="gene"===ge.value?"data/".concat(r.value,"/h5/geneSummation.txt"):"data/".concat(r.value,"/h5/motifSummation.txt"),i="gene"===ge.value?b.value.gene:b.value.motif,u=m.value.map((function(e){return i.indexOf(e)})),e.next=5,null===(t=a.value)||void 0===t?void 0:t.getSummation(n,u);case 5:l=e.sent,s=[],l.forEach((function(e,t){s.push(e.split(","))})),fe.value=s;case 9:case"end":return e.stop()}}),e)}))),Pe.apply(this,arguments)}function Te(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.refs.konvaStageDualAtac.getNode().getRelativePointerPosition(),r=a.target.attrs,F.position({x:n.x,y:n.y}),i="Cluster: ".concat(r.cluster),m.value.length>0&&(i="".concat(i,"\nAvg: ").concat((r.total/m.value.length).toFixed(3)),S.a.forIn(r.genes,(function(e,t){i="".concat(i,"\n").concat(t,": ").concat(e)}))),D.text(i),F.show(),!j.value||A.value.includes(r.cluster)||z.value||V.value||(u=r.cluster,Oe([u]));case 8:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Ue(e){return Be.apply(this,arguments)}function Be(){return Be=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,r,i,u,l,s,o,c,d,v,p,f,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={x:a.evt.layerX,y:a.evt.layerY},r=t.refs.konvaStageDualAtac.$el.offsetWidth,i=t.refs.konvaStageDualAtac.$el.offsetHeight,u=t.refs.konvaStageDualAtac.$children[0].$children[0].getNode().absolutePosition(),l=t.refs.konvaStageDualAtac.$children[0].$children[49].getNode().absolutePosition(),s=t.refs.konvaStageDualAtac.$children[0].$children[P.value.length-50].getNode().absolutePosition(),o=t.refs.konvaStageDualAtac.$children[0].$children[P.value.length-1].getNode().absolutePosition(),c=[u,l,s,o],d=1e3,v=0,p=0,f=1e3,c.forEach((function(e,t){e.x>p&&(p=e.x>r?r-2:e.x),e.x<d&&(d=e.x<0?15:e.x),e.y>v&&(v=e.y>i?i-2:e.y),e.y<f&&(f=e.y<0?15:e.y)})),g=[d,f,p,v],R.value=!1,F.hide(),z.value||V.value||!(n.x<g[0]||n.y<g[1]||n.x>g[2]||n.y>g[3])||we();case 17:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function qe(){X.value=[],H.value.points=[],J.value={x:0,y:0,id:1,width:0,height:0,points:[],opacity:.6,fill:"",stroke:"green",strokeWidth:3,endPointx:0,endPointy:0},ye()}function Ne(e){if(z.value&&(qe(),W.value=!0,H.value={x:0,y:0,id:rt(),points:[],opacity:.6,listening:!0,closed:!0,fill:"",stroke:"green",strokeWidth:3},H.value.points=[]),V.value){qe();var a=t.refs.konvaStageDualAtac.getNode().getRelativePointerPosition();J.value={x:a.x,y:a.y,id:rt(),width:0,height:0,points:[],opacity:.6,fill:"",stroke:"green",strokeWidth:3,endPointx:0,endPointy:0},ye(),W.value=!0}}function Le(e){if(z.value&&W.value){var a=t.refs.konvaStageDualAtac.getNode().getRelativePointerPosition();H.value.points.push(Math.round(a.x)),H.value.points.push(Math.round(a.y)),t.refs.drawingLayer.getNode().batchDraw()}if(V.value&&W.value){var n=t.refs.konvaStageDualAtac.getNode().getRelativePointerPosition(),r=Math.abs(n.x-J.value.x),i=Math.abs(n.y-J.value.y);J.value.width=r,J.value.height=i,J.value.endPointx=n.x,J.value.endPointy=n.y,t.refs.drawingLayerRect.getNode().batchDraw()}}function Ge(e){z.value&&(W.value=!1,X.value.push(ot(H.value)),H.value.points=[],ye(),ee.value>0&&Fe()),V.value&&(W.value=!1,X.value.push(ot(J.value)),ye(),ee.value>0&&Fe())}function $e(e){return ze.apply(this,arguments)}function ze(){return ze=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Oe([t.name]);case 1:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ve(e){n.value=e}function We(){Re()}function He(e){var a=t.refs.konvaStageDualAtac.getNode(),n={x:0,y:0};a.position(n),O.value=.75}function Je(){he(),Re()}return Object(v["h"])(B,(function(e){(z.value||V.value)&&ye()})),Object(v["h"])(ue,(function(e){m.value.length>0&&Re()})),Object(v["h"])(z,(function(e){me(!e),qe(),z.value||we()})),Object(v["h"])(V,(function(e){me(!e),qe(),V.value||we()})),Object(v["h"])(ne,(function(e){z.value||V.value||$e({name:"".concat(e[0])})})),Object(v["h"])(re,(function(e){z.value||V.value||Oe(e)})),Object(v["h"])(q,(function(e){Y.value="picnic"===e?"black":"bone"===e?"brown":"hot"===e?"grey":"white",Re()})),Object(v["h"])(u,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.value=a,e.query.public&&(b.value=null,g.value=!0,Ie());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(v["h"])(r,function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null===a||e.query.public||(b.value=null,ae.value={},g.value=!0,Ie());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Object(v["h"])(ge,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==b.value&&(g.value=!0,Ie(),m.value=[],g.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(O,(function(){We()})),Object(v["h"])(m,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||0!==m.value.length){e.next=7;break}j.value=!0,N.value=[],fe.value=[],Re(),e.next=12;break;case 7:return j.value=!1,e.next=10,De();case 10:qe(),Re();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(v["h"])(h,(function(e){var t=e;"undefined"===typeof e&&(t=[]),"string"===typeof e&&(t=[t]),m.value=t})),Object(v["h"])(g,(function(e){t.emit("loading_value",e)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ms;case 2:null!==r.value&&Ie(),F.add(M),F.add(D),t.refs.annotationLayerDualAtac.getNode().add(F);case 6:case"end":return e.stop()}}),e)})))),{get_uuid:rt,scale:O,filenameGene:i,filenameFromParent:u,headers:Ds,selected:f,loading:g,selectedFiles:n,onFilesChanged:Ve,clusterHeaders:Ps,selectedGenes:m,remove:_e,konvaConfigLeft:y,circlesSpatial:P,isHighlighted:R,onResize:Je,mouseMoveOnSpatial:Te,mouseOutOnSpatial:Ue,isClusterView:j,clusterItems:_,clusterColors:T,inactiveColor:E,backgroundColor:B,updateCircles:Re,mouseOverClusterItem:$e,heatMap:q,stepArray:N,colorBarmap:L,highestCount:I,lowestCount:C,geneNames:$,isDrawing:z,isDrawingRect:V,mouseDownOnStageLeft:Ne,mouseMoveOnStageLeft:Le,mouseUpOnStageLeft:Ge,polygon:H,regions:X,rectangle:J,removeRegions:qe,reScale:We,resetScaleAndPos:He,runId:r,colorbarText:Y,highlightIds:K,lassoSide:Q,highlightCount:ee,spatialData:b,spatialRun:te,colorFromParent:l,clickedClusterFromParent:ne,totalInClust:ae,averageInd:ue,retrieveData:Ie,geneObject:le,motifObject:se,tixelObject:oe,minX:ce,minY:de,maxX:ve,maxY:pe,geneMotif:ge,tableKeyFromParent:ie,geneSummation:fe,typeOfPlot:s}}}),Us=Es,Bs=(a("56c0"),Object(te["a"])(Us,Is,As,!1,null,"143cd2ec",null)),qs=Bs.exports,Ns=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Ls=[{text:"ID",value:"id"}],Gs=[{text:"Cluster",value:"name"}],$s=[{text:"",value:"background"}],zs=[{text:"",value:"heat"}],Vs=[{background:"black"},{background:"white"},{background:"darkgrey"}],Ws=[{heat:"jet"},{heat:"hot"},{heat:"inferno"},{heat:"picnic"},{heat:"bone"},{heat:"custom"}],Hs=[function(e){return e.startsWith("#")||"Must be of Hex Code"}],Js=Object(v["c"])({name:"AtlasXplore",components:{"table-component":Wu,"search-component":qu,TrackBrowser:el,BarChart:hl,LoadingPage:kl,HistogramGraph:Al,Singleview:ql,MultiSingleview:qs},props:["query"],setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return U.state.client})),r=Object(v["a"])((function(){return t.root.$route})),i=Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.workers})),u=Object(v["a"])((function(){return U.state.xploreData})),l=Object(v["g"])([]),s=Object(v["g"])(null),c=Object(v["g"])(null),d=Object(v["g"])(null),p=Object(v["g"])(null),f=Object(v["g"])(null),g=Object(v["g"])({}),m=Object(v["g"])(),h=Object(v["g"])(),b=Object(v["g"])([]),_=Object(v["g"])(!1),w=Object(v["g"])([]),x=Object(v["g"])([]),y=Object(v["g"])([]),O=Object(v["g"])(!1),j=Object(v["g"])([]),R=window.innerWidth,C=window.innerHeight,I=Object(v["g"])({x:0,y:0,width:R,height:C,draggable:!0}),A=Object(v["g"])({x:0,y:0,width:R,height:C,draggable:!0}),F=Object(v["g"])(.75),M=Object(v["g"])(.75),D=Object(v["g"])(!0),P=Object(v["g"])(!0),T=Object(v["g"])(!1),E=Object(v["g"])(0),B=Object(v["g"])(1e4),q=Object(v["g"])(""),N=Object(v["g"])(!1),L=Object(v["g"])({type:"",species:"",assay:"",organ:"",condition:"",date:"",runid:"",ngsid:""}),G=Object(v["g"])("black"),$=Object(v["g"])("jet"),z=Object(v["g"])(),V=Object(v["g"])(null),W=Object(v["g"])(),H=Object(v["g"])(null),J=Object(v["g"])([]),X=Object(v["g"])([]),Q=Object(v["g"])(!1),Y=Object(v["g"])(!1),K=Object(v["g"])(0),Z=Object(v["g"])(!1),ee=Object(v["g"])([!1]),te=Object(v["g"])(!1),ae=Object(v["g"])(null),ne=Object(v["g"])(!1),re=Object(v["g"])(!1),ie=Object(v["g"])(!1),ue=Object(v["g"])(!1),le=Object(v["g"])(!1),se=Object(v["g"])(),oe=Object(v["g"])("black"),ce=Object(v["g"])("black"),de=Object(v["g"])("white"),ve=Object(v["g"])([]),pe=Object(v["g"])([]),fe=Object(v["g"])(0),ge=Object(v["g"])([""]),me=Object(v["g"])("gene"),he=Object(v["g"])(!0),be=Object(v["g"])(!1),_e=Object(v["g"])(!1),we=Object(v["g"])(!1),xe=Object(v["g"])(!1),ye=Object(v["g"])(!1),Oe=Object(v["g"])("hidden"),je=Object(v["g"])(!1),Re=Object(v["g"])({}),Ce=Object(v["g"])({}),Se=Object(v["g"])({}),Ie=Object(v["g"])({}),Ae=Object(v["g"])(),Fe=Object(v["g"])(),Me=Object(v["g"])(),De=Object(v["g"])(""),Pe=Object(v["g"])(""),Te=Object(v["g"])(!1),Ee=Object(v["g"])([]),Ue=Object(v["g"])([]),Be=Object(v["g"])([]),qe=Object(v["g"])(""),Ne=Object(v["g"])({}),Le=Object(v["g"])([]),Ge=Object(v["g"])({}),$e=Object(v["g"])(),ze=Object(v["g"])(),Ve=Object(v["g"])(!1),We=Object(v["g"])({}),He=Object(v["g"])(1),Je=Object(v["g"])(!1),Xe=Object(v["g"])([]),Qe=Object(v["g"])([]),et=Object(v["g"])({}),tt=Object(v["g"])([!1]);function at(e){var t=lt(r,e),n=a.resolve(t).href!==r.value.fullPath;n&&a.push(t)}function nt(){var e=t.refs.peakContainer;e&&(Fe.value=e.$el.offsetWidth-2)}function rt(){null===n.value.user?a.push("/visualization"):a.push("/")}function it(e){return e.match("[A-Z]+[0-9]+")[0]}function ut(e){if(!e.includes("D"))return"";var t=e.replace(/D0+/i,"D");return t}function st(e){I.value.draggable=e,A.value.draggable=e}function ot(e){_.value=e}function ct(e){ve.value=e.ids,pe.value=e.genes}function dt(e){Ge.value=e}function vt(e){ze.value=e}function pt(e){$e.value=e}function ft(){ke.dispatch({text:"Public link copied to clipboard",options:{left:!0,color:"success"}})}function gt(e){navigator.clipboard.writeText(e)}function mt(e){if(0===Qe.value.length)Qe.value.push(e);else if(Qe.value.includes(e)){var t=Qe.value.indexOf(e);t>-1&&Qe.value.splice(t,1)}else Qe.value.push(e);console.log(Qe.value)}function ht(e){De.value=e}function bt(e){if(-1!==e.indexOf("#")){var t=e.split("#")[0],a=e.split("#")[1],n="#";a.length>=6&&(n+=a,Ce.value[t]=n)}}function _t(e,t){var a="string"!==typeof t.srcElement._value?"":t.srcElement._value;Ie.value[e]=[a]}function wt(){ye.value=!1;var e={};S.a.each(Se.value,(function(t,a){e[a]=t})),Ie.value=e}function xt(){ye.value=!1;var e={};S.a.each(Ie.value,(function(t,a){e[a]=t})),Se.value=e}function yt(e){if(Le.value.includes(e)){var t=Le.value.indexOf(e);t>-1&&Le.value.splice(t,1)}else Le.value.push(e)}function kt(){if(xe.value=!1,Re.value!==Ce.value){Te.value=!0;var e={},a={};S.a.each(Ce.value,(function(t,n){e[n]=t,a[n]=t})),$.value=a,Re.value=e,"gene"===me.value&&D.value&&!Je.value&&(_.value=!0,t.refs.trackbrowser.reload(p.value,Re.value),_.value=!1)}}function Ot(){xe.value=!1;var e={};S.a.each(Re.value,(function(t,a){e[a]=t})),Ce.value=e}function jt(){le.value=!1;var e=ve.value.join(),t=pe.value.join(),a="".concat(e,"\n\n").concat(t),n=document.createElement("a"),r=new Blob([a],{type:"text;charset=utf-8;"}),i=URL.createObjectURL(r);n.href=i,n.setAttribute("download","".concat(p.value,"/Selection.txt")),n.click()}function Rt(e){if(we.value=!1,Ve.value){var t=document.getElementById("screenCaptureSingle");Mu()(t,{backgroundColor:e}).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;var n=x.value.join();a.setAttribute("download","".concat(p.value,"/").concat(n,"_single.png")),a.click()}))}else{var a=document.getElementById("screenCapture");Mu()(a,{backgroundColor:e}).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;var n=x.value.join();a.setAttribute("download","".concat(p.value,"/").concat(n,".png")),a.click()}))}if(be.value){var n=document.getElementById("capturePeak");Mu()(n,{backgroundColor:e}).then((function(e){var t,a=e.toDataURL("image/png"),n=document.createElement("a");n.href=a,t="motif"===me.value?"".concat(p.value,"_").concat(y.value[0],"_seqlogo"):"".concat(p.value,"_").concat(y.value[0],"_peaks"),n.setAttribute("download","".concat(t,".png")),n.click()}))}if(_e.value){var r=document.getElementById("captureHisto");Mu()(r,{backgroundColor:e}).then((function(e){var t=e.toDataURL("image/png"),a=document.createElement("a");a.href=t;var n=x.value.join();a.setAttribute("download","".concat(p.value,"/").concat(n,"_histogram.png")),a.click()}))}}function Ct(e){!w.value.includes(e)&&b.value.length>0&&(ge.value=[e],D.value=!1)}function St(e){"Anti"!==e?Ee.value=[e]:He.value*=-1}function It(e){return At.apply(this,arguments)}function At(){return At=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:b.value=t.map((function(e){return{name:e}})),_.value=!1;case 4:case"end":return e.stop()}}),e)}))),At.apply(this,arguments)}function Ft(e){var t=w.value.filter((function(t){return t!==e.name}));w.value=t}function Mt(e){G.value=e.background,ne.value=!1}function Dt(){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,u,l,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O.value){e.next=2;break}return e.abrupt("return");case 2:if(T.value=!1,a={},n={},r={},i={},u=[],l=Object.keys(Ne.value).length,!Te.value){for(s=Bi()({colormap:$.value,nshades:3*l,format:"hex",alpha:1}),s.forEach((function(e,t){t%3===0&&u.push(s[t+1])})),o=0;o<u.length;o+=1)c="C".concat(o+1),a[c]=u[o],i[c]=u[o],n[c]="",r[c]="";Re.value=a,Ce.value=i,"C1"in Se.value||(Se.value=n,Ie.value=r)}"gene"!==me.value||!D.value||Q.value||Y.value||Je.value||t.refs.trackbrowser.reload(p.value,Re.value);case 11:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}function Tt(){return Et.apply(this,arguments)}function Et(){return Et=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=[],a=[],n=Object.keys(Ne.value),j.value=n.map((function(e){return{name:e}})),a.push({text:"Anti",value:"id",sortable:!1,key:He.value}),r=0;r<j.value.length;r+=1)a.push({text:j.value[r].name,value:j.value[r].name,sortable:!1});X.value=a,S.a.each(We.value[me.value][He.value],(function(e,a){var n={},r=[],i=[];r.push("id"),i.push(a);for(var u=0;u<j.value.length;u+=1)r.push(j.value[u].name),i.push(e[u]);for(var l=0;l<r.length;l+=1)n[r[l]]=i[l];t.push(n)})),J.value=t,K.value=j.value.length;case 10:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Ut(){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O.value){e.next=8;break}return _.value=!0,O.value=!0,Tt(),e.next=6,Dt();case 6:nt(),_.value=!1;case 8:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function qt(e){Ne.value=e,Le.value=Object.keys(Ne.value).map((function(e){return e})),Object.keys(We.value).length>0&&Ut()}function Nt(){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{filename:"study/S1/h5/topTen_genes.json"}},i={params:{filename:"study/S1/h5/topTen_motifs.json"}},e.next=4,null===(t=n.value)||void 0===t?void 0:t.getJsonFile(r);case 4:return u=e.sent,e.next=7,null===(a=n.value)||void 0===a?void 0:a.getJsonFile(i);case 7:l=e.sent,We.value.gene=u,We.value.motif=l,O.value=!1,Object.keys(Ne.value).length>1&&Ut();case 12:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Gt(e){$.value=e,re.value=!1,Te.value=!1,de.value="picnic"===e?"black":"jet"===e||"inferno"===e?"white":"hot"===e?"grey":"brown",Dt()}var $t=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.value.getTaskStatus(t);case 4:z.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zt(){return Vt.apply(this,arguments)}function Vt(){return Vt=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value){e.next=2;break}return e.abrupt("return");case 2:m.value="",_.value=!0,t={NG00547:1,NG00877:1},a=Object.keys(t).length<9?9:Object.keys(t).length,r=Bi()({colormap:"phase",nshades:3*a,format:"hex",alpha:1}),i={},u=[],l=0,S.a.each(t,(function(e,t){u.push({runID:t,group:e,clicked:!1});var a=0===l?0:3*(l+1);Object.keys(i).includes(e)||(i[e]=r[a],l+=1)})),et.value=i,g.value=u,_.value=!1;case 14:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function Wt(){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(O.value){t.next=2;break}return t.abrupt("return");case 2:try{e.query.public||("motif"===me.value?(a=s.value,s.value=a.replace(/genes/i,"motifs")):(n=s.value,s.value=n.replace(/motifs/i,"genes")))}catch(r){console.log(r)}case 3:case"end":return t.stop()}}),t)}))),Ht.apply(this,arguments)}function Jt(){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Xe.value=Qe.value.map((function(e){return e})),Nt();case 2:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Qt(){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,r,i,u,l,o,c,d,v,g,m=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=m.length>0&&void 0!==m[0]?m[0]:p.value,n.value){t.next=3;break}return t.abrupt("return");case 3:if(s.value){t.next=5;break}return t.abrupt("return");case 5:if(t.prev=5,e.query.public){t.next=19;break}return r=Ye(),i=null===r||void 0===r?void 0:r.token.split("JWT ")[1],u="data/".concat(a,"/h5/geneNames.txt"),l="data/".concat(a,"/h5/motifNames.txt"),o="data/".concat(a,"/h5/data.csv"),c=s.value,t.next=15,n.value.encodeLink({args:[o,u,l,c.replace(/motifs/i,"genes"),c.replace(/genes/i,"motifs"),"data/".concat(p.value,"/h5/obj/motifs.csv")],meta:{run_id:a,species:L.value.species,tissue:L.value.organ,assay:L.value.assay}});case 15:d=t.sent,v=d.encoded,g=window.location.host,f.value="https://".concat(g,"/public?component=PublicGeneViewer&run_id=").concat(v,"&public=true&token=JWT%20").concat(i);case 19:t.next=26;break;case 21:t.prev=21,t.t0=t["catch"](5),console.log(t.t0),_.value=!1,ke.dispatch({text:"".concat(t.t0),options:{right:!0,color:"error"}});case 26:case"end":return t.stop()}}),t,null,[[5,21]])}))),Yt.apply(this,arguments)}function Kt(){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,r,i,u,l,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a="data",r="gene.seq_logo",i="joshua_gene",u=[e.query.public?s.value:"".concat(a,"/").concat(p.value,"/h5/obj/motifs.csv"),y.value[0]],l={},!e.query.public){t.next=12;break}return t.next=9,n.value.postPublicTask(r,u,l,i,5);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,n.value.postTask(r,u,l,i);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,$t(o._id);case 18:if("SUCCESS"===z.value.status||"FAILURE"===z.value.status){t.next=27;break}return"PROGRESS"===z.value.status&&(H.value="".concat(z.value.progress,"% - ").concat(z.value.position)),t.next=22,new Promise((function(e){V.value=window.setTimeout(e,1e3)}));case 22:return V.value=null,t.next=25,$t(o._id);case 25:t.next=18;break;case 27:"SUCCESS"!==z.value.status?(ke.dispatch({text:"Worker failed in AtlasXplore",options:{right:!0,color:"error"}}),_.value=!1):(ke.dispatch({text:"Motif ".concat(y.value[0]," found"),options:{right:!0,color:"success"}}),H.value=z.value.status,c=z.value.result,Ae.value=c),t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](0),console.log(t.t1);case 33:case"end":return t.stop()}}),t,null,[[0,30]])}))),Zt.apply(this,arguments)}function ea(e){return ta.apply(this,arguments)}function ta(){return ta=Object(k["a"])(regeneratorRuntime.mark((function t(a){var r,i,u,l,o,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=37;break}if(_.value=!0,r="gene.compute_cell_type",i="joshua_gene",u=[s.value,a],l={},!e.query.public){t.next=12;break}return t.next=9,n.value.postPublicTask(r,u,l,i,"gene"===me.value?3:4);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,n.value.postTask(r,u,l,i);case 14:t.t0=t.sent;case 15:return o=t.t0,t.next=18,$t(o._id);case 18:if("SUCCESS"===z.value.status||"FAILURE"===z.value.status){t.next=27;break}return"PROGRESS"===z.value.status&&(H.value="".concat(z.value.progress,"% - ").concat(z.value.position)),t.next=22,new Promise((function(e){V.value=window.setTimeout(e,1e3)}));case 22:return V.value=null,t.next=25,$t(o._id);case 25:t.next=18;break;case 27:if("SUCCESS"===z.value.status){t.next=31;break}return ke.dispatch({text:"Worker failed for CellType",options:{right:!0,color:"error"}}),_.value=!1,t.abrupt("return");case 31:H.value=z.value.status,c=z.value.result,d={},S.a.each(Ie.value,(function(e,t){Object.keys(c).includes(t)?d[t]=c[t]:d[t]=["Undefined"]})),Ie.value=d,_.value=!1;case 37:case"end":return t.stop()}}),t)}))),ta.apply(this,arguments)}function aa(){var e=t.refs.file.files[0],a=new FileReader;e.type.includes("csv")?(a.onload=function(e){Ue.value=[e.target.result]},a.onerror=function(e){return console.log(e)},a.readAsText(e)):ke.dispatch({text:"Wrong file type must be csv",options:{right:!0,color:"error"}})}function na(e){var t=e.target;t.value=""}function ra(){return ia.apply(this,arguments)}function ia(){return ia=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,l,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:p.value,p.value){e.next=3;break}return e.abrupt("return");case 3:if(console.log(u.value),!u.value||!u.value.results_folder_path.includes(t)){e.next=14;break}console.log(u.value),L.value.organ=u.value.organ,L.value.species=u.value.species,a=Object(Lr["a"])(u.value.assay,1),L.value.assay=a[0],L.value.type=u.value.tissue_type,L.value.runid=u.value.run_id,e.next=30;break;case 14:return e.next=16,null===(r=n.value)||void 0===r?void 0:r.get_info_from_run_id(p.value);case 16:i=e.sent,l=i[0],console.log(l),L.value.organ=l.organ_name,L.value.species=l.species,s=l.created_on.split(" "),o=Object(Lr["a"])(s,1),L.value.date=o[0],L.value.assay=l.assay,L.value.type=l.tissue_type,L.value.runid=l.run_id,L.value.ngsid=l.ngs_id,qe.value=Object.keys(l).includes("tissue_source")?l.tissue_source:l.group_name,"wt_dbit-seq"===L.value.assay&&(Je.value=!0);case 30:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function ua(e){return la.apply(this,arguments)}function la(){return la=Object(k["a"])(regeneratorRuntime.mark((function t(a){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n="data",e.query.public||(r="gene"===me.value?"".concat(n,"/").concat(a.id,"/h5/obj/genes.h5ad"):"".concat(n,"/").concat(a.id,"/h5/obj/motifs.h5ad"),s.value=r,c.value="",p.value=a.id,L.value.species="",at({component:"AtlasXplore",run_id:a.id}),w.value=[],he.value=!0,be.value=!1,_e.value=!1),te.value=!1,w.value=[],D.value=!0,Q.value=!1,Y.value=!1,$.value="jet",Te.value=!1,Se.value={},Ie.value={},He.value=1,O.value=!1,Je.value=!1,b.value=[],Qt(p.value),ra(p.value),Nt();case 18:case"end":return t.stop()}}),t)}))),la.apply(this,arguments)}function sa(e){return oa.apply(this,arguments)}function oa(){return oa=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return _.value=!0,e.next=3,n.value.getRunsCollaborator(t,!0);case 3:for(a=e.sent,Be.value=a,r=0;r<Be.value.length;r+=1)i={id:Be.value[r].ngs_id},g.value.push(i);case 6:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ca(e){return da.apply(this,arguments)}function da(){return da=Object(k["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(p.value=a.run_id,L.value.organ=a.tissue,"wt_dbit-seq"===a.assay&&(Je.value=!0),L.value.species=a.species,Nt(),!e.query||null!==p.value){t.next=9;break}if(!e.query.run_id){t.next=9;break}return t.next=9,ua({id:e.query.run_id});case 9:case"end":return t.stop()}}),t)}))),da.apply(this,arguments)}var va=o["default"].extend(qu),pa=Object(v["g"])(new va({vuetify:Au,propsData:{gene_list:b,gene_button:ge},created:function(){this.$on("changed",(function(e){w.value=e})),this.$on("avgind",(function(e){Ve.value=e})),this.$on("sentgenes",(function(e){D.value=!1,x.value=[],y.value=[],e.forEach((function(e,t){x.value.push(e)})),1===e.length&&(e.forEach((function(e,t){y.value.push(e)})),"motif"===me.value&&Kt())}))}}));Object(v["h"])(be,(function(e){Oe.value=e?"visible":"hidden"})),Object(v["h"])(me,(function(t){if(!Je.value){if(!e.query.public){var a=document.getElementById("geneMotifButton"),n=a.childNodes[0];"gene"===t?n.innerText="GENE":"motif"===t&&(n.innerText="MOTIF")}b.value=[],he.value=!0,be.value=!1,_e.value=!1,ue.value=!1,D.value=!0,w.value=[],ee.value=[!1],ge.value=[],x.value=[],y.value=[],Wt(),Tt()}})),Object(v["h"])(He,(function(e){he.value=!0,be.value=!1,_e.value=!1,ue.value=!1,D.value=!0,w.value=[],ee.value=[!1],ge.value=[],x.value=[],y.value=[],Tt()})),Object(v["h"])(Q,(function(e){st(!e),Q.value?oe.value="green":oe.value="black"})),Object(v["h"])(Y,(function(e){st(!e),Y.value?ce.value="green":ce.value="black"})),Object(v["h"])(w,(function(e){0===w.value.length?(D.value=!0,ee.value=[!1],y.value=[],x.value=[]):(Q.value=!1,Y.value=!1)})),Object(v["h"])(He,(function(e){he.value=!0,be.value=!1,_e.value=!1,ue.value=!1,D.value=!0,w.value=[],ee.value=[!1],ge.value=[],x.value=[],y.value=[]})),Object(v["h"])(ee,(function(e){var t=e[0];t||(D.value=!0,ge.value=[],je.value=!0)})),Object(v["h"])(xe,(function(e){e||(Pe.value="",De.value="")})),Object(v["h"])(tt,(function(e){console.log(e)})),Object(v["h"])(Ue,(function(e){var t=function(e){var t=e.toLowerCase(),a=t.charAt(0).toUpperCase()+t.slice(1);return a},a=e[0].split("\n"),n=a.map((function(e){return e.split(",")})),r=n.map((function(e){return Object(Cu["a"])({},e[0].replace(/[.\\/#!$%^&*;:{}=_`~()@'"\r\n]/g,""),e.slice(1,e.length))})),i={};i={},r.forEach((function(e,a){var n=Object.values(e),r=Object.keys(e);n.forEach((function(e,a){var n=e.filter((function(e){return e.length>1}));i[r[0]]=n.map((function(e){return t(e.replace(/[.,\\/#!$%^&*;:{}=_`~()@'"\r\n\s]/g,""))}))}))})),ea(i)}));var fa=Object(v["g"])([]),ga={text:"Run ID's",icon:"mdi-magnify",tooltip:"Run ID's",enabled:!0,click:function(){te.value=!te.value}},ma={text:"Metadata",icon:"mdi-filter-variant",tooltip:"Metadata",enabled:!0,disabled:_.value,click:function(){N.value=!N.value}},ha={text:me.value,icon:null,tooltip:"Gene/Motif",disabled:_.value,ref:"geneMotifButton",enabled:!0,click:function(){"gene"===me.value?me.value="motif":me.value="gene"}},ba={text:"Background Color",icon:"mdi-palette",tooltip:"Background Color",enabled:!0,click:function(){ne.value=!ne.value}},_a={text:"Heat Map",icon:"mdi-fire",tooltip:"HeatMap Color",enabled:!0,click:function(){re.value=!re.value}},wa={type:"component",name:"GeneAutoComplete",id:"geneac",enabled:!0,component:pa};function xa(){fa.value.push(ga,ma,ha,ba,_a,wa)}function ya(e,t){return ka.apply(this,arguments)}function ka(){return ka=Object(k["a"])(regeneratorRuntime.mark((function t(a,r){var i,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(fa.value.length<1&&(xa(),console.log(fa.value)),U.commit.setSubmenu(fa.value),e.query.public){t.next=6;break}return t.next=5,new Promise((function(e){return setTimeout(e,1e3)}));case 5:zt();case 6:if(!(e.query&&e.query.run_id&&e.query.public)){t.next=13;break}return t.next=9,null===(i=n.value)||void 0===i?void 0:i.decodeMetadata(e.query.run_id);case 9:u=t.sent,ca(u),l=e.query.run_id,s.value=l;case 13:pa.value.$mount("#geneac");case 14:case"end":return t.stop()}}),t)}))),ka.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ns;case 2:ya(e.query.run_id,!1);case 3:case"end":return t.stop()}}),t)})))),Object(v["e"])((function(){pa.value.$el&&(pa.value.$destroy(),pa.value.$el.parentNode.removeChild(pa.value.$el),U.commit.setSubmenu(null))})),{resolveAuthGroup:Ze,scale:F,scaleUMAP:M,filename:s,publicLink:f,items:g,headers:Ls,search:m,selected:h,loading:_,loadExpressions:It,clusterHeaders:Gs,backgroundOptions:Vs,backgroundHeader:$s,heatmapHeader:zs,heatmapOptions:Ws,genes:b,selectedGenes:w,remove:Ft,runSpatial:Qt,spatialData:O,konvaConfigLeft:I,konvaConfigRight:A,isHighlighted:T,onResize:nt,isClusterView:D,isSummation:P,clusterItems:j,backgroundColor:G,updateCircles:Dt,heatMap:$,progressMessage:H,selectAction:ua,workers:i,candidateWorkers:l,currentTask:W,highestCount:E,lowestCount:B,topHeaders:X,geneNames:J,isDrawing:Q,isDrawingRect:Y,runId:p,sendGene:Ct,sendCluster:St,lengthClust:K,colorBarmap:q,showFlag:ee,runIdFlag:te,backgroundFlag:ne,chooseBackground:Mt,chooseHeatmap:Gt,heatmapFlag:re,geneMotifFlag:ue,lassoSide:se,colorOnOff:oe,colorOnOffRect:ce,colorbarText:de,highlightIds:ve,topSelected:pe,listId:le,captureScreen:Rt,saveTxt:jt,highlightCount:fe,autoCompleteFlag:ie,geneButton:ge,geneMotif:me,featureTableFlag:he,peakViewerFlag:be,histoFlag:_e,colorMap:Re,spatialRun:je,visible:Oe,trackBrowserGenes:y,metadata:L,metaFlag:N,displayFlag:we,clusterColorFlag:xe,cellTypeFlag:ye,getMeta:ra,cleanRunId:it,childGenes:x,updateLoading:ot,updateSpatial:Ut,updateFilename:Wt,updateSelectors:ct,getPublicId:ca,seqlogo:Kt,publicSeqlogo:Me,seqLogoData:Ae,widthFromCard:Fe,linkAlert:ft,holdGene:d,holdMotif:c,copyToClip:gt,updateClusterLabel:ht,clickedCluster:De,userSelectedColor:Pe,colorRules:Hs,changeClusterColor:kt,manualClusterFlag:Te,clearClusterColor:Ot,checkFieldColor:bt,checkFieldCell:_t,clearCellType:wt,changeCellType:xt,colorMapCopy:Ce,clickedClusterFromChild:Ee,cellTypeMap:Se,cellTypeMapCopy:Ie,uploadCellType:aa,fileContent:Ue,runCellType:ea,resetFile:na,loadingPage:sa,collabData:Be,removeZeros:ut,collabName:qe,updateClustTotal:qt,totalInClust:Ne,unClickCluster:yt,selectedClusters:Le,updateHistograph:dt,spatialCircleData:Ge,colorBarToSingle:pt,colorBarFromSibling:$e,dataToSingle:vt,singleData:ze,averageInd:Ve,atlasXplore_displayed:Z,collaborator_specific_ids:ae,prep_atlasxplore:ya,acInstance:pa,submenu:fa,list_ids:ga,metadata_button:ma,gene_motif_button:ha,bg_color_button:ba,heat_map_button:_a,gene_ac_bar:wa,prep_sub_menu:xa,tableKey:He,topTenIds:We,updateTen:Nt,redirectToVisual:rt,assayFlag:Je,updateTable:Tt,logout:Ke,allRunIds:Xe,selectedGroups:Qe,colorForGroups:et,organizeGroup:mt,clearGroups:tt,startMultiSample:Jt}}}),Xs=Js,Qs=Object(te["a"])(Xs,Cs,Ss,!1,null,null,null),Ys=Qs.exports,Ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.resolveAuthGroup(["admin","user"])?a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-card",[a("v-card-title",[e._v(" Atlas Analytics ")]),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",loading:e.loading},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-divider"),a("v-card-text",{staticClass:"datatable"},[a("v-data-table",{attrs:{height:"72vh","single-select":"","items-per-page":1e3,items:e.items,headers:e.headers,dense:"",search:e.search,loading:e.loading,"sort-by":"id","hide-default-footer":""},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("task-execute",{ref:"taskexecute"})],1)],1)],1):e._e()},Zs=[],eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:""}},[e.workers?a("v-select",{attrs:{items:e.workers.filter((function(e){return e.params&&"general"==e.params.target})),"item-text":"task","item-value":"task",label:"Choose Task",loading:e.loading,"return-object":"",disabled:e.loading,messages:e.taskPayload.progress},on:{change:e.selectActionTask},model:{value:e.currentTask,callback:function(t){e.currentTask=t},expression:"currentTask"}}):e._e(),e.currentTask?[a("v-text-field",{attrs:{disabled:"",label:"Worker"},model:{value:e.currentTask.worker,callback:function(t){e.$set(e.currentTask,"worker",t)},expression:"currentTask.worker"}}),a("v-text-field",{attrs:{disabled:"",label:"Queue"},model:{value:e.currentTask.queues,callback:function(t){e.$set(e.currentTask,"queues",t)},expression:"currentTask.queues"}})]:e._e(),e.taskParams?[e._v(" Parameters "),a("task-params",{attrs:{meta:e.taskParams},on:{changed:e.OnParamsChanged}})]:e._e(),a("v-card-actions",[a("v-spacer"),e.currentTask?a("v-btn",{attrs:{color:"primary",disabled:e.loading},on:{click:e.runTask}},[e._v(" Run Task")]):e._e()],1)],2),e.taskPayload.result?a("v-card",{attrs:{flat:""}},[e._v(" "+e._s(e.taskPayload.result)+" ")]):e._e()],1)],1)],1)},to=[],ao=(a("a4d3"),a("e01a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[e._l(e.meta.args,(function(t,n){return["number"===t.type?[a("v-text-field",{key:t.name,attrs:{label:t.caption},on:{change:function(t){return e.onChanged(e.params)}},model:{value:e.params.args[n].value,callback:function(t){e.$set(e.params.args[n],"value",e._n(t))},expression:"params.args[i].value"}})]:[a("v-text-field",{key:t.name,attrs:{label:t.caption},on:{change:function(t){return e.onChanged(e.params)}},model:{value:e.params.args[n].value,callback:function(t){e.$set(e.params.args[n],"value",t)},expression:"params.args[i].value"}})]]}))],2)}),no=[],ro=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),io=Object(v["c"])({name:"TaskParams",props:["query","meta"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}));var a=Object(v["g"])(e.meta);var n=[];function r(e){t.emit("changed",a.value)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,ro;case 2:U.commit.setSubmenu(n),t.emit("changed",e.meta);case 4:case"end":return a.stop()}}),a)})))),{params:a,onChanged:r}}}),uo=io,lo=Object(te["a"])(uo,ao,no,!1,null,null,null),so=lo.exports,oo=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),co=Object(v["c"])({name:"TaskExecute",props:["query"],components:{TaskParams:so},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(!1)),r=Object(v["g"])({task:null,queue:null,args:[],kwargs:{},progress:null,result:null}),i=Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.workers})),u=Object(v["g"])(null),l=Object(v["g"])(),s=Object(v["g"])(null),o=Object(v["g"])(null);function c(){r.value={task:null,queue:null,args:[],kwargs:{},progress:null,result:null},o.value=null}function d(e){r.value&&(r.value.args=e.args.map((function(e){return e.value})),r.value.kwargs=e.kwargs)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,i,u,l,s,c,d,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n=t.task.split("."),i=Object(Lr["a"])(n,1),u=i[0],l="".concat(u,".task_list"),s=Object(Lr["a"])(t.queues,1),c=s[0],e.next=7,a.value.postTaskSync(l,[],{},c);case 7:d=e.sent;try{v=d.tasks[t.task],o.value=v,r.value&&(r.value.progress=v.description)}catch(p){ke.dispatch({text:"Metadata has not been found",options:{color:"warning",right:!0}})}case 9:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return m=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.value=t,c(),e.next=4,p(u.value);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n.value=!0,e.next=5,a.value.updateWorkers();case 5:ke.dispatch({text:"Workers are loaded",options:{color:"success",right:!0}}),n.value=!1;case 7:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var _=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.getTaskStatus(t);case 4:l.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function w(){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value&&r.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n.value=!0,r.value.result=null,r.value.task=u.value.task,t=Object(Lr["a"])(u.value.queues,1),r.value.queue=t[0],e.next=10,a.value.postTask(r.value.task,r.value.args,r.value.kwargs,r.value.queue);case 10:return i=e.sent,e.next=13,_(i._id);case 13:if("SUCCESS"===l.value.status||"FAILURE"===l.value.status){e.next=22;break}return"PROGRESS"===l.value.status&&(r.value.progress="".concat(l.value.status," : ").concat(l.value.progress,"% - ").concat(l.value.position)),e.next=17,new Promise((function(e){s.value=window.setTimeout(e,1e3)}));case 17:return s.value=null,e.next=20,_(i._id);case 20:e.next=13;break;case 22:if("SUCCESS"===l.value.status){e.next=27;break}return ke.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}),r.value.progress=l.value.status,n.value=!1,e.abrupt("return");case 27:ke.dispatch({text:"Worker finished the job",options:{right:!0,color:"success"}}),o=l.value.result,r.value.result=o,n.value=!1,e.next=38;break;case 33:e.prev=33,e.t0=e["catch"](2),n.value=!1,r.value.progress="".concat(e.t0),ke.dispatch({text:e.t0,options:{right:!0,color:"error"}});case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),x.apply(this,arguments)}var y=[{text:"Refresh",icon:"mdi-refresh",color:"primary",tooltip:"Refresh",click:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}];return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oo;case 2:U.commit.setSubmenu(y);case 3:case"end":return e.stop()}}),e)})))),{loading:n,taskPayload:r,workers:i,currentTask:u,selectActionTask:g,taskParams:o,OnParamsChanged:d,runTask:w,refresh:h}}}),vo=co,po=Object(te["a"])(vo,eo,to,!1,null,null,null),fo=po.exports,go=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),mo=[{text:"ID",value:"id"}],ho=Object(v["c"])({name:"AtlasAnalytics",props:["query"],components:{TaskExecute:fo},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])("")),r=Object(v["g"])([]),i=Object(v["g"])(),u=Object(v["g"])(null),l=Object(v["g"])(!1);function s(){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return r.value=[],n.value="",l.value=!0,t={params:{path:"data",filter:"spatial/metadata.json"}},e.next=8,a.value.getFileList(t);case 8:i=e.sent,u=i.map((function(e){return{id:e.split("/")[1]}})),r.value=u,l.value=!1;case 12:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{l.value=!0,u.value=t}catch(a){l.value=!1}l.value=!1;case 2:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.refs.taskexecute.refresh();case 4:ke.dispatch({text:"Workers refreshed",options:{color:"success",right:!0}});case 5:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}var g=[{text:"Refresh",icon:"mdi-refresh",color:"primary",tooltip:"Refresh",click:function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}];return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,go;case 2:return U.commit.setSubmenu(g),e.next=5,s();case 5:case"end":return e.stop()}}),e)})))),{search:n,headers:mo,items:r,currentItem:u,selected:i,loading:l,selectAction:c,resolveAuthGroup:Ze}}}),bo=ho,_o=Object(te["a"])(bo,Ks,Zs,!1,null,null,null),wo=_o.exports,xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.resolveAuthGroup(["admin"])?a("v-container",{attrs:{fluid:""}},[a("fresh-dialog",{model:{value:e.uploadQcDirectoryMenu,callback:function(t){e.uploadQcDirectoryMenu=t},expression:"uploadQcDirectoryMenu"}},[a("upload-qc-directory-menu")],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-card",[a("v-card-title",[e._v(" Atlas Viewer ")]),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",loading:e.loading},on:{change:e.searchAction},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-divider"),a("v-card-text",{staticClass:"datatable"},[a("v-data-table",{attrs:{height:"72vh","single-select":"","items-per-page":1e3,items:e.items,headers:e.headers,dense:"",search:e.search,loading:e.loading,"sort-by":"id","hide-default-footer":""},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"9"}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" RUN "),e.currentItem?a("span",[e._v(" - "+e._s(e.currentItem.id)+" ")]):e._e()])],1),a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{key:"Figures"},[e.currentItem?a("v-card",{staticClass:"iv_image_parent"},[a("v-card-title",[e._v(" Figures ")]),a("v-card-text",[e._l(e.images,(function(t){return[a("div",{key:t.id},[a("br"),a("v-divider"),e._v(" "+e._s(t.id)+" "),a("v-img",{staticClass:"iv_image_card",attrs:{src:t.image_src,contain:""}})],1)]}))],2)],1):e._e()],1),a("v-tab-item",{key:"Metadata"},[e.currentItem&&e.metadata?a("v-card",[a("v-card-title",[e._v(" Metadata ")]),a("v-simple-table",[a("tbody",[a("tr",[a("td",[e._v("Species")]),a("td",[e._v(e._s(e.metadata.species))])]),a("tr",[a("td",[e._v("Sample Type")]),a("td",[e._v(e._s(e.metadata.type))])]),a("tr",[a("td",[e._v("Assay")]),a("td",[e._v(e._s(e.metadata.assay))])])])])],1):e._e()],1)],1)],1)],1)],1):e._e()},yo=[],ko=["Figures","Metadata"],Oo=[{text:"ID",value:"id"}],jo=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Ro=[{text:"Upload QC Directory",icon:"mdi-upload",tooltip:"Upload QC Directory",color:"primary",click:function(){Ft.value=!0}}],Co=Object(v["c"])({name:"AtlasViewer",props:["query"],components:{FreshDialog:kt,UploadQcDirectoryMenu:Qt},setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return t.root.$route})),r=Object(v["a"])((function(){return U.state.client})),i=Object(v["g"])(""),u=Object(v["g"])(""),l=Object(v["g"])([]),s=Object(v["g"])(),o=Object(v["g"])(),c=Object(v["g"])(null),d=Object(v["g"])([]),p=Object(v["g"])(null),f=Object(v["g"])(!1),g=Object(v["g"])("Figures");function m(e){var t=lt(n,e),r=a.resolve(t).href!==n.value.fullPath;r&&a.push(t)}function h(){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:return l.value=[],i.value="",f.value=!0,t={params:{path:"data",filter:"out/"}},e.next=8,r.value.getFileList(t);case 8:a=e.sent,n=a.filter((function(e){return e.includes("metadata.json")})).map((function(e){return e.split("/")[1]})),u=[],n.forEach((function(e){var t=a.filter((function(t){return t.includes(e)})),n=t.filter((function(e){return e.includes("metadata.json")})),r=Object(Lr["a"])(n,1),i=r[0],l=t.filter((function(e){return e.toLowerCase().includes(".png")||e.toLowerCase().includes(".jpg")||e.toLowerCase().includes(".jpeg")})),s={id:e,metadatafile:i,files:t,imagefiles:l};u.push(s)})),l.value=u,f.value=!1;case 14:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:if(t){e.next=5;break}return ke.dispatch({text:"Failed to load",options:{right:!0,color:"error"}}),e.abrupt("return");case 5:return e.next=7,r.value.getJsonFile({params:{filename:t.metadatafile}});case 7:return p.value=e.sent,a=it(t.imagefiles),n=a.map((function(e){var t=e.value;return r.value?r.value.getImage({params:{filename:t}}):null})),i=[],e.next=13,Promise.allSettled(n).then((function(e){S.a.each(e,(function(e){if("fulfilled"===e.status){var t={id:e.value.name,image_src:URL.createObjectURL(e.value)};i.push(t)}else console.log("Rejected"),console.log(e)}))})).finally((function(){d.value=S.a.sortBy(i,["id"]),f.value=!1}));case 13:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function O(e){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,f.value=!0,c.value=t,m({component:"AtlasViewer",run_id:t.id}),e.next=6,x(t);case 6:f.value=!1,e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](0),ke.dispatch({text:"Failed to load the deatils of ".concat(t.id),options:{right:!0,color:"error"}}),f.value=!1,s.value=[];case 14:if(s.value){e.next=16;break}return e.abrupt("return");case 16:s.value.length<1&&ke.dispatch({text:"Failed to load the deatils of ".concat(t.id),options:{right:!0,color:"error"}});case 17:case"end":return e.stop()}}),e,null,[[0,9]])}))),j.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,jo;case 2:return U.commit.setSubmenu(Ro),t.next=5,h();case 5:if(!e.query){t.next=10;break}if(!e.query.run_id){t.next=10;break}return a=l.value.filter((function(t){return t.id===e.query.run_id})),n=Object(Lr["a"])(a,1),r=n[0],t.next=10,O(r);case 10:case"end":return t.stop()}}),t)})))),{tabs:ko,tab:g,search:i,search_details:u,items:l,currentItem:c,selected:o,headers:Oo,loading:f,searchAction:_,selectAction:O,details:s,images:d,metadata:p,uploadQcDirectoryMenu:Ft,resolveAuthGroup:Ze}}}),So=Co,Io=(a("d4a1"),Object(te["a"])(So,xo,yo,!1,null,null,null)),Ao=Io.exports,Fo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.resolveAuthGroup(["admin"])?a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:""}},[a("v-text-field",{attrs:{label:"Run ID (DXXX)"},model:{value:e.runId,callback:function(t){e.runId=t},expression:"runId"}})],1)],1)],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{key:"SourceImage"},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,datatype:"image",filetype:"PostB",destination:e.generateSourceImageDestination(e.runId,"postB.tif")}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,datatype:"image",filetype:"PostB BSA",destination:e.generateSourceImageDestination(e.runId,"postB_BSA.tif")}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,datatype:"image",filetype:"Flow A",destination:e.generateSourceImageDestination(e.runId,"flowA.tif")}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,datatype:"image",filetype:"Flow B",destination:e.generateSourceImageDestination(e.runId,"flowB.tif")}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,datatype:"image",filetype:"Fix",destination:e.generateSourceImageDestination(e.runId,"fix.tif")}})],1)],1)],1)],1),a("v-tab-item",{key:"Cell Data Upload"},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,filetype:"Gene Matrix (.h5ad)",destination:e.generateGeneMatrixDestination(e.runId,e.NgId,"genes.h5ad")}}),a("file-upload-drag-drop",{attrs:{disabled:!e.runId,run_id:e.runId,filetype:"Motif Matrix (.h5ad)",destination:e.generateGeneMatrixDestination(e.runId,e.NgId,"motifs.h5ad")}})],1)],1)],1)],1),a("v-tab-item",{key:"Novogen Seq Transfer",attrs:{disabled:""}},[a("novogen-transfer")],1),a("v-tab-item",{key:"Illumina Seq Transfer",attrs:{disabled:""}},[a("illumina-transfer")],1)],1)],1):e._e()},Mo=[],Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{disabled:e.disabled}},[a("v-card-title",[e._v(" "+e._s(e.filetype)+" "),e.uploaded?a("span",[e._v("(Uploaded)")]):e._e()]),a("v-card-subtitle",[a("v-card",{attrs:{flat:""}},[a("v-file-input",{attrs:{disabled:e.disabled,multiple:"",label:"Browse File"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),e.disabled?[e._v(" Provide Run ID first ")]:[e._v(" Drop or select file ")]],2),a("file-upload",{attrs:{multiple:!1,drop:!0,"drop-directory":!0},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),a("v-card-text",[a("v-row",[e.files.length?[e._l(e.files,(function(t){return[a("v-simple-table",{key:t.id},[a("tbody",[a("tr",[a("th",[e._v("File Name : "+e._s(t.name))]),t.error?a("th",[e._v(e._s(t.error))]):t.success?a("th",[e._v("Success")]):e._e()]),a("tr",[a("th",[e._v("Size : "+e._s(t.size))])]),a("tr",[a("th",[e._v("S3 Output Path : "+e._s(e.destination))])])])])]}))]:e._e()],2)],1),a("v-card-actions",[a("v-btn",{attrs:{small:"",color:"secondary",disabled:e.disabled},on:{click:function(t){e.files=[]}}},[e._v("Clear")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"success",disabled:e.disabled||e.files.length<1},on:{click:e.onUpload}},[e._v(" Upload ")])],1)],1)},Po=[],To=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Eo=Object(v["c"])({name:"FileUploadDragDrop",components:{FileUpload:Vt.a},props:["disabled","run_id","ng_id","datatype","filetype","extension","destination"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}));var a=Object(v["g"])([]),n=Object(v["g"])(!1),r=Object(v["g"])({run_id:e.run_id}),i=Object(v["g"])(!1);function u(){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function t(){var n,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],S.a.each(a.value,(function(e){e.file?n.push(e.file):n.push(e)})),r.value.run_id=e.run_id,u=n.map((function(t){return{file:t,meta:r.value,bucket:null,output_filename:e.destination}})),console.log(u),U.dispatch.upload.uploadDatasetFiles(u),U.commit.upload.setDialogOpen(!0),i.value=!0;case 8:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,To;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{files:a,valid:n,onUpload:u,metaData:r,uploaded:i}}}),Uo=Eo,Bo=Object(te["a"])(Uo,Do,Po,!1,null,null,null),qo=Bo.exports,No=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-card",{attrs:{loading:e.loading}},[a("v-card-title",[e._v(" Novogen downloading and transfer to S3 ")]),a("v-card-text",[a("v-form",{ref:"credential_form",attrs:{disabled:e.formDisabled},model:{value:e.credentialValid,callback:function(t){e.credentialValid=t},expression:"credentialValid"}},[a("v-text-field",{attrs:{label:"FTP Host",rules:[e.inputRules.nonEmpty],clearable:""},on:{input:e.credentialsChanged},model:{value:e.credentials.host,callback:function(t){e.$set(e.credentials,"host",t)},expression:"credentials.host"}}),a("v-text-field",{attrs:{label:"FTP Port",clearable:"",rules:[e.inputRules.isNumber]},on:{input:e.credentialsChanged},model:{value:e.credentials.port,callback:function(t){e.$set(e.credentials,"port",e._n(t))},expression:"credentials.port"}}),a("v-text-field",{attrs:{label:"Username (Batch ID)",clearable:"",rules:[e.inputRules.nonEmpty]},on:{input:e.credentialsChanged},model:{value:e.credentials.username,callback:function(t){e.$set(e.credentials,"username",t)},expression:"credentials.username"}}),a("v-text-field",{attrs:{type:"password",label:"Password",clearable:"",rules:[e.inputRules.nonEmpty]},on:{input:e.credentialsChanged},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}}),a("v-text-field",{attrs:{label:"FTP Batch Root directory (raw_data)",clearable:"",rules:[e.inputRules.nonEmpty]},on:{input:e.credentialsChanged},model:{value:e.credentials.source_root,callback:function(t){e.$set(e.credentials,"source_root",t)},expression:"credentials.source_root"}}),a("v-text-field",{attrs:{label:"S3 Root directory (data)",clearable:"",rules:[e.inputRules.nonEmpty]},on:{input:e.credentialsChanged},model:{value:e.credentials.output_root,callback:function(t){e.$set(e.credentials,"output_root",t)},expression:"credentials.output_root"}})],1)],1),a("v-card-actions",[a("v-row",[a("v-spacer"),a("v-col",[a("v-btn",{attrs:{icon:"",disabled:!e.credentialValid,color:"primary"},on:{click:e.listBatches}},[a("v-icon",[e._v("mdi-play-circle")]),a("span",[e._v("List Batches")])],1)],1),a("v-col",[a("v-btn",{attrs:{icon:"",disabled:!1,color:"warning"},on:{click:e.reset}},[a("v-icon",[e._v("mdi-keyboard-backspace")]),a("span",[e._v("Reset")])],1)],1)],1)],1)],1),e._l(e.batchList,(function(t){return[a("v-card",{key:t.source_filename},[a("v-card-subtitle",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[e._v(" "+e._s(t.run_id)+" "),e.downloadStatus[t.source_filename].done?a("span",[a("v-icon",{attrs:{color:"success"}},[e._v("mdi-check")])],1):e._e()]),a("v-col",{attrs:{cols:"12",sm:"4"}},[e.downloadStatus[t.source_filename].running?a("v-progress-linear",{attrs:{me:e.downloadStatus[t.source_filename].progress,value:e.downloadStatus[t.source_filename].progress}}):e._e()],1),e.downloadStatus[t.source_filename].status?a("v-col",{attrs:{cols:"12",sm:"2"}},[e._v(" "+e._s(e.downloadStatus[t.source_filename].status.status)+" "),e.downloadStatus[t.source_filename].started||e.downloadStatus[t.source_filename].done?a("span",[e._v(e._s(e.downloadStatus[t.source_filename].progress)+"%")]):e._e()]):e._e(),a("v-col",{attrs:{cols:"12",sm:"2"}},[e.downloadStatus[t.source_filename].status?a("span",[e._v(" "+e._s(e.downloadStatus[t.source_filename].status.position)+" ")]):e._e()]),a("v-spacer"),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:e.downloadStatus[t.source_filename].started||e.downloadStatus[t.source_filename].done},on:{click:function(a){return e.executeDownload(t,a)}}},[a("v-icon",[e._v("mdi-cloud-download")]),a("span",[e._v("Download To S3")])],1)],1)],1)],1),a("v-card-text",[a("v-simple-table",{attrs:{dense:""}},[a("tbody",[a("tr",[a("th",[e._v("File Name : "+e._s(t.source_filename))])]),a("tr",[a("th",[e._v("Size : "+e._s(new Intl.NumberFormat("en-IN",{style:"decimal"}).format(t.size/1048576))+" MB")])]),a("tr",[a("th",[e._v("S3 Output Path : "+e._s(t.output_key)+" "),t.output_exists?a("span",{staticClass:"warning"},[e._v("WARNING : File already exists")]):e._e()])])])])],1)],1)]}))],2)},Lo=[],Go=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),$o=Object(v["c"])({name:"NovogenTransfer",props:["query","disabled"],setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(!1)),r=Object(v["g"])({}),i=Object(v["g"])(!1),u=Object(v["g"])({host:null,port:21,username:null,password:null,source_root:null,output_root:null}),l=Object(v["g"])(!1),s=Object(v["g"])([]),o=Object(v["g"])(),c=Object(v["g"])(null);function d(e){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(t){var l,o,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return s.value=[],n.value=!0,e.prev=4,l=u.value,o=[l.host,l.port,l.username,l.password,l.source_root,l.output_root],e.next=9,a.value.postTaskSync("core.list_novogene_batch",o,{},"atxcloud_core");case 9:c=e.sent,d={},c.forEach((function(e){d[e.source_filename]={progress:0,started:!1,running:!1,done:!1,status:null}})),s.value=c,r.value=d,ke.dispatch({text:"Batch information retrieved",options:{color:"success",right:!0}}),i.value=!0,e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](4),console.log(e.t0),ke.dispatch({text:"Error in retrieving batch information",options:{color:"error",right:!0}});case 22:return e.prev=22,n.value=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[4,18,22,25]])}))),p.apply(this,arguments)}var f=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.getTaskStatus(t);case 4:o.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function g(e,t){return m.apply(this,arguments)}function m(){return m=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var i,l,s,d,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return console.log(t),r.value[t.source_filename].progress=0,r.value[t.source_filename].started=!0,i=u.value,l="core.download_from_ftp_to_s3",s="atxcloud_core",d=[i.host,i.port,i.username,i.password,t.source_filename,t.output_key],v={},e.next=12,a.value.postTask(l,d,v,s);case 12:return p=e.sent,e.next=15,f(p._id);case 15:if("SUCCESS"===o.value.status||"FAILURE"===o.value.status){e.next=25;break}return"PROGRESS"===o.value.status&&(r.value[t.source_filename].progress=o.value.progress,r.value[t.source_filename].running=!0),e.next=19,new Promise((function(e){c.value=window.setTimeout(e,1e3)}));case 19:return c.value=null,e.next=22,f(p._id);case 22:r.value[t.source_filename].status=o.value,e.next=15;break;case 25:"SUCCESS"!==o.value.status?ke.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}):(r.value[t.source_filename].progress=100,r.value[t.source_filename].started=!1,r.value[t.source_filename].done=!0),r.value[t.source_filename].running=!1;case 27:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e){s.value=[]}function b(){return _.apply(this,arguments)}function _(){return _=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n.value=!0,e.next=6,a.value.postTaskSync("core.task_list",[],{},"atxcloud_core");case 6:t=e.sent,r=t.tasks,i=r["core.list_novogene_batch"].args,i.forEach((function(e){u.value[e.name]=e.value})),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),ke.dispatch({text:"Error in retrieving task information",options:{color:"error",right:!0}});case 15:return e.prev=15,n.value=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),_.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.value=[],e.next=3,b();case 3:i.value=!1;case 4:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Go;case 2:return U.commit.setSubmenu(null),e.next=5,b();case 5:case"end":return e.stop()}}),e)})))),{loading:n,formDisabled:i,reset:w,inputRules:ct,credentials:u,credentialValid:l,credentialsChanged:h,listBatches:d,batchList:s,downloadStatus:r,executeDownload:g,taskStatus:o}}}),zo=$o,Vo=Object(te["a"])(zo,No,Lo,!1,null,null,null),Wo=Vo.exports,Ho=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-card",{attrs:{loading:e.loading}},[a("v-card-title",[e._v(" Illumina Sequence Transfer from BaseSpace (Fastq only) ")]),a("v-card-text"),a("v-card-actions",[a("v-row",[a("v-spacer"),a("v-col",[a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:e.listBatches}},[a("v-icon",[e._v("mdi-play-circle")]),a("span",[e._v("List Batches")])],1)],1),a("v-col",[a("v-btn",{attrs:{icon:"",disabled:!1,color:"warning"},on:{click:e.reset}},[a("v-icon",[e._v("mdi-keyboard-backspace")]),a("span",[e._v("Reset")])],1)],1)],1)],1)],1),e.batchList.length>0?a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("v-row",[a("v-col",[e._v(" ["+e._s(e.currentPage+1)+"-"+e._s(e.batchList.length+e.currentPage)+"] / "+e._s(e.totalPage)+" ")]),a("v-col",[a("v-btn",{attrs:{icon:"",color:"primary",disabled:e.currentPage<1},on:{click:function(t){return e.moveOffset(!1)}}},[a("v-icon",[e._v("mdi-arrow-left")])],1),a("v-btn",{attrs:{icon:"",color:"primary",disabled:e.currentPage+e.pagingLimit+1>=e.totalPage},on:{click:function(t){return e.moveOffset(!0)}}},[a("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1):e._e(),e._l(e.batchList,(function(t){return[a("v-card",{key:t.Id},[a("v-card-subtitle",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"3"}},[e._v(" "+e._s(t.run_id)+" ("+e._s(t.DatasetType.Name)+") "),e.downloadStatus[t.Id].done?a("span",[a("v-icon",{attrs:{color:"success"}},[e._v("mdi-check")])],1):e._e()]),a("v-col",{attrs:{cols:"12",sm:"3"}},[e.downloadStatus[t.Id].running?a("v-progress-linear",{attrs:{me:e.downloadStatus[t.Id].progress,value:e.downloadStatus[t.Id].progress}}):e._e()],1),e.downloadStatus[t.Id].status?a("v-col",{attrs:{cols:"12",sm:"2"}},[e._v(" "+e._s(e.downloadStatus[t.Id].status.status)+" "),e.downloadStatus[t.Id].started||e.downloadStatus[t.Id].done?a("span",[e._v(e._s(e.downloadStatus[t.Id].progress)+"%")]):e._e()]):e._e(),a("v-col",{attrs:{cols:"12",sm:"2"}},[e.downloadStatus[t.Id].status?a("span",[e._v(" "+e._s(e.downloadStatus[t.Id].status.position)+" ")]):e._e()]),a("v-spacer"),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-btn",{attrs:{small:"",icon:"",color:"primary",disabled:e.downloadStatus[t.Id].started||e.downloadStatus[t.Id].done},on:{click:function(a){return e.executeDownload(t,a)}}},[a("v-icon",[e._v("mdi-cloud-download")]),a("span",[e._v("Download To S3")])],1)],1)],1)],1),a("v-card-text",[a("v-simple-table",{attrs:{dense:""}},[a("tbody",[a("tr",[a("th",[e._v("Dataset Name : "+e._s(t.Name)+", Project Name : "+e._s(t.Project.Name)+" ")])]),a("tr",[a("th",[e._v("Total Size : "+e._s(new Intl.NumberFormat("en-IN",{style:"decimal"}).format(t.TotalSize/1048576))+" MB , Created on "+e._s(t.DateCreated.substr(0,10))+" ")])]),e._l(t.file_downloads,(function(t,n){return a("tr",{key:t.name},[a("th",[e._v(" File "+e._s(n+1)+" : "+e._s(t.name)+" , Size : "+e._s(new Intl.NumberFormat("en-IN",{style:"decimal"}).format(t.size/1048576))+" MB "),a("v-icon",[e._v("mdi-arrow-right")]),e._v(" "+e._s(t.outpath)+" "),t.output_exists?a("span",{staticClass:"warning"},[e._v("WARNING : File already exists")]):e._e()],1)])}))],2)])],1)],1)]}))],2)},Jo=[],Xo=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Qo=Object(v["c"])({name:"IlluminaTransfer",props:["query","disabled"],setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(!1)),r=Object(v["g"])({}),i=Object(v["g"])([]),u=Object(v["g"])(0),l=Object(v["g"])(0),s=Object(v["g"])(10),o=Object(v["g"])(),c=Object(v["g"])(null);function d(e){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(t){var s,o,c,d,v=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=v.length>1&&void 0!==v[1]?v[1]:0,a.value){e.next=3;break}return e.abrupt("return");case 3:return i.value=[],n.value=!0,e.prev=5,e.next=8,a.value.postTaskSync("core.list_basespace_datasets",[s],{},"atxcloud_core");case 8:o=e.sent,c=o.Items,u.value=o.Paging.Offset,l.value=o.Paging.TotalCount,d={},c.forEach((function(e){d[e.Id]={progress:0,started:!1,running:!1,done:!1,status:null}})),i.value=c,r.value=d,ke.dispatch({text:"Batch information retrieved",options:{color:"success",right:!0}}),e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](5),console.log(e.t0),ke.dispatch({text:"Error in retrieving batch information",options:{color:"error",right:!0}});case 23:return e.prev=23,n.value=!1,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[5,19,23,26]])}))),p.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,d(null,u.value+s.value);case 3:e.next=7;break;case 5:return e.next=7,d(null,u.value-s.value);case 7:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}var m=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.getTaskStatus(t);case 4:o.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function h(e,t){return b.apply(this,arguments)}function b(){return b=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var i,u,l,s,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return r.value[t.Id].progress=0,r.value[t.Id].started=!0,i="core.download_from_basespace_href",u="atxcloud_core",l=[t.file_downloads],s={},e.next=10,a.value.postTask(i,l,s,u);case 10:return d=e.sent,e.next=13,m(d._id);case 13:if("SUCCESS"===o.value.status||"FAILURE"===o.value.status){e.next=23;break}return"PROGRESS"===o.value.status&&(r.value[t.Id].progress=o.value.progress,r.value[t.Id].running=!0),e.next=17,new Promise((function(e){c.value=window.setTimeout(e,1e3)}));case 17:return c.value=null,e.next=20,m(d._id);case 20:r.value[t.Id].status=o.value,e.next=13;break;case 23:"SUCCESS"!==o.value.status?ke.dispatch({text:"Worker failed",options:{right:!0,color:"error"}}):(r.value[t.Id].progress=100,r.value[t.Id].started=!1,r.value[t.Id].done=!0),r.value[t.Id].running=!1;case 25:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function _(){return w.apply(this,arguments)}function w(){return w=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.value=[];case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xo;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{loading:n,reset:_,inputRules:ct,listBatches:d,batchList:i,downloadStatus:r,executeDownload:h,taskStatus:o,currentPage:u,totalPage:l,pagingLimit:s,moveOffset:f}}}),Yo=Qo,Ko=Object(te["a"])(Yo,Ho,Jo,!1,null,null,null),Zo=Ko.exports,ec=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))}));function tc(e,t){var a=e?e.toUpperCase():e;return"data/".concat(a,"/images/").concat(t)}function ac(e,t,a){var n=e?e.toUpperCase():e;t&&t.toUpperCase();return"data/".concat(n,"/h5/obj/").concat(a)}var nc=["Image Upload","Gene Matrix Upload (H5AD)","Transfer Seq (Novogen)","Transfer Seq (Illumina)"],rc=Object(v["c"])({name:"AtlasUploader",components:{FileUploadDragDrop:qo,NovogenTransfer:Wo,IlluminaTransfer:Zo},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}));var a=Object(v["g"])(),n=Object(v["g"])(),r=Object(v["g"])(0);return Object(v["h"])(a,(function(e){a.value&&(a.value=a.value.toUpperCase())})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ec;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{tab:r,tabs:nc,runId:a,NgId:n,generateSourceImageDestination:tc,generateGeneMatrixDestination:ac,resolveAuthGroup:Ze}}}),ic=rc,uc=Object(te["a"])(ic,Fo,Mo,!1,null,null,null),lc=uc.exports,sc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{key:"JobManagment"},[a("jobs-table",{attrs:{filter_username:!0,filter_job_name:!1,filter_run_id:!1}})],1),a("v-tab-item",{key:"UserManagement",attrs:{eager:""}},[a("user-management",{ref:"user_managment"})],1),a("v-tab-item",{key:"GroupManagment"},[a("group-managment",{on:{"update-groups":e.update_groups_list}}),e._v("/> ")],1),a("v-tab-item",{key:"CreateWebObject"},[a("create-web-object")],1),a("v-tab-item",{key:"Uploader",attrs:{eager:""}},[a("web-uploader",{ref:"run_editor"})],1),a("v-tab-item",{key:"GroupingRuns"},[a("grouping-runs")],1),a("v-tab-item",{key:"AddFiles"},[a("add-files")],1)],1)],1)},oc=[],cc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-form",{model:{value:e.validPassword,callback:function(t){e.validPassword=t},expression:"validPassword"}},[a("v-text-field",{attrs:{label:"Username"},model:{value:e.passwordChange.username,callback:function(t){e.$set(e.passwordChange,"username",t)},expression:"passwordChange.username"}}),a("v-text-field",{attrs:{type:"password",label:"New Password"},model:{value:e.passwordChange.password,callback:function(t){e.$set(e.passwordChange,"password",t)},expression:"passwordChange.password"}}),a("v-btn",{attrs:{color:"primary"},on:{click:e.onChangePassword}},[e._v("Change Password")])],1)],1)],1)],1)},dc=[],vc=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),pc=Object(v["c"])({name:"ResetPassword",setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])()),r=Object(v["g"])(!1),i=Object(v["g"])({editable:!1}),u=Object(v["g"])({username:null,password:null});function l(){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.user;case 4:n.value=e.sent;case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:if(!r.value){e.next=18;break}return n={username:u.value.username,password:u.value.password},e.prev=4,e.next=7,a.value.resetUserPassword(n);case 7:e.sent,u.value={username:null,password:null},ke.dispatch({text:"Password reset successfully",options:{color:"success",right:!0}}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](4),ke.dispatch({text:"Password reset failed ".concat(e.t0),options:{color:"error",right:!0}}),u.value={username:null,password:null};case 16:e.next=19;break;case 18:ke.dispatch({text:"Password is not valid",options:{color:"error",right:!0}});case 19:case"end":return e.stop()}}),e,null,[[4,12]])}))),c.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vc;case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})))),{userInfo:n,overview:i,passwordChange:u,validPassword:r,onChangePassword:o}}}),fc=pc,gc=Object(te["a"])(fc,cc,dc,!1,null,null,null),mc=gc.exports,hc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",loading:e.loading},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:e.refresh}},[a("v-icon",[e._v("mdi-refresh")]),a("span",[e._v("Refresh")])],1)],1),e.workers?a("v-card-text",[a("v-data-table",{attrs:{"single-select":"","items-per-page":1e3,items:e.workers,headers:e.headers,dense:"",search:e.search,loading:e.loading,"sort-by":"worker","hide-default-footer":""},on:{"click:row":e.selectAction},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1):e._e()],1)],1)},bc=[],_c=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),wc=[{text:"Worker",value:"worker"},{text:"Task Name",value:"task"},{text:"Queues",value:"queues"},{text:"Requested",value:"requests"}],xc=Object(v["c"])({name:"WorkerStatus",setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.workers}))),r=Object(v["g"])(!1),i=Object(v["g"])(),u=Object(v["g"])();function l(){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return r.value=!0,e.next=5,a.value.updateWorkers();case 5:ke.dispatch({text:"Workers are loaded",options:{color:"success",right:!0}}),r.value=!1;case 7:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_c;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{workers:n,refresh:l,loading:r,search:i,selected:u,headers:wc,selectAction:o}}}),yc=xc,kc=Object(te["a"])(yc,hc,bc,!1,null,null,null),Oc=kc.exports,jc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{label:"Username"}}),a("v-text-field",{attrs:{label:"Groups"}}),a("v-btn",{attrs:{color:"primary"},on:{click:e.onSave}},[e._v("Save")])],1)],1)],1)],1)},Rc=[],Cc=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Sc=Object(v["c"])({name:"AddRemoveGroup",setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])()),r=Object(v["g"])(!1),i=Object(v["g"])({editable:!1});function u(){return l.apply(this,arguments)}function l(){return l=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.user;case 4:n.value=e.sent;case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function s(e){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:if(r.value)try{ke.dispatch({text:"Group created successfully",options:{color:"success",right:!0}})}catch(t){ke.dispatch({text:"Group creation failed ".concat(t),options:{color:"error",right:!0}})}else ke.dispatch({text:"Form is not valid",options:{color:"error",right:!0}});case 3:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Save button clicked");case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Cc;case 2:return e.next=4,u();case 4:case"end":return e.stop()}}),e)})))),{userInfo:n,overview:i,validForm:r,onGroupCreated:s,onSave:c}}}),Ic=Sc,Ac=Object(te["a"])(Ic,jc,Rc,!1,null,null,null),Fc=Ac.exports,Mc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-form",{model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[a("v-text-field",{attrs:{label:"Username"},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}}),a("v-text-field",{attrs:{label:"Password"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}}),a("v-text-field",{attrs:{label:"Name"},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}}),a("v-text-field",{attrs:{label:"Email"},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}}),a("v-text-field",{attrs:{"append-outer-icon":"mdi-check",label:"Group"},on:{"click:append-outer":e.updateGroups},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}}),a("v-btn",{attrs:{color:"primary",disabled:e.groupComplete},on:{click:e.onUserCreated}},[e._v("Add User")]),a("v-btn",{attrs:{color:"error",disabled:e.groupComplete},on:{click:e.removeUser}},[e._v("Remove User")])],1)],1)],1)],1)},Dc=[],Pc=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Tc=Object(v["c"])({name:"AddRemoveUser",setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(!1)),r=Object(v["g"])({editable:!1}),i=Object(v["g"])({username:null,password:null,email:null,groups:[],name:null}),u=Object(v["g"])(""),l=Object(v["g"])(!1);function s(e){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.value.length>0&&(i.value.groups.push(u.value),u.value="");case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return n={name:i.value.name,password:i.value.password,username:i.value.username,email:i.value.email,groups:i.value.groups},e.prev=3,e.next=6,a.value.registerUser(n);case 6:return e.sent,e.next=9,a.value.confirmUser(i.value.username);case 9:e.sent,i.value={username:null,password:null,email:null,groups:[],name:null},ke.dispatch({text:"User creation successful",options:{color:"success",right:!0}}),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),ke.dispatch({text:"User creation failed ".concat(e.t0),options:{color:"error",right:!0}}),i.value={username:null,password:null,email:null,groups:[],name:null};case 18:case"end":return e.stop()}}),e,null,[[3,14]])}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a.value.deleteUser(i.value.username);case 5:e.sent,i.value={username:null,password:null,email:null,groups:[],name:null},ke.dispatch({text:"User deletion successful",options:{color:"success",right:!0}}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),ke.dispatch({text:"User deletion failed ".concat(e.t0),options:{color:"error",right:!0}}),i.value={username:null,password:null,email:null,groups:[],name:null};case 14:case"end":return e.stop()}}),e,null,[[2,10]])}))),f.apply(this,arguments)}return Object(v["h"])(u,(function(e){0===e.length?l.value=!1:i.value.groups.includes(e)||(l.value=!0)})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pc;case 2:case"end":return e.stop()}}),e)})))),{userInfo:i,overview:r,validForm:n,updateGroups:s,removeUser:p,group:u,groupComplete:l,onUserCreated:c}}}),Ec=Tc,Uc=Object(te["a"])(Ec,Mc,Dc,!1,null,null,null),Bc=Uc.exports,qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-col",[a("v-data-table",{attrs:{headers:e.headers,items:e.user_list},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{small:""},on:{click:function(t){return e.edit(n.id)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deletion_button_selected(n.id)}}},[e._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{width:"800px"},on:{"click:outside":e.popup_close},model:{value:e.editing,callback:function(t){e.editing=t},expression:"editing"}},[a("v-card",[a("v-card-title",[e._v(" Edit User Information ")]),a("v-row",[a("v-col",{staticStyle:{"padding-left":"20px"},attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:e.selected_user.username,label:"Username",readonly:""}},[a("template",{slot:"append-outer"},["UNCONFIRMED"===e.displayed_user_status?a("v-btn",[a("v-icon",{attrs:{color:"green"},on:{click:e.confirm_user_display}},[e._v(" mdi-check ")])],1):a("h5",[e._v(" Confirmed ")])],1)],2),a("v-text-field",{attrs:{value:e.selected_user.name,label:"Full Name",readonly:""}}),a("v-text-field",{attrs:{value:e.selected_user.piname,label:"PI Name",readonly:""}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-select",{attrs:{items:e.groups_list,label:"User's Groups",multiple:""},on:{change:function(t){return e.groups_list_changed()}},model:{value:e.selected_user.groups,callback:function(t){e.$set(e.selected_user,"groups",t)},expression:"selected_user.groups"}}),a("v-text-field",{attrs:{value:e.selected_user.email,label:"Email",readonly:""}}),a("v-text-field",{attrs:{value:e.selected_user.organization,label:"Organization",readonly:""}})],1)],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-checkbox",{staticStyle:{position:"relative",left:"5px"},attrs:{label:"Email User"},model:{value:e.email_user,callback:function(t){e.email_user=t},expression:"email_user"}}),a("v-btn",{staticStyle:{position:"relative",left:"25px"},attrs:{disabled:!e.changes_made,color:"primary"},on:{click:e.write_changes}},[e._v(" Submit Changes ")])],1)],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.delete_user_dialog,callback:function(t){e.delete_user_dialog=t},expression:"delete_user_dialog"}},[a("v-card",[a("v-card-title",{staticClass:"justify-center"},[e._v(" Are you sure you want to delete user: "+e._s(e.selected_user.username)+" ")]),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{outlined:"",large:"",fab:"",color:"red"},on:{click:e.delete_user}},[a("v-icon",[e._v(" mdi-delete ")])],1),a("v-btn",{attrs:{outlined:""},on:{click:function(t){e.delete_user_dialog=!1}}},[e._v(" Cancel ")])],1)],1)],1)],1)],1)},Nc=[],Lc=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Gc=Object(v["c"])({name:"UserManagement",setup:function(e,t){var a=Object(v["g"])([]),n=Object(v["g"])([]),r=Object(v["a"])((function(){return U.state.client})),i=[{value:"username",text:"Username",sortable:!1},{value:"status",text:"User Status"},{value:"group_names",text:"Groups"},{value:"email",text:"Email",sortable:!1},{value:"email_verified",text:"Email Verified"},{value:"name",text:"Full Name",sortable:!1},{value:"organization",text:"Organization"},{value:"piname",text:"PI Name"},{value:"actions",text:"Actions"}],u=Object(v["g"])({}),l=Object(v["g"])(1),s=Object(v["g"])(!1),o=Object(v["g"])(""),c=Object(v["g"])(!1),d=Object(v["g"])(""),p=Object(v["g"])(!1),f=Object(v["g"])(!0),g=Object(v["g"])(""),m=Object(v["g"])([]),h=Object(v["g"])([]),b=Object(v["g"])([]),_=Object(v["g"])(!1),w=Object(v["g"])(!1),x=Object(v["g"])(!1);function y(){x.value=!1,u.value.groups=u.value.group_names.split(",")}function O(e){s.value=!1,p.value=!1,x.value=!0,u.value=a.value[e],b.value=u.value.groups,o.value=u.value.status,g.value=u.value.status,d.value=u.value.email_verified}function j(){s.value=!0,d.value="true",p.value=!0}function R(e){u.value=a.value[e],w.value=!0}function C(){return S.apply(this,arguments)}function S(){return S=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.value)||void 0===t?void 0:t.deleteUser(u.value.username);case 2:if(n=e.sent,i=null===n||void 0===n?void 0:n.status,200===i){for(w.value=!1,ke.dispatch({text:"User: ".concat(u.value.username).concat(" has been successfully deleted.")}),a.value=a.value.filter((function(e){return e.username!==u.value.username})),l=0;l<a.value.length;l+=1)a.value[l].id=l;w.value=!1}else ke.dispatch({text:"Error when attempting to delete user: ".concat(u.value.username).concat(".")});case 5:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(){h.value=u.value.groups.filter((function(e){return!b.value.includes(e)})),m.value=b.value.filter((function(e){return!u.value.groups.includes(e)})),m.value.length>0||h.value.length>0||c.value?s.value=!0:s.value=!1}function A(){o.value="CONFIRMED",c.value=!0,s.value=!0}function F(e){return M.apply(this,arguments)}function M(){return M=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.value=!0,e.prev=1,e.next=4,r.value.confirmUser(u.value.username);case 4:n=e.sent,i=n.status,200===i?(ke.dispatch({text:"Successfully confirmed user: ".concat(t).concat(".")}),a.value[t].status="CONFIRMED",s.value=!1):ke.dispatch({text:"Error. Unable to confirm user: ".concat(u.value).concat(".")}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("error in confirming user");case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),M.apply(this,arguments)}function D(){return P.apply(this,arguments)}function P(){return P=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,l,o,c,d,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={groups_adding:h.value,groups_removing:m.value,username:u.value.username},e.prev=1,e.next=4,null===(a=r.value)||void 0===a?void 0:a.modify_group_list(t);case 4:for(n=e.sent,null===n||void 0===n?void 0:n.status,ke.dispatch({text:"Successfully modified user`s groups."}),h.value.length>0&&f.value&&(i={group:h.value[0],username:u.value.username,email:u.value.email,name:u.value.name},r.value.notify_user_group_assignment(i)),h.value=[],m.value=[],b.value=u.value.groups,l=0;l<m.value.length;l+=1)o=h.value[l],c=u.value.groups.indexOf(o),u.value.groups.splice(c,1);for(d=0;d<h.value.length;d+=1)v=m.value[d],u.value.groups.push(v);s.value=!1,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),ke.dispatch({text:"Error when modifying user`s groups.",options:{color:"red"}}),console.log("error modifying groups");case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),P.apply(this,arguments)}function T(e){return E.apply(this,arguments)}function E(){return E=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("CONFIRMED"!==a.value[t].status){e.next=14;break}return e.prev=1,e.next=4,r.value.confirm_user_email_admin(t);case 4:e.sent,s.value=!1,ke.dispatch({text:"Successfully confirmed user`s email",options:{color:"green"}}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),ke.dispatch({text:"Error! Unable to confirm user`s email",options:{color:"red"}});case 12:e.next=15;break;case 14:ke.dispatch({text:"Unable to confirm email of an unconfirmed user.",options:{color:"red"}});case 15:case"end":return e.stop()}}),e,null,[[1,9]])}))),E.apply(this,arguments)}function B(){return q.apply(this,arguments)}function q(){return q=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=u.value.username,u.value.group_names=u.value.groups.toString(),g.value===o.value){e.next=6;break}return s.value=!0,e.next=6,F(t);case 6:if(!(h.value.length>0||m.value.length>0)){e.next=10;break}return s.value=!0,e.next=10,D();case 10:if(!p.value){e.next=14;break}return s.value=!0,e.next=14,T(t);case 14:f.value&&!1===s.value&&console.log("email user their settings have been updated.");case 15:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){return L=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=r.value)||void 0===t?void 0:t.get_group_list();case 2:n.value=e.sent;case 3:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Lc;case 2:return e.next=4,null===(t=r.value)||void 0===t?void 0:t.get_user_list();case 4:return a.value=e.sent,a.value.forEach((function(e,t){var n=e.groups.toString();a.value[t].group_names=n})),e.next=8,N();case 8:case"end":return e.stop()}}),e)})))),{user_list:a,groups_list:n,selected_user:u,number_new_groups_options:l,email_user:f,changes_made:s,groups_list_changed:I,confirm_user_display:A,confirm_user_write:F,displayed_user_status:o,confirm_user_status:c,original_group_lis:b,removing_group_lis:m,adding_group_lis:h,write_changes:B,display_group_addition:_,deletion_button_selected:R,original_user_status:g,delete_user_dialog:w,delete_user:C,displayed_email_status:d,confirm_user_email:j,confirm_user_email_bool:p,headers:i,edit:O,editing:x,popup_close:y,update_groups_list:N}}}),$c=Gc,zc=(a("0666"),Object(te["a"])($c,qc,Nc,!1,null,null,null)),Vc=zc.exports,Wc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("div",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-card-title",[e._v(" Run Information ")]),a("run-id-selector",{ref:"run_id_selector",attrs:{new_available:!1,label:e.run_id_confirmed?"Run ID":"New Run ID"},on:{"run-selected":e.run_selected,"edit-run-id":function(t){e.run_id_confirmed=!1},"custom-run-id":e.custom_run_id,"close-edit-run-id":function(t){e.run_id_confirmed=!0}}}),a("v-text-field",{attrs:{loading:e.loading,label:"Run Title",disabled:!e.run_id_confirmed},model:{value:e.run_title,callback:function(t){e.run_title=t},expression:"run_title"}}),a("v-text-field",{attrs:{loading:e.loading,label:"Run Description",disabled:!e.run_id_confirmed},model:{value:e.run_description,callback:function(t){e.run_description=t},expression:"run_description"}}),a("v-text-field",{attrs:{loading:e.loading,label:"Sample ID",disabled:!e.run_id_confirmed},model:{value:e.sample_id,callback:function(t){e.sample_id=t},expression:"sample_id"}}),a("v-text-field",{attrs:{loading:e.loading,label:"Date: MM/DD/YYYY",disabled:!e.run_id_confirmed},model:{value:e.date_human_readable,callback:function(t){e.date_human_readable=t},expression:"date_human_readable"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-card-title",{staticClass:"justify-center"},[e._v(" Metadata ")]),a("v-select",{attrs:{label:"Assay",items:e.db_connection.assay_list,disabled:!e.run_id_confirmed,loading:e.loading},model:{value:e.assay,callback:function(t){e.assay=t},expression:"assay"}}),a("selector",{directives:[{name:"show",rawName:"v-show",value:"CUT&Tag"==e.assay,expression:"assay == 'CUT&Tag'"}],attrs:{loading:e.loading,disabled:!e.run_id_confirmed,display_label:"Epitope Name",display_options:e.db_connection.epitope_list},on:{"option-added":function(t){return e.db_connection.epitope_list.push(t)}},model:{value:e.antibody,callback:function(t){e.antibody=t},expression:"antibody"}}),a("selector",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,display_label:"Species",display_options:e.db_connection.species_list},on:{"option-added":function(t){return e.db_connection.species_list.push(t)}},model:{value:e.species,callback:function(t){e.species=t},expression:"species"}}),a("selector",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,display_options:e.db_connection.organ_list,display_label:"Organ"},on:{"option-added":function(t){return e.db_connection.organ_list.push(t)}},model:{value:e.organ,callback:function(t){e.organ=t},expression:"organ"}}),a("selector",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,display_options:e.db_connection.tissue_type_list,display_label:"Tissue Type"},on:{"option-added":function(t){return e.db_connection.tissue_type_list.push(t)}},model:{value:e.tissue_type,callback:function(t){e.tissue_type=t},expression:"tissue_type"}}),a("selector",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,display_options:e.db_connection.tissue_source_list,display_label:"Tissue Source"},on:{"option-added":function(t){return e.db_connection.tissue_source_list.push(t)}},model:{value:e.tissue_source,callback:function(t){e.tissue_source=t},expression:"tissue_source"}}),a("v-text-field",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,label:"Tissue Condition"},model:{value:e.tissue_condition,callback:function(t){e.tissue_condition=t},expression:"tissue_condition"}}),a("v-select",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,label:"Channel Width µm",items:[10,20,25,50]},model:{value:e.channel_width,callback:function(t){e.channel_width=t},expression:"channel_width"}}),a("v-select",{attrs:{loading:e.loading,disabled:!e.run_id_confirmed,label:"Number of Channels",items:[50,100]},model:{value:e.number_channels,callback:function(t){e.number_channels=t},expression:"number_channels"}})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-card-title",[e._v(" Web Object ")]),a("v-text-field",{attrs:{disabled:!e.run_id_confirmed,label:"NGS ID",loading:e.loading},model:{value:e.ngs_id,callback:function(t){e.ngs_id=t},expression:"ngs_id"}}),a("v-select",{attrs:{disabled:!e.run_id_confirmed,items:e.public_run_items,label:"Public",loading:e.loading},model:{value:e.public_run,callback:function(t){e.public_run=t},expression:"public_run"}}),a("v-select",{attrs:{disabled:!e.run_id_confirmed,items:e.db_connection.group_list,label:"Group",loading:e.loading},model:{value:e.selected_group,callback:function(t){e.selected_group=t},expression:"selected_group"}}),a("v-select",{attrs:{disabled:!e.run_id_confirmed,label:"PMID",items:e.db_connection.pmid_list,loading:e.loading},model:{value:e.pmid,callback:function(t){e.pmid=t},expression:"pmid"}}),e.web_obj_created?a("v-text-field",{attrs:{disabled:!e.run_id_confirmed,label:"Path",loading:e.loading,readonly:""},model:{value:e.web_obj_path,callback:function(t){e.web_obj_path=t},expression:"web_obj_path"}}):e._e(),!e.web_obj_path&&e.run_id_confirmed&&e.data_loaded?a("v-card",{staticClass:"ma-2 warning-card"},[a("v-card-title",{staticClass:"warning-card__title"},[a("v-icon",{staticClass:"warning-card__icon",attrs:{color:"warning"}},[e._v("mdi-alert-circle")]),a("span",{staticClass:"warning-card__text"},[e._v("Web Object Not Created")])],1),a("v-card-text",{staticClass:"warning-card__message"},[a("p",[e._v(' Navigate to the "Create a Run" tab to create a web object for this run. ')]),a("p",[e._v(" Web Objects are required to view data in AtlasXplore. ")])])],1):e._e(),e.web_obj_created&&e.run_id_confirmed&&e.data_loaded?a("v-card",{staticClass:"ma-2 success-card"},[a("v-card-title",{staticClass:"success-card__title"},[a("v-icon",{staticClass:"success-card__icon",attrs:{color:"success"}},[e._v("mdi-check-circle")]),a("span",{staticClass:"success-card__text"},[e._v("Web Object Uploaded.")])],1),a("v-card-text",{staticClass:"success-card__message"},[a("p",[e._v(" The run is successfully uploaded using the path above. ")]),a("p",[e._v(' To change the web object used for this run, navigate to the "Create a Run" tab. ')])])],1):e._e(),!e.web_obj_created&&e.web_obj_path&&e.run_id_confirmed&&e.data_loaded?a("v-card",{staticClass:"ma-2 path-no-created-card"},[a("v-card-title",{staticClass:"path-no-created-card__title"},[a("v-icon",{staticClass:"path-no-created-card__icon",attrs:{color:"#FFC300"}},[e._v("mdi-minus-circle")]),a("span",{staticClass:"path-no-created-card__text"},[e._v("Web Object Available.")])],1),a("v-card-text",{staticClass:"path-no-created-card__message"},[a("p",[e._v(" The run has been generated but not yet uploaded. ")]),a("p",[e._v(" Fill out the form and click submit to upload the run. ")])])],1):e._e()],1)],1),a("v-row",[a("v-col",[a("v-btn",{staticStyle:{position:"relative",left:"50%",bottom:"5%"},attrs:{disabled:!e.run_id_confirmed},on:{click:e.upload_data}},[e._v(" Submit ")])],1)],1)],1)])},Hc=[],Jc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("id-selector",{ref:"id_selector",attrs:{new_available:e.new_available,label:"Run ID",id_list:e.run_id_list,loading:e.loading,key_display_value:"run_id"},on:{"run-selected":e.run_selected,"edit-id":e.edit_run_id,"close-edit-id":e.close_edit_run_id,"custom-id":e.custom_run_id}})},Xc=[],Qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("v-row",[a("v-text-field",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.id_search_clicked=!1,expression:"id_search_clicked = false"}],attrs:{label:e.label,disabled:e.id_selected},on:{input:e.search_runs,click:function(t){e.id_search_clicked=!0}},model:{value:e.search_input,callback:function(t){e.search_input=t},expression:"search_input"}}),e.unique_id&&e.search_input&&!e.id_selected&&e.new_available?a("v-icon",{attrs:{color:"green"},on:{click:e.user_entered_id}},[e._v(" mdi-plus ")]):e._e(),e.id_selected?a("v-icon",{attrs:{color:"red"},on:{click:e.edit_id}},[e._v(" mdi-pencil ")]):e._e(),e.editing_id_selection?a("v-icon",{attrs:{color:"red"},on:{click:e.close_edit_id}},[e._v(" mdi-arrow-right ")]):e._e()],1),e.id_selected?e._e():a("v-data-table",{attrs:{loading:e.loading,dense:"","single-select":"","items-per-page":4,headers:e.headers,items:e.available_ids},on:{"click:row":e.run_selected}})],1)},Yc=[],Kc=Object(v["c"])({name:"IdSelector",props:{new_available:{type:Boolean,required:!0},label:{type:String,required:!0},id_list:{type:Array,required:!0},key_display_value:{type:String,required:!0},loading:{type:Boolean,required:!0}},setup:function(e,t){Object(v["a"])((function(){return U.state.client}));var a=[{text:e.label,value:e.key_display_value,sortable:!1}],n=Object(v["g"])(""),r=Object(v["g"])(!1),i=Object(v["g"])([]),u=Object(v["g"])([]),l=Object(v["g"])(!1),s=Object(v["g"])(!1),o=Object(v["g"])(""),c=Object(v["a"])((function(){var t=!0;return u.value.forEach((function(a){a[e.key_display_value]===o.value&&(t=!1)})),t}));function d(a){o.value=a[e.key_display_value],l.value=!1,n.value=a[e.key_display_value],t.emit("run-selected",a),r.value=!0}function p(){var t=o.value,a=[],n=new RegExp(t,"i");i.value.forEach((function(t){n.test(t[e.key_display_value])&&a.push(t)})),u.value=a}function f(){l.value=!0,r.value=!1,p(),t.emit("edit-id")}function g(){l.value=!1,r.value=!0,o.value=n.value,t.emit("close-edit-id")}function m(e){n.value=e,o.value=e,r.value=!0}function h(){var e={id:o.value};l.value=!1,i.value.push(e),u.value.push(e),n.value=o.value,r.value=!0,t.emit("custom-id",n.value)}function b(){o.value="",r.value=!1,u.value=i.value}function _(e){i.value=e,u.value=e}return Object(v["h"])(e.id_list,(function(e){_(e)})),{id:n,local_id_list:i,available_ids:u,editing_id_selection:l,id_search_clicked:s,search_input:o,id_selected:r,headers:a,unique_id:c,reset_search_input:b,run_selected:d,search_runs:p,edit_id:f,close_edit_id:g,user_entered_id:h,set_id:m,reset_local_ids:_}}}),Zc=Kc,ed=Object(te["a"])(Zc,Qc,Yc,!1,null,null,null),td=ed.exports,ad=Object(v["c"])({name:"RunIdSelector",components:{IdSelector:td},props:{new_available:{type:Boolean,required:!0}},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(""),r=Object(v["g"])([]),i=Object(v["g"])(!1);function u(e){n.value=e.run_id,t.emit("run-selected",e)}function l(e){n.value=e;var a=t.refs.id_selector;a.set_id(e)}function s(){t.emit("edit-run-id")}function o(){t.emit("close-edit-run-id")}function c(e){n.value=e,t.emit("custom-run-id",n.value)}function d(e){var a=t.refs.id_selector;a.reset_local_ids(e),i.value=!1}function p(){var e;i.value=!0;var t=null===(e=a.value)||void 0===e?void 0:e.get_run_ids();t.then((function(e){r.value=e,d(e)}))}function f(){n.value="";var e=t.refs.id_selector;e.reset_search_input()}function g(){f(),p()}return Object(v["d"])((function(){p()})),{run_id_selected:n,run_id_list:r,loading:i,parent_selected_run:l,run_selected:u,edit_run_id:s,close_edit_run_id:o,custom_run_id:c,reset_visual:f,reset_full:g}}}),nd=ad,rd=Object(te["a"])(nd,Jc,Xc,!1,null,null,null),id=rd.exports,ud=Object(v["c"])({name:"WebUploader",components:{Selector:zi,RunIdSelector:id},setup:function(e,t){var a=Object(v["g"])("");function n(e){var t=e.split("/"),a=Object(Lr["a"])(t,3),n=a[0],r=a[1],i=a[2],u=Number.parseInt(i,10),l=Number.parseInt(n,10)-1,s=Number.parseInt(r,10),o=Date.UTC(u,l,s);return o}var r=[{text:"NGS ID",value:"ngs_id"},{text:"Results ID",value:"results_id"}],i=Object(v["a"])((function(){return n(a.value)})),u={Jan:"1",Feb:"2",Mar:"3",Apr:"4",May:"5",Jun:"6",Jul:"7",Aug:"8",Sep:"9",Oct:"10",Nov:"11",Dec:"12"},l=Object(v["a"])((function(){return U.state.client})),s=new Vi,o=Object(v["g"])(!1),c=Object(v["g"])(""),d=Object(v["g"])(""),p=Object(v["g"])(""),f=Object(v["g"])(""),g=Object(v["g"])(""),m=Object(v["g"])(""),h=Object(v["g"])(""),b=Object(v["g"])(""),_=Object(v["g"])(""),w=Object(v["g"])(""),x=Object(v["g"])(""),y=Object(v["g"])(""),O=Object(v["g"])([]),j=Object(v["g"])([]),R=Object(v["g"])(""),C=Object(v["g"])(""),S=Object(v["g"])(null),I=Object(v["g"])({}),A=Object(v["g"])(""),F=Object(v["g"])(""),M=Object(v["g"])(""),D=Object(v["g"])(!1),P=Object(v["g"])(""),T=Object(v["g"])(!1),E=Object(v["g"])(!0),B=Object(v["g"])(!1),q=[{text:"True",value:!0},{text:"False",value:!1}];function N(){R.value="",x.value="",y.value="",c.value="",f.value="",p.value="",a.value="",R.value="",A.value="",F.value="",d.value="",h.value="",M.value="",w.value="",g.value="",b.value="",_.value="",P.value="",m.value="",D.value=!1,C.value="",S.value=null}function L(e){T.value=!0,R.value=e,E.value=!1,N()}function G(e){if(R.value=e.run_id,c.value=e.assay,f.value=e.species,p.value=e.organ,D.value=e.public,b.value=e.experimental_condition,P.value=e.group,F.value=e.result_title,A.value=e.result_description,d.value=e.results_folder_path,g.value=e.sample_id,C.value=e.ngs_id,x.value=e.channel_width,y.value=e.number_channels,w.value=e.tissue_source,S.value=e.results_id,h.value=e.epitope,m.value=e.tissue_type,_.value=e.pmid,1===e.public?D.value=!0:D.value=!1,1===e.web_object_available?E.value=!0:E.value=!1,e.date){var t=new Date(0);t.setUTCMilliseconds(e.date);var n=t.toUTCString(),r=n.split(" "),i=r[1],l=r[2],s=r[3];console.log(l);var o=u[l];console.log(o),a.value=o.concat("/".concat(i.concat("/".concat(s))))}}function $(e){return z.apply(this,arguments)}function z(){return z=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n,r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,B.value=!0,r=R.value,a&&(r=a,i=t.refs.run_id_selector,i.parent_selected_run(r)),e.next=6,null===(n=l.value)||void 0===n?void 0:n.get_info_from_run_id(r);case 6:u=e.sent,B.value=!1,"Not-Found"===u[0]?(ke.dispatch({text:"Run ID Not Present in Database.",options:{color:"red"}}),N()):(ke.dispatch({text:"Run Information Successfully Loaded.",options:{color:"green"}}),G(u[0]),T.value=!0,o.value=!0),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),B.value=!1,ke.dispatch({text:"Error during search.",options:{color:"red"}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),z.apply(this,arguments)}function V(e){o.value=!1,R.value=e.run_id,$(null),T.value=!0}function W(e){var t=e.inx,a=j.value[t];G(a)}function H(){return J.apply(this,arguments)}function J(){return J=Object(k["a"])(regeneratorRuntime.mark((function e(){var a,n,r,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return B.value=!0,e.prev=1,n={assay:c.value,species:f.value,organ:p.value,run_id:R.value,run_description:A.value,run_title:F.value,web_obj_path:d.value,epitope:h.value,regulation:M.value,tissue_source:w.value,sample_id:g.value,experimental_condition:b.value,pmid:_.value,group:P.value,public:D.value,date:i.value,channel_width:x.value,number_channels:y.value,ngs_id:C.value,results_id:S.value,tissue_type:m.value},e.next=5,null===(a=l.value)||void 0===a?void 0:a.upload_metadata_from_page(n);case 5:r=e.sent,B.value=!1,"Success"===r&&(ke.dispatch({text:"Successful Upload!",options:{color:"green"}}),N(),T.value=!1,u=t.refs.run_id_selector,u.reset_visual()),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](1),B.value=!1,ke.dispatch({text:"Error! Unsuccessful Upload.",options:{color:"red"}}),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])}))),J.apply(this,arguments)}return{assay:c,web_obj_path:d,organ:p,species:f,tissue_condition:b,channel_width:x,run_id:R,run_description:A,run_title:F,pmid:_,sample_id:g,ngs_id:C,regulation:M,antibody:h,public_run:D,public_run_items:q,selected_group:P,date_human_readable:a,date_epoch:i,tissue_source:w,number_channels:y,available_run_ids:O,results_selection_headers:r,multiple_run_information:I,tissue_type:m,db_connection:s,results_selection_list:j,run_id_confirmed:T,web_obj_created:E,data_loaded:o,loading:B,results_id_selected:W,date_human_to_epoch:n,assign_fields:G,auto_populate_from_run_id:$,upload_data:H,clear_fields:N,run_selected:V,custom_run_id:L}}}),ld=ud,sd=(a("d018"),Object(te["a"])(ld,Wc,Hc,!1,null,"75cd875f",null)),od=sd.exports,cd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{attrs:{flat:""}},[a("v-card-actions",[a("v-col",[a("b",[e._v(" Create/Select Run ID ")]),a("run-id-selector",{attrs:{new_available:!0},on:{"run-selected":e.run_id_selected,"edit-run-id":e.edit_run_id,"close-edit-run-id":function(t){e.run_id_selected_bool=!0},"custom-run-id":e.custom_run_id}}),a("b",[e._v(" Specify H5AD Path ")]),a("v-select",{attrs:{disabled:e.loading||!e.run_id_selected_bool,loading:e.loading,items:e.available_buckets,clearable:"",label:"Bucket"},on:{input:e.generatePaths},model:{value:e.bucket_name,callback:function(t){e.bucket_name=t},expression:"bucket_name"}}),a("v-row",[a("v-text-field",{attrs:{label:"Path",disabled:e.loading||!e.bucket_name||e.path_selected||!e.run_id_selected_bool,loading:e.loading,hint:"ex: <bucket_name>/folder with <h5ad files>/"},on:{input:e.filterPaths},model:{value:e.path_name,callback:function(t){e.path_name=t},expression:"path_name"}}),e.path_selected?a("v-icon",{attrs:{disabled:!e.run_id_selected_bool,color:"red"},on:{click:function(t){e.path_selected=!1,e.filterPaths(),e.creation_job_sent=!1}}},[e._v(" mdi-pencil ")]):e._e()],1),e.path_selected&&e.run_id_selected_bool?a("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[e._v("Status")]),a("th",[e._v("File Name")])])]),a("tbody",e._l(e.all_files,(function(t){return a("tr",{key:t.name},[t.visible?a("td",[e._v(e._s(t.value?"Present":"Not Present"))]):e._e(),t.visible?a("td",[a("v-chip",{attrs:{small:"",color:t.color,label:""}},[e._v(e._s(t.name))])],1):e._e()])})),0)]},proxy:!0}],null,!1,471816483)}):e._e(),e.all_files.length>0&&e.path_selected?a("v-checkbox",{attrs:{color:"green",disabled:!e.run_id_selected_bool,label:"Is this run Transcriptome"},on:{click:e.toggle_transcriptome},model:{value:e.is_transcriptome,callback:function(t){e.is_transcriptome=t},expression:"is_transcriptome"}}):e._e(),!e.bucket_name||e.loading||e.path_selected?e._e():a("v-data-table",{attrs:{dense:"","single-select":"","items-per-page":5,headers:e.bucket_headers,items:e.search_consistent_paths},on:{"click:row":e.select_path}})],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" Job Description ")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Job Description",disabled:e.loading||!e.run_id_selected_bool||!e.path_selected||(!e.is_transcriptome||!e.genes_h5ad_present)&&!e.all_files_present,loading:e.loading},model:{value:e.job_description,callback:function(t){e.job_description=t},expression:"job_description"}}),a("v-card-actions",[a("v-btn",{staticStyle:{position:"relative",left:"45%",bottom:"2%"},attrs:{disabled:(!e.is_transcriptome||!e.genes_h5ad_present)&&!e.all_files_present||!e.path_selected||e.loading||!e.bucket_name||!e.run_id_selected_bool||!e.job_description||e.creation_job_sent},on:{click:e.createObjects}},[e._v(" Submit ")])],1)],1)],1)],1)],1),a("v-row",[a("v-col")],1),a("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.show_job_sent_dialog,callback:function(t){e.show_job_sent_dialog=t},expression:"show_job_sent_dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline; justify-center"},[e._v("Request Received")]),a("v-card-text",{staticClass:"justify-center"},[e._v("Text File Creation for "+e._s(e.run_id)+" is in progress.")]),a("v-card-text",{staticClass:"justify-center"},[e._v("Check the Jobs Managment tab to view current and past jobs.")]),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.show_job_sent_dialog=!1}}},[e._v("Ok.")])],1)],1)],1)],1)},dd=[],vd=(a("6062"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("v-row",{staticClass:"justify-center",staticStyle:{"margin-bottom":"10px"}},[a("b",[e._v(" Refresh Jobs Table ")]),a("v-icon",{staticStyle:{position:"relative",bottom:"5px",left:"5px"},attrs:{size:"30"},on:{click:e.get_jobs}},[e._v(" mdi-refresh ")])],1),a("v-data-table",{attrs:{headers:e.headers,items:e.jobs,search:e.search,"sort-by":"job_start_time","sort-desc":"",loading:e.loading}})],1)}),pd=[],fd=Object(v["c"])({components:{About:an},name:"JobsTable",props:{filter_username:{type:Boolean,required:!0},filter_job_name:{type:Boolean,required:!1},job_name:{type:String,required:!1},filter_run_id:{type:Boolean,required:!1},run_id:{type:String,required:!1}},setup:function(e,t){var a=[{text:"Job",value:"job_name"},{text:"Job Description",value:"job_description"},{text:"Run ID",value:"run_id"},{text:"Job Status",value:"job_status"},{text:"User",value:"username"},{text:"Start Time",value:"job_start_time"},{text:"Completion Time",value:"job_completion_time"}],n="",r=Object(v["g"])(),i=Object(v["a"])((function(){return U.state.client})),u=Object(v["g"])(!1);function l(){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.value){t.next=2;break}return t.abrupt("return");case 2:return u.value=!0,a={filter_username:e.filter_username,job_name:e.filter_job_name?e.job_name:null,run_id:e.filter_run_id?e.run_id:null},console.log(a),t.next=7,i.value.getJobs(a);case 7:n=t.sent,r.value=n,u.value=!1;case 10:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}return Object(v["d"])((function(){l()})),{headers:a,search:n,loading:u,jobs:r,get_jobs:l}}}),gd=fd,md=Object(te["a"])(gd,vd,pd,!1,null,null,null),hd=md.exports,bd=Object(v["c"])({name:"CreateWebObject",components:{JobsTable:hd,RunIdSelector:id},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(null),r=[{text:"Path Names",value:"path",sortable:!1}],i=Object(v["g"])([]),u=Object(v["g"])(null),l=(Object(v["g"])(!1),Object(v["g"])(!1)),s=Object(v["g"])([]),o=Object(v["g"])([]),c=Object(v["g"])(!1),d=Object(v["g"])([]),p=Object(v["g"])(!1),f=Object(v["g"])(),g=Object(v["g"])(null),m=Object(v["g"])(null),h=Object(v["g"])(!1),b=Object(v["g"])(""),_=Object(v["g"])(!1),w=Object(v["g"])(!1),x=Object(v["g"])(""),y=Object(v["g"])(!1),O=Object(v["g"])(!1),j=Object(v["g"])(!1),R=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.getTaskStatus(t);case 4:f.value=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(){var e=s.value.filter((function(e){return e.path.includes(n.value)}));o.value=e}function S(e){p.value=!1,n.value=e.path}function I(){return A.apply(this,arguments)}function A(){return A=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=a.value)||void 0===t?void 0:t.getBuckets();case 2:n=e.sent,r=n.map((function(e){return e})),i.value=r;case 5:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function F(){return M.apply(this,arguments)}function M(){return M=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,r,i,d,v,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u.value&&0!==u.value.length){e.next=2;break}return e.abrupt("return");case 2:return h.value=!1,l.value=!1,O.value=!1,y.value=!1,p.value=!1,c.value=!0,r=function(e){var t=e.match(/(data\/.+\/)(h5)/),a=t[1];return a?(a=a.slice(0,-1),a):""},i={path:"data",bucket:u.value,filter:["h5ad"]},e.next=12,null===(t=a.value)||void 0===t?void 0:t.getFileList(i);case 12:d=e.sent,v=d.map((function(e){return r(e)})),f=Object(Xu["a"])(new Set(v)),s.value=f.map((function(e){return{path:e}})),o.value=s.value,c.value=!1,n.value="";case 19:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function D(){l.value=!1,!0===w.value?d.value.forEach((function(e,t){"genes.h5ad"!==e.name&&(d.value[t].visible=!1)})):(console.log("not transcriptome"),d.value.forEach((function(e,t){d.value[t].visible=!0})))}function P(){return T.apply(this,arguments)}function T(){return T=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,r,i,l,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==n.value.length&&0!==n.value.length){e.next=2;break}return e.abrupt("return");case 2:return c.value=!0,r=["genes.h5ad","motifs.h5ad","motifs.csv"],i={path:n.value,bucket:u.value,filter:["h5ad","motifs.csv"],only_files:!0},e.next=7,null===(t=a.value)||void 0===t?void 0:t.getFileList(i);case 7:l=e.sent,s=l.join(),o=[],r.forEach((function(e){var t={};t=s.includes(e)?{name:e,color:"green",value:!0,visible:!0}:{name:e,color:"red",value:!1,visible:!0},!0===w.value&&"genes.h5ad"!==e&&(t.visible=!1),o.push(t)})),d.value=o,s.includes("genes.h5ad")&&s.includes("motifs.h5ad")&&s.includes("motifs.csv")?(p.value=!1,y.value=!0,O.value=!0):s.includes("genes.h5ad")?(p.value=!0,y.value=!1,O.value=!0):(p.value=!0,y.value=!1,O.value=!1),c.value=!1;case 14:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function E(e){d.value=[],h.value=!0,n.value=e.path,P()}function B(e){return q.apply(this,arguments)}function q(){return q=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function N(){return L.apply(this,arguments)}function L(){return L=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,r,i,s,o,d,v,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,c.value=!0,e.next=6,null===(t=a.value)||void 0===t?void 0:t.ensure_run_id_created(b.value);case 6:if(r=e.sent,"Success"!==r){e.next=35;break}return i="webfile.create_files",s="atxcloud_webfile",o={aws_path:"".concat(n.value,"/h5/obj"),rna_flag:p.value,bucket_name:u.value},d=[o],v={run_id:b.value,description:x.value},e.next=15,a.value.postTask(i,d,v,s);case 15:return h=e.sent,c.value=!1,j.value=!0,l.value=!0,e.next=21,R(h._id);case 21:if("SUCCESS"===f.value.status||"FAILURE"===f.value.status){e.next=33;break}if("PROGRESS"!==f.value.status){e.next=26;break}return e.next=25,B(f.value.progress);case 25:m.value="".concat(f.value.progress,"% - ").concat(f.value.position);case 26:return e.next=28,new Promise((function(e){g.value=window.setTimeout(e,1e3)}));case 28:return g.value=null,e.next=31,R(h._id);case 31:e.next=21;break;case 33:e.next=38;break;case 35:ke.dispatch({text:"Run ID not created",options:{right:!0,color:"error"}}),l.value=!1,c.value=!1;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](2),c.value=!1,console.log(e.t0);case 44:case"end":return e.stop()}}),e,null,[[2,40]])}))),L.apply(this,arguments)}function G(){y.value=!1,d.value=[],n.value="",h.value=!1,s.value=[],o.value=[],p.value=!1,O.value=!1,u.value=null}function $(e){return z.apply(this,arguments)}function z(){return z=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,s,o,c,d,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l.value=!1,G(),e.next=4,null===(r=a.value)||void 0===r?void 0:r.get_info_from_run_id(t.run_id);case 4:if(i=e.sent,"Transcriptome"===i[0].assay&&(w.value=!0),null===i[0].results_folder_path){e.next=18;break}return s=i[0].results_folder_path,o=s.indexOf("S3://")+5,c=s.substring(o),d=c.indexOf("/"),v=c.substring(0,d),p=c.substring(d+1,c.length-1),u.value=v,e.next=16,F();case 16:n.value=p,E({path:n.value});case 18:b.value=t.run_id,_.value=!0;case 20:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function V(e){_.value=!0,b.value=e,w.value=!1,G()}function W(){_.value=!1}return Object(v["h"])(u,(function(){null===u.value&&G()})),Object(v["d"])((function(){I()})),{path_name:n,bucket_name:u,available_buckets:i,bucket_headers:r,available_paths:s,loading:c,all_files:d,checkbox_flag:p,taskStatus:f,taskTimeout:g,progressMessage:m,search_consistent_paths:o,run_id_selected_bool:_,path_selected:h,fetchBuckets:I,searchPath:P,custom_run_id:V,updatePath:S,generatePaths:F,createObjects:N,filterPaths:C,updateProgress:B,edit_run_id:W,run_id_selected:$,is_transcriptome:w,select_path:E,toggle_transcriptome:D,all_files_present:y,genes_h5ad_present:O,run_id:b,creation_job_sent:l,show_job_sent_dialog:j,job_description:x}}}),_d=bd,wd=Object(te["a"])(_d,cd,dd,!1,null,null,null),xd=wd.exports,yd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mx-auto my-12",attrs:{width:"600"}},[a("v-card-title",{staticClass:"justify-center"},[e._v(" Modify Available Groups ")]),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"add-group",attrs:{label:"Group Name"},model:{value:e.entered_group_name,callback:function(t){e.entered_group_name=t},expression:"entered_group_name"}}),a("v-text-field",{staticClass:"add-group",attrs:{label:"Description"},model:{value:e.entered_group_description,callback:function(t){e.entered_group_description=t},expression:"entered_group_description"}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{color:"green",outlined:"",disabled:""===e.entered_group_description||""===e.entered_group_name||e.groups_list.includes(e.entered_group_name)},on:{click:e.add_group_clicked}},[e._v(" Create Group ")]),a("v-btn",{attrs:{color:"red",disabled:!e.groups_list.includes(e.entered_group_name),outlined:""},on:{click:e.remove_group}},[e._v(" Delete Group ")])],1)],1)],1)},kd=[],Od=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),jd=Object(v["c"])({name:"GroupManagment",setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])([]),r=Object(v["g"])(""),i=Object(v["g"])("");function u(){r.value="",i.value=""}function l(){u(),t.emit("update-groups")}function s(){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value){e.next=2;break}return e.abrupt("return");case 2:if(i.value){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null===(t=a.value)||void 0===t?void 0:t.create_group(r.value,i.value);case 6:u=e.sent,s=null===u||void 0===u?void 0:u.status,200===s?(ke.dispatch({text:"Successfully created group: ".concat(r.value).concat(".")}),n.value.push(r.value),l()):ke.dispatch({text:"Error when creating group: ".concat(r.value).concat(".")});case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=a.value)||void 0===t?void 0:t.delete_group(r.value);case 2:i=e.sent,u=null===i||void 0===i?void 0:i.status,200===u?(ke.dispatch({text:"Successfully Deleted ".concat(r.value).concat(".")}),s=n.value.indexOf(r.value),n.value.splice(s,1),l()):ke.dispatch({text:"Error when deleting ".concat(r.value).concat(".")});case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Od;case 2:return e.next=4,null===(t=a.value)||void 0===t?void 0:t.get_group_list();case 4:n.value=e.sent;case 5:case"end":return e.stop()}}),e)})))),{groups_list:n,entered_group_name:r,entered_group_description:i,add_group_clicked:s,remove_group:c}}}),Rd=jd,Cd=Object(te["a"])(Rd,yd,kd,!1,null,null,null),Sd=Cd.exports,Id=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticStyle:{position:"relative",top:"10px"}},[a("v-col",{attrs:{cols:"6"}},[a("study-selector",{ref:"study_selector",on:{"study-selected":e.study_selected,"edit-study-id":e.edit_study_id,"close-edit-study-id":e.close_edit_study_id,"new-study-id":e.new_study}}),a("v-select",{attrs:{disabled:!e.study_selected_bool,items:e.study_types,label:"Study Type"},model:{value:e.study.study_type_name,callback:function(t){e.$set(e.study,"study_type_name",t)},expression:"study.study_type_name"}}),a("v-text-field",{attrs:{disabled:!e.study_selected_bool,label:"Study Description",error:e.study_selected_bool&&!e.study.study_description},model:{value:e.study.study_description,callback:function(t){e.$set(e.study,"study_description",t)},expression:"study.study_description"}}),a("v-row",{staticClass:"justify-center"},[a("v-btn",{staticStyle:{"margin-bottom":"70px",position:"relative",top:"10px"},attrs:{disabled:!e.changes_made||!e.study_selected_bool||!e.study.study_description},on:{click:e.save_changes}},[e._v(" Submit ")])],1)],1),a("v-col",{attrs:{cols:"6"}},[e._l(e.run_id_list,(function(t,n){return a("v-col",{key:t.run_id},[a("v-card",{staticStyle:{transform:"scale(0.7)"}},[a("v-card-title",{staticClass:"justify-center"},[e._v(" Run Id: "+e._s(t.run_id))]),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{staticStyle:{position:"relative",bottom:"4px"},attrs:{color:"error"},on:{click:function(a){return e.delete_run(n,t)}}},[a("v-icon",[e._v(" mdi-delete ")])],1)],1)],1)],1)})),a("v-row",{staticClass:"justify-center",staticStyle:{margin:"14px"}},[!e.selecting_run_id&&e.study_selected_bool?a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.selecting_run_id=!0}}},[a("v-icon",[e._v(" mdi-plus ")])],1):e._e(),e.selecting_run_id?a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticClass:"justify-center"},[e._v(" Add Run Id "),a("v-icon",{staticStyle:{position:"relative",left:"10px"},attrs:{color:"error"},on:{click:function(t){e.selecting_run_id=!1}}},[e._v(" mdi-cancel ")])],1),e.selecting_run_id?a("run-id-selector",{staticStyle:{position:"relative",bottom:"30px"},attrs:{new_available:!1},on:{"run-selected":e.add_run}}):e._e()],1):e._e()],1)],2)],1)],1)},Ad=[],Fd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("id-selector",{ref:"id_selector",attrs:{new_available:!0,label:"Study Name",id_list:e.study_id_list,loading:e.loading,key_display_value:"study_name"},on:{"run-selected":e.study_selected,"edit-id":e.edit_study_id,"close-edit-id":e.close_edit_study_id,"custom-id":e.user_entered_study_id}})],1)},Md=[],Dd=Object(v["c"])({name:"StudySelector",components:{IdSelector:td},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(""),r=Object(v["g"])([]),i=Object(v["g"])(!1);function u(e){n.value=e,t.emit("study-selected",n.value)}function l(){console.log("edit_study_id"),t.emit("edit-study-id")}function s(){console.log("close_edit_study_id"),t.emit("close-edit-study-id")}function o(e){n.value=e,t.emit("new-study-id",n.value)}function c(e){var a=t.refs.id_selector;a.reset_local_ids(e),a.reset_search_input(),i.value=!1}function d(){var e;i.value=!0;var t=null===(e=a.value)||void 0===e?void 0:e.get_study_ids();t.then((function(e){r.value=e,c(e)}))}function p(){n.value="",d();var e=t.refs.id_selector;e.reset_search_input()}return Object(v["d"])((function(){d()})),{study_id_selected:n,study_id_list:r,study_selected:u,edit_study_id:l,close_edit_study_id:s,user_entered_study_id:o,loading:i,reset_fields:p}}}),Pd=Dd,Td=Object(te["a"])(Pd,Fd,Md,!1,null,null,null),Ed=Td.exports,Ud=Object(v["c"])({components:{StudySelector:Ed,RunIdSelector:id,Selector:zi},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])([]),r=Object(v["g"])({}),i=Object(v["g"])(new Set),u=Object(v["g"])(new Set),l=Object(v["g"])(new Set),s=Object(v["g"])({}),o=Object(v["g"])(!1),c=Object(v["g"])(!1),d=Object(v["g"])(""),p=Object(v["g"])(""),f=Object(v["g"])([]),g=Object(v["g"])({}),m=Object(v["a"])((function(){if(i.value.size!==n.value.length)return!0;if(d.value!==r.value.study_description)return!0;if(p.value!==r.value.study_type_name)return!0;var e=!1;return n.value.forEach((function(t){i.value.has(t.run_id)||(e=!0)})),e}));function h(e){r.value={study_name:e,study_description:"",study_type_name:"",study_id:null},c.value=!0,n.value=[],i.value=new Set,u.value=new Set,l.value=new Set}function b(e){var t,r=null===(t=a.value)||void 0===t?void 0:t.get_study_runs(e);console.log(r),r.then((function(e){n.value=e,e.forEach((function(e){s.value[e.run_id]=e.tissue_id,i.value.add(e.run_id)}))}))}function _(e){return n.value.some((function(t){return t.run_id===e}))}function w(e,t){s.value[t.run_id]=t.tissue_id,n.value.splice(e,1),u.value.has(t.run_id)?u.value.delete(t.run_id):l.value.add(t.run_id)}function x(e){console.log(e),o.value=!1,s.value[e.run_id]=e.tissue_id,_(e.run_id)?ke.dispatch({text:"Run Id already selected",options:{color:"error",timeout:3e3}}):(n.value.push({run_id:e.run_id,tissue_id:e.tissue_id}),l.value.has(e.run_id)?l.value.delete(e.run_id):u.value.add(e.run_id))}function y(e){r.value=e,d.value=r.value.study_description,p.value=r.value.study_type_name,b(r.value.study_id),c.value=!0}function O(){n.value=[],r.value={},i.value=new Set,u.value=new Set,l.value=new Set,s.value={},o.value=!1,c.value=!1;var e=t.refs.study_selector;e.reset_fields()}function j(){return R.apply(this,arguments)}function R(){return R=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,i,o,c,d,v,p,f,m,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],u.value.forEach((function(e){n.push({run_id:e,tissue_id:s.value[e]})})),i=[],l.value.forEach((function(e){i.push({run_id:e,tissue_id:s.value[e]})})),o=r.value,c=o.study_description,d=o.study_id,v=o.study_name,p=o.study_type_name,f=g.value[p],m={id:d,study_name:v,description:c,adding_list:n,removing_list:i,study_type_id:f},e.next=9,null===(t=a.value)||void 0===t?void 0:t.update_study_table(m);case 9:h=e.sent,"Success"===h?(ke.dispatch({text:"Study updated",options:{color:"success",timeout:3e3}}),O()):ke.dispatch({text:"Error updating study",options:{color:"error",timeout:3e3}});case 11:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function C(){c.value=!1}function S(){c.value=!0}return Object(v["d"])((function(){var e,t=null===(e=a.value)||void 0===e?void 0:e.get_study_types();console.log(t),t.then((function(e){e.forEach((function(e){f.value.push(e.study_type_name),g.value[e.study_type_name]=e.study_type_id}))}))})),{study:r,run_id_list:n,study_selected:y,delete_run:w,save_changes:j,changes_made:m,runs_to_add:u,runs_to_remove:l,run_id_tissue_id:s,add_run:x,selecting_run_id:o,study_selected_bool:c,edit_study_id:C,close_edit_study_id:S,original_run_ids:i,new_study:h,original_description:d,study_types:f}}}),Bd=Ud,qd=Object(te["a"])(Bd,Id,Ad,!1,null,null,null),Nd=qd.exports,Ld=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"d-flex justify-center"},[a("v-col",{staticStyle:{padding:"0px"},attrs:{cols:"5"}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",[e._v(" Select Run Id ")]),a("v-card-actions",[a("run-id-selector",{ref:"run_id_selector",attrs:{new_available:!1},on:{"edit-run-id":e.edit_run_id,"close-edit-run-id":e.close_edit_run_id,"run-selected":e.run_id_selected}})],1)],1)],1)],1),a("v-row",[a("v-col",e._l(e.run_files,(function(t,n){return a("v-row",{key:t.unique_id},[a("selector",{attrs:{display_options:e.file_type_options,display_label:"File Type",variable:t.file_type_name,disabled:!t.editing,item_text:"text",item_value:"value"},on:{changed:function(t){return e.file_type_selected(n,t)},"option-added":function(t){return e.added_file_type(n,t)}}}),a("v-col",{staticStyle:{padding:"0px","margin-left":"25px"},attrs:{cols:"5"}},[a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!file.editing"}],attrs:{label:"Bucket Name",readonly:""},model:{value:t.bucket_name,callback:function(a){e.$set(t,"bucket_name",a)},expression:"file.bucket_name"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!file.editing"}],attrs:{label:"File Path",readonly:""},model:{value:t.file_path,callback:function(a){e.$set(t,"file_path",a)},expression:"file.file_path"}}),a("aws-searcher",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"file.editing"}],ref:"aws_searcher_".concat(t.unique_id),refInFor:!0,attrs:{only_files:!0},on:{"path-selected":function(e){t.file_path=e},"editing-path":function(e){t.file_path=null},"bucket-selected":function(e){t.bucket_name=e,t.file_path=null}}})],1),a("v-text-field",{staticStyle:{"margin-left":"30px"},attrs:{label:"File Description",disabled:!t.editing},model:{value:t.file_description,callback:function(a){e.$set(t,"file_description",a)},expression:"file.file_description"}}),t.editing?e._e():a("v-icon",{staticStyle:{"margin-left":"15px"},attrs:{large:""},on:{click:function(t){return e.edit_file(n)}}},[e._v(" mdi-pencil ")]),t.editing?a("v-icon",{attrs:{color:"green",disabled:!t.file_path||!t.file_description||!t.file_type_name,large:""},on:{click:function(t){return e.save_state(n)}}},[e._v(" mdi-check ")]):e._e(),a("v-icon",{staticStyle:{"margin-left":"15px"},attrs:{large:""},on:{click:function(t){return e.remove_file(n)}}},[e._v(" mdi-delete ")])],1)})),1)],1),a("v-row",{staticClass:"d-flex justify-center"},[a("v-icon",{attrs:{disabled:e.currently_editing||!e.tissue_id,large:"",color:"green"},on:{click:e.add_file}},[e._v(" mdi-plus ")])],1),a("v-row",{staticClass:"d-flex justify-center"},[a("v-btn",{staticStyle:{"margin-bottom":"15px"},attrs:{disabled:e.currently_editing||!e.action_made||!e.tissue_id,color:"primary"},on:{click:e.submit_file_changes}},[e._v(" Submit ")])],1)],1)},Gd=[],$d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-select",{attrs:{disabled:e.loading,loading:e.loading,items:e.available_buckets,label:"Bucket"},on:{input:e.generatePaths},model:{value:e.bucket_name,callback:function(t){e.bucket_name=t},expression:"bucket_name"}}),a("v-row",[a("v-text-field",{attrs:{label:"Path",disabled:e.loading||!e.bucket_name||e.path_selected,loading:e.loading,hint:"ex: <bucket_name>/folder with <h5ad files>/"},model:{value:e.path_name,callback:function(t){e.path_name=t},expression:"path_name"}}),e.path_selected?a("v-icon",{attrs:{color:"red"},on:{click:e.edit_path}},[e._v(" mdi-pencil ")]):e._e()],1),!e.bucket_name||e.loading||e.path_selected?e._e():a("v-data-table",{attrs:{dense:"","single-select":"","items-per-page":5,headers:e.bucket_headers,items:e.search_consistent_paths},on:{"click:row":e.select_path}})],1)},zd=[],Vd=Object(v["c"])({name:"AwsSearcher",props:{filters:{type:Array,default:null,required:!1},path:{type:String,default:"",required:!1},delimiter:{type:String,default:null,required:!1},only_files:{type:Boolean,default:!1,required:!1}},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(!1),r=Object(v["g"])([]),i=[{text:"Path Names",value:"path",sortable:!1}],u=Object(v["g"])(""),l=Object(v["g"])([]),s=Object(v["g"])(""),o=Object(v["g"])(!1),c=Object(v["a"])((function(){return l.value.filter((function(e){return e.path.toLowerCase().includes(s.value.toLowerCase())}))}));function d(e){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=!0,e.next=3,null===(r=a.value)||void 0===r?void 0:r.getFileList(t);case 3:i=e.sent,u=Object(Xu["a"])(new Set(i)),n.value=!1,l.value=u.map((function(e){return{path:e}}));case 7:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(u.value&&0!==u.value.length){a.next=2;break}return a.abrupt("return");case 2:return t.emit("bucket-selected",u.value),o.value=!1,n={path:e.path,bucket:u.value,filters:e.filters,delimiter:e.filters,only_files:e.only_files},a.next=7,d(n);case 7:s.value="";case 8:case"end":return a.stop()}}),a)}))),g.apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return h=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=a.value)||void 0===t?void 0:t.getBuckets();case 2:n=e.sent,i=n.map((function(e){return e})),r.value=i;case 5:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(){console.log("editing pat"),o.value=!1,t.emit("editing-path")}function _(e){o.value=!0,s.value=e.path,t.emit("path-selected",s.value)}function w(e,t){return x.apply(this,arguments)}function x(){return x=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.value=t,s.value=a,o.value=!0,n={bucket:t,path:"",filters:[],delimiter:"",only_files:!0},e.next=6,d(n);case 6:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}return Object(v["d"])((function(){m()})),{loading:n,available_buckets:r,bucket_name:u,path_name:s,path_selected:o,available_paths:l,search_consistent_paths:c,bucket_headers:i,generatePaths:f,select_path:_,load_from_parent:w,edit_path:b}}}),Wd=Vd,Hd=Object(te["a"])(Wd,$d,zd,!1,null,null,null),Jd=Hd.exports,Xd=Object(v["c"])({name:"AddFiles",components:{RunIdSelector:id,Selector:zi,AwsSearcher:Jd},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])(""),r=Object(v["g"])([]),i=Object(v["g"])([]),u=Object(v["g"])({}),l=Object(v["g"])({}),s=Object(v["g"])({}),o=Object(v["g"])(!1),c=Object(v["a"])((function(){var e=!1;return r.value.forEach((function(t){t.editing&&(e=!0)})),e})),d=Object(v["a"])((function(){var e={};return r.value.forEach((function(t){var a=t.unique_id;a in u.value&&Object.keys(t).forEach((function(n){n in u.value[a]&&t[n]!==u.value[a][n]&&(a in e||(e[a]={}),e[a][n]=t[n])}))})),e})),p=Object(v["a"])((function(){var e=[];return Object.keys(u.value).forEach((function(t){console.log(t),r.value.map((function(e){return e.unique_id})).includes(t)||e.push(t)})),e}));function f(){return g.apply(this,arguments)}function g(){return g=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.value.get_downloadable_files_for_run(n.value);case 2:t=e.sent,t.forEach((function(e){var t=rt(),a=l.value[e.file_type_id];r.value.push({file_type_name:a,file_description:e.file_description,file_path:e.file_path,bucket_name:e.bucket_name,file_type_id:e.file_type_id,unique_id:t,editing:!1}),u.value[t]=e}));case 4:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return h=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.value.get_file_type_options();case 2:t=e.sent,t.forEach((function(e){l.value[e.file_type_id]=e.file_type_name,s.value[e.file_type_name]=e.file_type_id,i.value.push(e.file_type_name)}));case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(e){console.log("run_id_selected",e),o.value=!1,u.value={},r.value=[];var t=e.tissue_id;n.value=t,f()}function _(){console.log("edit_run_id")}function w(){console.log("close_edit_run_id")}function x(){r.value.push({file_type_name:"",file_description:"",file_path:"",file_type_id:"",unique_id:rt(),editing:!0,bucket_name:""})}function y(e,t){r.value[e].file_type_name=t,r.value[e].file_type_id=s.value[t]}function j(e,t){i.value.push(t),s.value[t]=null,y(e,t)}function R(e){r.value[e].editing=!1,o.value=!0}function C(e){r.value.splice(e,1),o.value=!0}function S(){u.value={},r.value=[];var e=t.refs.run_id_selector;e.reset_visual(),m(),n.value=""}function I(e){o.value=!0,r.value[e].editing=!0;var a="aws_searcher_".concat(r.value[e].unique_id),n=t.refs[a][0],i=r.value[e],u=i.bucket_name,l=i.file_path;console.log(u,l),n.load_from_parent(u,l)}function A(){return F.apply(this,arguments)}function F(){return F=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,i,l,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],p.value.forEach((function(e){t.push(u.value[e].file_id)})),i=[],Object.keys(d.value).forEach((function(e){var t=d.value[e].file_id;i.push(Object(O["a"])({file_id:t},d.value[e]))})),l=[],r.value.forEach((function(e){e.unique_id in u.value||l.push(e)})),s={tissue_id:n.value,file_ids_to_remove:t,file_changes:i,files_to_add:l},e.next=9,a.value.submit_file_changes(s);case 9:o=e.sent,"Success"===o&&(ke.dispatch({text:"Success",options:{color:"green",right:!0}}),S());case 11:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:m();case 1:case"end":return e.stop()}}),e)})))),{run_files:r,file_type_options:i,removed_uuids:p,changes_dict:d,original_list:u,tissue_id:n,file_type_id_to_name:l,currently_editing:c,action_made:o,added_file_type:j,file_type_selected:y,save_state:R,remove_file:C,set_file_types:m,submit_file_changes:A,run_id_selected:b,edit_run_id:_,close_edit_run_id:w,add_file:x,edit_file:I}}}),Qd=Xd,Yd=Object(te["a"])(Qd,Ld,Gd,!1,null,null,null),Kd=Yd.exports,Zd=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),ev=["Job Managment","User Management","Group Managment","Create A Run","Add A Run","Group Runs","Add Files"],tv=Object(v["c"])({name:"AdminPanel",props:["query"],components:{ResetPassword:mc,AddRemoveGroup:Fc,WorkerStatus:Oc,AddRemoveUser:Bc,UserManagement:Vc,WebUploader:od,CreateWebObject:xd,GroupManagment:Sd,GroupingRuns:Nd,JobsTable:hd,AddFiles:Kd},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(1)),r=Object(v["g"])(null);Object(v["g"])(null);function i(){t.refs.user_managment.update_groups_list()}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Zd;case 2:e.query.params&&(n.value=4,"edit"===e.query.params.action&&(console.log(e.query.params),t.refs.run_editor.auto_populate_from_run_id(e.query.params.run_id))),U.commit.setSubmenu(null);case 4:case"end":return a.stop()}}),a)})))),{tabs:ev,tab:n,client:a,parent_results_id:r,resolveAuthGroup:Ze,update_groups_list:i}}}),av=tv,nv=Object(te["a"])(av,sc,oc,!1,null,null,null),rv=nv.exports,iv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",{key:"ChangePassword"},[a("change-password")],1),a("v-tab-item",{key:"WorkerStatus"})],1)],1)},uv=[],lv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-form",{model:{value:e.validPassword,callback:function(t){e.validPassword=t},expression:"validPassword"}},[a("v-text-field",{attrs:{type:"password",label:"Old Password"},model:{value:e.passwordChange.old_password,callback:function(t){e.$set(e.passwordChange,"old_password",t)},expression:"passwordChange.old_password"}}),a("v-text-field",{attrs:{type:"password",label:"New Password"},model:{value:e.passwordChange.new_password,callback:function(t){e.$set(e.passwordChange,"new_password",t)},expression:"passwordChange.new_password"}}),a("v-text-field",{attrs:{type:"password",label:"Confirm Password"},model:{value:e.passwordChange.confirm_password,callback:function(t){e.$set(e.passwordChange,"confirm_password",t)},expression:"passwordChange.confirm_password"}}),a("v-btn",{attrs:{color:"primary"},on:{click:e.onChangePassword}},[e._v("Change Password")])],1)],1)],1)],1)},sv=[],ov=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),cv=Object(v["c"])({name:"ChangePassword",setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])()),r=Object(v["g"])(!1),i=Object(v["g"])({editable:!1}),u=Object(v["g"])({old_password:null,new_password:null,confirm_password:null});function l(){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.value.user;case 4:n.value=e.sent;case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:if(!r.value){e.next=10;break}return n={old_password:u.value.old_password,new_password:u.value.new_password},e.next=6,a.value.changePassword(n);case 6:i=e.sent,i?(u.value={old_password:null,new_password:null,confirm_password:null},ke.dispatch({text:"Password changed successfully",options:{color:"success",right:!0}})):(ke.dispatch({text:"Password change failed",options:{color:"error",right:!0}}),u.value={old_password:null,new_password:null,confirm_password:null}),e.next=11;break;case 10:ke.dispatch({text:"Password is not valid",options:{color:"error",right:!0}});case 11:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ov;case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})))),{userInfo:n,overview:i,passwordChange:u,validPassword:r,onChangePassword:o}}}),dv=cv,vv=Object(te["a"])(dv,lv,sv,!1,null,null,null),pv=vv.exports,fv=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),gv=["Change Password","Config"],mv=Object(v["c"])({name:"UserSettings",components:{ChangePassword:pv},setup:function(e,t){t.root.$router;var a=Object(v["a"])((function(){return U.state.client})),n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(0));return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fv;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)})))),{tabs:gv,tab:n,client:a}}}),hv=mv,bv=Object(te["a"])(hv,iv,uv,!1,null,null,null),_v=bv.exports,wv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.resolveAuthGroup(["admin","user"])?a("v-container",[a("v-row",[a("RunIdList",{attrs:{availableRunsPassed:e.availableRuns},on:{"run-selected":e.handleRunSelection}}),a("AvailableFileList",{attrs:{fileList:e.availableFiles,runID:e.selectedRunID,flipLoading:e.flippingBoolean},on:{"file-selected":e.handleFileSelection}}),a("FileDisplay",{attrs:{fileName:e.file_selected,imageURL:e.selectedImageURL_array,jsonStringContents:e.jsonString_array,jsonContents:e.jsonPackage,csvStringContents:e.csvPretty_array,clearFileBoolean:e.switchRunBoolean},on:{"file-displayed":function(t){e.flippingBoolean=!e.flippingBoolean}}})],1)],1):e._e()},xv=[],yv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("h1",[e._v(" Run Ids ")]),e._l(e.availableRunsPassed,(function(t){return a("p",{key:t},[a("v-btn",{staticClass:"{'white': !clicked, 'blue': clicked}",on:{click:function(a){return e.$emit("run-selected",t)}}},[e._v(" "+e._s(t)+" ")])],1)}))],2)},kv=[],Ov=Object(v["c"])({name:"RunIdList",props:{availableRunsPassed:{required:!0,type:Array}},setup:function(e,t){var a="jonah",n=Object(v["g"])([]),r=Object(v["g"])(!1);return{availableRuns:n,name:a,clicked:r}}}),jv=Ov,Rv=(a("6693"),Object(te["a"])(jv,yv,kv,!1,null,"19e3a81f",null)),Cv=Rv.exports,Sv=(new Promise((function(e){Object(v["a"])((function(){return null!==U.state.client}))})),Object(v["c"])({name:"AtlasRunViewer",props:["query"],components:{RunIdList:Cv,AvailableFileList:tu,FileDisplay:lu},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])([]),r=Object(v["g"])(""),i=Object(v["g"])([]),u=Object(v["g"])([]),l=Object(v["g"])(!1),s=Object(v["g"])(""),o=Object(v["g"])({}),c=Object(v["g"])(""),d=Object(v["g"])([]),p=Object(v["g"])({}),f=Object(v["g"])(""),g=Object(v["g"])([]),m=Object(v["g"])(""),h=Object(v["g"])(!1),b=Object(v["g"])(!1),_="atx-illumina",w="Images";function x(e){return y.apply(this,arguments)}function y(){return y=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r,i,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return b.value=!b.value,n.value=[],r=w.concat("/").concat(m.value),i={bucket:_,path:r,filter:[""]},e.next=8,a.value.getFileList(i);case 8:for(u=e.sent,l=0;l<u.length;l+=1)s={id:l,file:u[l]},n.value.push(s);0===n.value.length&&n.value.push({id:0,file:"Run ".concat(t).concat(" has no spatial folder.")});case 11:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function O(e){m.value=e,x(e)}function j(e){return R.apply(this,arguments)}function R(){return R=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,l.value=!0,u={bucket_name:_,filename:t},e.next=5,null===(n=a.value)||void 0===n?void 0:n.getImageAsJPG({params:u});case 5:s=e.sent,s&&(r.value=URL.createObjectURL(s),i.value=[r.value]),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),R.apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return S=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{bucket_name:_,filename:t}},e.next=3,null===(n=a.value)||void 0===n?void 0:n.getCsvFile(r);case 3:i=e.sent,f.value=JSON.stringify(i,null,4),g.value=[f.value];case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return A=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={params:{bucket_name:_,filename:t}},e.next=3,null===(n=a.value)||void 0===n?void 0:n.getJsonFile(r);case 3:i=e.sent,o.value=i,c.value=JSON.stringify(i,null,4),d.value=[c.value];case 7:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function F(e){var t=e.split("."),a=t[t.length-1];"tif"===a.toLowerCase()||"png"===a.toLowerCase()||"jpg"===a.toLowerCase()||"jpeg"===a.toLowerCase()?j(e):"json"===a?I(e):"csv"===a&&C(e)}function M(e){F(e),s.value=e}function D(){return P.apply(this,arguments)}function P(){return P=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Set,r={bucket:_,path:w.concat("/"),filter:["postB_BSA.tif"]},e.next=4,null===(t=a.value)||void 0===t?void 0:t.getFileList(r);case 4:i=e.sent;try{i.forEach((function(e){var t=e.split("/")[1];n.has(t)||(n.add(t),u.value.push(t))}))}catch(l){console.log(l)}case 6:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}return Object(v["d"])((function(){D()})),{getRunFiles:x,availableFiles:n,loadFile:F,loadDisplayImage:j,selectedImageURL:r,selectedImageURL_array:i,availableRuns:u,loadRunIds:D,image_selected:l,handleFileSelection:M,file_selected:s,jsonPackage:o,jsonString:c,jsonString_array:d,loadCSVFile:C,selectedImage:p,csvPretty:f,csvPretty_array:g,selectedRunID:m,handleRunSelection:O,flippingBoolean:h,switchRunBoolean:b,resolveAuthGroup:Ze,root:w,bucket_name:_}}})),Iv=Sv,Av=Object(te["a"])(Iv,wv,xv,!1,null,null,null),Fv=Av.exports,Mv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[null===e.client.user?a("v-app-bar",[a("div",[a("v-img",{attrs:{width:"264px",src:"https://web.atlasxomics.com/company_logo.png"}})],1),a("v-spacer"),a("v-btn",{attrs:{medium:"",color:"black",text:""},on:{click:e.redirectToLogin}},[e._v("Sign In")])],1):e._e(),a("v-row",{staticStyle:{"margin-top":"10px"},attrs:{"no-gutters":""}},[a("v-col",{staticStyle:{"padding-left":"10px"},attrs:{cols:"12",sm:"3"}},[a("v-card",{attrs:{loading:e.loading,flat:"",dense:""}},[a("v-card-title",[e._v("Filters")]),a("v-divider",{staticStyle:{width:"91%"}}),a("v-list",e._l(e.groupsAndData,(function(t){return a("v-list-group",{key:t.title,staticStyle:{padding:"0"},attrs:{"sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",{staticStyle:{padding:"0","max-height":"50px"}},[a("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1)]},proxy:!0}],null,!0),model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"item.active"}},[a("div",[e._l(t.palceHolder,(function(n,r){return["Species"===t.title||"Organ"===t.title?[a("v-checkbox",{key:t.items[r],attrs:{color:"black",disabled:0==e.countHold[t.items[r]],label:t.items[r].replace("_"," ")+" ("+e.countHold[t.items[r]]+")"},on:{click:function(a){return e.checkBoxSort(t.items[r],t.title)}}})]:[a("v-checkbox",{key:t.items[r],attrs:{"input-value":t.items[r]==e.group_from_url,color:"black",disabled:0==e.countHold[t.items[r]],label:t.items[r]+" ("+e.countHold[t.items[r]]+")"},on:{click:function(a){return e.checkBoxSort(t.items[r],t.title)}}})]]})),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.limit,expression:"!item.limit"}]}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.limit,expression:"item.limit"}]},[e._l(Array.from({length:t.length-3},(function(e,t){return t+3})),(function(n){return["Species"===t.title||"Organ"===t.title?[a("v-checkbox",{key:t.items[n],attrs:{color:"black",disabled:0==e.countHold[t.items[n]],label:t.items[n].replace("_"," ")+" ("+e.countHold[t.items[n]]+")"},on:{click:function(a){return e.checkBoxSort(t.items[n],t.title)}}})]:[a("v-checkbox",{key:t.items[n],attrs:{"input-value":t.items[n]==e.group_from_url,color:"black",disabled:0==e.countHold[t.items[n]],label:t.items[n]+" ("+e.countHold[t.items[n]]+")"},on:{click:function(a){return e.checkBoxSort(t.items[n],t.title)}}})]]}))],2)],2),t.length>3?a("v-list-item",[a("v-btn",{attrs:{disabled:t.length<=3,small:"",text:"",color:"blue"},on:{click:function(e){t.limit=!t.limit}}},[e._v(e._s(t.limit?"Show Less":"Show More"))])],1):e._e()],1)})),1)],1)],1),a("v-col",{staticStyle:{"padding-right":"10px"},attrs:{cols:"12",sm:"8"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"7"}},[a("v-text-field",{attrs:{loading:e.loading,placeholder:"Search eg. PMID, Author, RunID",clearable:"","prepend-icon":"mdi-magnify"},on:{"click:prepend":function(t){return e.searchRuns(e.textSearch,"")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRuns(e.textSearch,"")},"click:clear":function(t){return e.searchRuns("","")}},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}})],1),a("v-col",{staticClass:"d-flex justify-center align-center mt-4",attrs:{cols:"12",sm:"3"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{disabled:null===e.client.user,color:e.pubPrivFlag?"green":"",icon:"","x-large":"",depressed:"",plain:"","retain-focus-on-click":""},on:{click:e.publicPrivateView}},"v-btn",r,!1),n),[a("v-icon",[e._v(e._s(e.pubPrivFlag?"mdi-toggle-switch-off":"mdi-toggle-switch"))])],1)]}}])},[a("span",[e._v(e._s(e.pubPrivFlag?"Show Private":"Show Public"))])])],1),a("v-col",{staticClass:"mt-4",attrs:{cols:"12",sm:"2"}},[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-btn",{attrs:{ripple:!1,plain:"",depressed:"",large:"",color:e.menuListFlag?"blue":"black",icon:""},on:{click:function(t){e.menuListFlag=!e.menuListFlag}}},[a("v-icon",[e._v("mdi-menu")])],1)],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-btn",{attrs:{ripple:!1,plain:"",depressed:"",large:"",color:e.menuListFlag?"black":"blue",icon:""},on:{click:function(t){e.menuListFlag=!e.menuListFlag}}},[a("v-icon",[e._v("mdi-picture-in-picture-top-right-outline")])],1)],1)],1)],1)],1),e.menuListFlag?[a("v-list",{attrs:{"two-line":""}},[a("v-list-item-group",{attrs:{multiple:""}},[e._l(e.numOfPubsHold[e.pageIteration],(function(t){return[a("v-list-item",{key:t.results_folder_path+t.run_id,on:{click:function(a){return e.runSpatial(t)}}},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.result_title))]),a("v-list-item-subtitle",{domProps:{textContent:e._s(t.date)}}),a("v-list-item-subtitle",{staticClass:"text--primary"},[e._v(e._s(t.result_description+", Experimental Condition: "+t.experimental_condition+(null!==t.epitope?"; Antibody: "+t.epitope:"")))]),a("v-list-item-subtitle",[a("v-chip",{attrs:{small:"",dark:"",color:e.labColors[t.group]}},[e._v(e._s(t.assay))])],1)],1)],1)]}))],2)],1)]:[e._l(e.numOfPubsHold[e.pageIteration],(function(t){return[a("v-card",{key:t.results_folder_path,style:{"border-top":"6px solid "+e.labColors[t.group]}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-card-title",{staticStyle:{cursor:"pointer"},on:{click:function(a){return e.runSpatial(t)}}},[e._v(e._s(t.result_title))]),a("v-card-subtitle",[e._v(e._s(t.date)),null!==t.link?a("v-icon",{attrs:{small:"",color:"blue"}},[e._v("mdi-paperclip")]):e._e(),null!==t.link?a("a",{staticStyle:{color:"#2196f3","text-decoration":"none"},attrs:{target:"_blank",href:t.link}},[e._v(e._s(t.journal))]):e._e()],1),a("v-card-text",[e._v(e._s(t.result_description+", Experimental Condition: "+t.experimental_condition+(null!==t.epitope?"; Antibody: "+t.epitope:"")))]),a("v-card-actions",{staticStyle:{position:"relative","margin-top":"40px","margin-left":"10px"}},[e.resolveAuthGroup(["any"])&&e.run_id_files_obj[t.run_id]?a("v-icon",{attrs:{medium:""},on:{click:function(a){return e.download_option_clicked(t)}}},[e._v(" mdi-download ")]):e._e()],1)],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("div",{staticStyle:{height:"inherit",width:"100%","text-align":"right"},on:{click:function(a){return e.edit_result(t.run_id)}}},[a("img",{staticStyle:{"max-width":"200px","max-height":"200px","margin-top":"10px","margin-right":"10px"},attrs:{src:t.imageLink}})])])],1)],1),a("div",{key:t.results_id,staticStyle:{width:"100%",height:"20px"}})]}))],a("div",[a("ul",{staticStyle:{"list-style":"none",display:"flex","justify-content":"center"}},[a("li",[a("v-btn",{attrs:{icon:""},on:{click:function(t){1===e.pageIteration?e.pageIteration=1:e.pageIteration-=1}}},[a("v-icon",[e._v("mdi-chevron-left")])],1)],1),e._l(e.numOfIt+1,(function(t){return[a("li",{key:t,staticStyle:{padding:"0px"},on:{click:function(a){return e.nextPageIteration(t)}}},[a("v-btn",{attrs:{id:"resize-butt",ripple:!1,plain:"",depressed:"",text:"",color:e.pageIteration===t?"blue":"black"}},[e._v(e._s(t))])],1)]})),a("li",[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.pageIteration===e.numOfIt+1?e.pageIteration=e.numOfIt+1:e.pageIteration+=1}}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1)],2)])],2)],1),a("v-dialog",{model:{value:e.download_option_selected_boolean,callback:function(t){e.download_option_selected_boolean=t},expression:"download_option_selected_boolean"}},[a("file-download-page",{attrs:{run_id:e.current_run_id,files:e.run_id_files_obj[e.current_run_id]||[]},on:{"presigned-generated":e.presigned_generated}})],1),a("div",{staticStyle:{width:"100%",height:"20px"}}),a("v-footer",{attrs:{padless:"",color:"#fff",elevation:"2"}},[a("v-col",{staticClass:"text-center",attrs:{cols:"10",sm:"5"}},[a("v-btn",{staticClass:"my-2",attrs:{text:"",color:"primary",rounded:"",role:"link"},on:{click:function(t){return e.openInNewTab("https://docs.atlasxomics.com/projects/AtlasXplore/en/latest/index.html")}}},[e._v("Platform Guide")])],1),a("v-col",{staticClass:"text-right",attrs:{cols:"10",sm:"5"}},[a("p",{staticStyle:{"font-size":"19px","font-family":"Poppins"}},[e._v("Copyright © 2023 AtlasXomics Inc.")])])],1)],1)},Dv=[];function Pv(e){return void 0!==e.isAxiosError}function Tv(e){return void 0!==e.serverURL}function Ev(e,t,a){return Uv.apply(this,arguments)}function Uv(){return Uv=Object(k["a"])(regeneratorRuntime.mark((function e(t,a,n){var r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.post("".concat(t,"/api/v1/auth/login"),{username:a,password:n});case 3:return r=e.sent,i=r.data.access_token,u="JWT ".concat(i),e.abrupt("return",We.Create(t,u));case 9:if(e.prev=9,e.t0=e["catch"](0),!Pv(e.t0)){e.next=13;break}return e.abrupt("return","Invalid username or password");case 13:return e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),Uv.apply(this,arguments)}var Bv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(e.run_id)+" Available Files ")]),a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[a("h3",[e._v("File Type ")])]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[a("h3",[e._v(" Filename ")])]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[a("h3",[e._v(" Description ")])])],1),e._l(e.computed_files,(function(t,n){return a("v-row",{key:t.file_id,staticClass:"ma-0"},[a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[e._v(" "+e._s(t.file_type_name)+" ")]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[e._v(" "+e._s(t.filename_short)+" ")]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[e._v(" "+e._s(t.file_description)+" ")]),a("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[a("div",{staticStyle:{"margin-right":"30px"}},[a("v-icon",{on:{click:function(t){return e.download_local(n)}}},[e._v(" mdi-download ")])],1),t.presigned_url?a("div",[a("v-text-field",{staticStyle:{"padding-top":"0px"},attrs:{value:t.presigned_url,readonly:"","append-icon":"mdi-content-copy"},on:{"click:append":function(a){return e.copy_url_keyboard(t.presigned_url)}}})],1):a("v-btn",{attrs:{outlined:""},on:{click:function(t){return e.generate_presigned_url(n)}}},[e._v(" Generate URL ")])],1)],1)}))],2)},qv=[],Nv=Object(v["c"])({name:"DownloadFileScreen",props:{run_id:{type:String||null,required:!0},files:{type:Array,required:!0}},setup:function(e,t){var a=Object(v["a"])((function(){return U.state.client})),n=Object(v["g"])([]),r=Object(v["g"])(!1),i=Object(v["a"])((function(){return e.files})),u=Object(v["g"])([]);function l(e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,u,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return",{});case 2:return n=i.value[t],r=n.file_path,u=n.bucket_name,l={path:r,bucket:u},e.next=7,a.value.generate_presigned_url(l);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return c=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:a=e.sent,n=i.value[t],r=document.createElement("a"),r.href=a,r.download=n.filename_short,document.body.appendChild(r),r.click();case 9:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=Object(k["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l(a);case 2:n=e.sent,t.emit("presigned-generated",a,n);case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){navigator.clipboard.writeText(e).then()}return Object(v["h"])(i,(function(e){u.value=Array(i.value.length).fill(!1)})),{file_list:n,loading:r,computed_files:i,loading_downloads:u,download_local:o,generate_presigned_url:d,copy_url_keyboard:f}}}),Lv=Nv,Gv=Object(te["a"])(Lv,Bv,qv,!1,null,null,null),$v=Gv.exports;function zv(e,t,a){for(var n=[],r=(e-t)/(a-1),i=0;i<a;i+=1)n.push(Math.ceil(t+r*i));return n.shift(),n.pop(),n}var Vv=Object(v["c"])({name:"LandingPage",props:["query"],components:{FileDownloadPage:$v},setup:function(e,t){var a=t.root.$router,n=Object(v["a"])((function(){return t.root.$route})),r=Object(v["a"])((function(){var e;return null===U.state.client?"":null===(e=U.state.client)||void 0===e?void 0:e.user})),i=Object(v["a"])((function(){return null===U.state.client?new We(qe,""):U.state.client})),u=Object(v["g"])(null),l=Object(v["g"])(!1),s=Object(v["g"])(Ue===Be),o=Object(v["g"])(!1),c=Object(v["g"])(!1),d=Object(v["g"])([]),p=Object(v["g"])([]),f=Object(v["g"])(!1),g=Object(v["g"])(null),m=Object(v["g"])({}),h=Object(v["g"])({}),b=Object(v["g"])({}),_=Object(v["g"])([]),w=Object(v["g"])(""),x=Object(v["g"])(!1),y=Object(v["g"])({}),O=Object(v["g"])({}),j=Object(v["g"])({}),R=Object(v["g"])(!1),C=Object(v["g"])(1),I=Object(v["g"])(0),A=Object(v["g"])(""),F=Object(v["g"])(-1),M=Object(v["g"])({}),D=Object(v["g"])(!1),P=Object(v["g"])([]),T=Object(v["g"])([]),E=Object(v["g"])("");function B(){console.log("image clicked")}function q(){a.push("/login")}function N(e){window.open(e,"_blank","noreferrer")}function L(e){var t=lt(n,e),r=a.resolve(t).href!==n.value.fullPath;r&&a.push(t)}function G(e){if(!1!==Ze(["admin"])){var t={component:"AdminPanel",params:{action:"edit",run_id:e}},r=lt(n.value,t);a.push(r)}}function $(e,t){C.value=1,x.value=!0;var a=Object(Xu["a"])(Object.values(h.value)),n=[],r="1",i=n.concat.apply([],a),u=0;b.value={};var l=Object.keys(O.value);l.forEach((function(e,t){O.value[e]=0}));var s={key:e,title:t};if(0===_.value.length)_.value.push(s);else{var o=_.value.findIndex((function(e){return S.a.isEqual(e,s)}));o>-1?_.value.splice(o,1):_.value.push(s)}var c={},d=-1;_.value.length>0?(i.forEach((function(e,t){var a=[];_.value.forEach((function(t){"Groups"===t.title&&(t.key.trim()===e.group.trim()?a.push(!0):a.push(!1)),"Data Type"===t.title&&(t.key.trim()===e.assay.trim()?a.push(!0):a.push(!1)),"Organ"===t.title&&(t.key.trim()===e.organ.trim()?a.push(!0):a.push(!1)),"Species"===t.title&&(t.key.trim()===e.species.trim()?a.push(!0):a.push(!1))})),a.includes(!1)||(d+=1,d%8===0&&Object.keys(c).length>0&&(r=(parseInt(r,10)+1).toString(),u+=1),Object.keys(c).includes(r)||(c[r]=[]),c[r].push(e))})),a=Object(Xu["a"])(Object.values(c)),n=[],i=n.concat.apply([],a),i.forEach((function(e,t){O.value[e.group]+=1,O.value[e.assay]+=1,O.value[e.species]+=1,O.value[e.organ]+=1})),I.value=u,b.value=c):(I.value=Object.keys(h.value).length-1,S.a.each(h.value,(function(e,t){b.value[t]=e})),S.a.each(y.value,(function(e,t){O.value[t]=y.value[t]}))),x.value=!1}function z(e){return V.apply(this,arguments)}function V(){return V=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:g.value=t.run_id,f.value=!0;case 2:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function W(e,t){return H.apply(this,arguments)}function H(){return H=Object(k["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,u,l,s,o,c,d,v,p,f,g,m,_,w,k,j,R,A,F,D,P;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==t&&0!==t.length&&void 0!==a){e.next=6;break}I.value=Object.keys(h.value).length-1,S.a.each(h.value,(function(e,t){b.value[t]=e})),S.a.each(y.value,(function(e,t){O.value[t]=y.value[t]})),e.next=56;break;case 6:if(C.value=1,n=t.toLowerCase(),x.value=!0,r="1",u=0,l=Object.keys(O.value),l.forEach((function(e,t){O.value[e]=0})),s=/^\d/,o=/[a-zA-Z]+\d/,c=s.test(n),d=o.test(n),v={},p=-1,!c){e.next=29;break}return e.next=22,i.value.searchPMID(n);case 22:f=e.sent,g=Object.keys(M.value),f.forEach((function(e,t){if(g.includes(e.results_id.toString())){var a=M.value[e.results_id];p+=1,p%8===0&&Object.keys(v).length>0&&(r=(parseInt(r,10)+1).toString(),u+=1),Object.keys(v).includes(r)||(v[r]=[]),v[r].push(a),O.value[a.group]+=1,O.value[a.assay]+=1,O.value[a.species]+=1,O.value[a.organ]+=1}})),I.value=u,b.value=v,e.next=56;break;case 29:if(!d){e.next=48;break}m=Object(Xu["a"])(Object.values(h.value)),_=[],w=_.concat.apply([],m),k=0;case 34:if(!(k<w.length)){e.next=46;break}if(j=w[k],R=j.results_folder_path.match(/(data\/)(.+)(\/)/),A=R[2],n.toUpperCase()!==A.toUpperCase()){e.next=43;break}return v[r]=[],v[r].push(j),b.value=v,e.abrupt("break",46);case 43:k+=1,e.next=34;break;case 46:e.next=56;break;case 48:return e.next=50,i.value.searchAuthors(n);case 50:F=e.sent,D=[],P=Object.keys(M.value),F.forEach((function(e,t){if(P.includes(e.results_id.toString())){var a=M.value[e.results_id];D.includes(a.results_id)||(D.push(a.results_id),p+=1,p%8===0&&Object.keys(v).length>0&&(r=(parseInt(r,10)+1).toString(),u+=1),Object.keys(v).includes(r)||(v[r]=[]),v[r].push(a),O.value[a.group]+=1,O.value[a.assay]+=1,O.value[a.species]+=1,O.value[a.organ]+=1)}})),I.value=u,b.value=v;case 56:x.value=!1;case 57:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function J(e){C.value=e}function X(e){return Q.apply(this,arguments)}function Q(){return Q=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,u,l,s,o,c,d,v,p,f,g,m,h,b,_,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,u=r.results_folder_path.match(/(data\/)(.+)(\/)/),l=u[2],s={path:"data/".concat(l,"/h5/obj"),bucket:"",filter:["h5ad"]},e.next=6,null===(n=i.value)||void 0===n?void 0:n.getFileList(s);case 6:if(o=e.sent,c=!!o.join().includes("eRegulons"),r.regulons_flag=c,null!==i.value.user){e.next=26;break}return d="data/".concat(l,"/h5/geneNames.txt.gz"),v="data/".concat(l,"/h5/motifNames.txt.gz"),p="data/".concat(l,"/h5/eRegulonNames.txt.gz"),f="data/".concat(l,"/h5/data.csv.gz"),g="data/".concat(l,"/h5/obj/motifs.h5ad"),m="data/".concat(l,"/h5/obj/genes.h5ad"),h="data/".concat(l,"/h5/obj/eRegulons.h5ad"),b="data/".concat(l,"/h5/obj/motifs.csv"),e.next=20,i.value.encodeLink({args:[f,d,v,p,m,g,h,b],meta:{run_id:l,species:r.species,tissue:r.organ,assay:r.assay,regulons_flag:c}});case 20:_=e.sent,w=_.encoded,U.commit.setXploreData(r),a.push({path:"/public?component=PublicGeneViewer&run_id=".concat(w.trim(),"&public=true&token=").concat(A.value.trim()),replace:!0}),e.next=28;break;case 26:U.commit.setXploreData(r),L({component:"AtlasXplore",run_id:l});case 28:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Y(e,t,a){var n="",r=e.match(/(data\/)(.+)(\/)/),i=r[2];return n="https://web.atlasxomics.com/frontpage_images/frontPage_".concat(i,".png"),n}function K(e){if("string"===typeof e)return e;var t=new Date(0);t.setUTCMilliseconds(e);var a=t.toUTCString(),n=a.split(" "),r=Object(Lr["a"])(n,6),i=r[0],u=r[1],l=r[2],s=r[3],o=(r[4],r[5],i.concat(" ".concat(l.concat(" ".concat(u).concat(" ".concat(s))))));return o}function Z(){return ee.apply(this,arguments)}function ee(){return ee=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.value.get_all_downloadable_files_run_id();case 2:t=e.sent,m.value=t;case 4:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(){return ae.apply(this,arguments)}function ae(){return ae=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r,i,u,l,s,o,c,v,p,f,g,m,_,w,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(x.value=!0,t=P.value,I.value=Math.ceil(t.length/8)-1,a=zv(0,t.length,Math.ceil(t.length/8)+1),n={},r=[],i=[],u=[],l=[],s={},o=[],c={},t.sort((function(e,t){var a=e.date,n=t.date;return a>n?-1:a<n?1:0})),v="1",p=0;p<t.length;p+=1)f=t[p],(f.organ||f.group||f.assay||f.species)&&(a.includes(p)&&(v=(parseInt(v,10)+1).toString()),Object.keys(n).includes(v)||(n[v]=[]),o.includes(f.group)||o.push(f.group),r.includes(f.group)||r.push(f.group),l.includes(f.organ)||l.push(f.organ),u.includes(f.species)||u.push(f.species),i.includes(f.assay)||i.push(f.assay),Object.keys(s).includes(f.group)?s[f.group]+=1:s[f.group]=1,Object.keys(s).includes(f.assay)?s[f.assay]+=1:s[f.assay]=1,Object.keys(s).includes(f.organ)?s[f.organ]+=1:s[f.organ]=1,Object.keys(s).includes(f.species)?s[f.species]+=1:s[f.species]=1,g=f,g.date=K(g.date),c[g.results_id]=g,g.imageLink=Y(f.results_folder_path,f.public,f.group),null!==g.result_description&&g.result_description.match(/\d+\s+um/)&&(m=g.result_description.match(/\d+\s+um/)[0].replace("u","µ"),_=g.result_description.replace(/\d+\s+um/,m),g.result_description=_),n[v].push(g));r.sort(),i.sort(),l.sort(),u.sort(),d.value.push({action:"mdi-ticket",palceHolder:r.length>3?3:r.length,active:!0,limit:!1,length:r.length,items:[].concat(r),title:"Groups"}),d.value.push({action:"mdi-ticket",palceHolder:i.length>3?3:i.length,active:!0,limit:!1,length:i.length,items:[].concat(i),title:"Data Type"}),d.value.push({action:"mdi-ticket",palceHolder:u.length>3?3:u.length,active:!0,limit:!1,length:u.length,items:[].concat(u),title:"Species"}),d.value.push({action:"mdi-ticket",palceHolder:l.length>3?3:l.length,active:!0,limit:!1,length:l.length,items:[].concat(l),title:"Organ"}),S.a.each(s,(function(e,t){O.value[t]=e,y.value[t]=e})),w=r.length<9?9:r.length,k=Bi()({colormap:"phase",nshades:3*w,format:"hex",alpha:1}),o.forEach((function(e,t){var a=0===t?0:3*(t+1);j.value[e]=k[a]})),M.value=c,h.value=n,b.value=n,E.value.length>0&&$(E.value,"Groups"),x.value=!1;case 32:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return re=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,u,l,s,o,c,v,p,f,g,m,w,k,R,C,A,F;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(x.value=!0,a=[],n=[],d.value=[],t?(a=T.value,I.value=Math.ceil(a.length/8)-1,n=zv(0,a.length,Math.ceil(a.length/8)+1)):(a=P.value,I.value=Math.ceil(a.length/8)-1,n=zv(0,a.length,Math.ceil(a.length/8)+1)),r={},i=[],u=[],l=[],s=[],o={},c=[],v={},p="1",a.sort((function(e,t){var a=e.date,n=t.date;return a>n?-1:a<n?1:0})),f=0;f<a.length;f+=1)g=a[f],(g.organ||g.group||g.assay||g.species)&&(n.includes(f)&&(p=(parseInt(p,10)+1).toString()),Object.keys(r).includes(p)||(r[p]=[]),c.includes(g.group)||c.push(g.group),i.includes(g.group)||i.push(g.group),l.includes(g.organ)||l.push(g.organ),s.includes(g.species)||s.push(g.species),u.includes(g.assay)||u.push(g.assay),Object.keys(o).includes(g.group)?o[g.group]+=1:o[g.group]=1,Object.keys(o).includes(g.assay)?o[g.assay]+=1:o[g.assay]=1,Object.keys(o).includes(g.organ)?o[g.organ]+=1:o[g.organ]=1,Object.keys(o).includes(g.species)?o[g.species]+=1:o[g.species]=1,m=g,m.date=K(m.date),v[m.results_id]=m,m.imageLink=Y(g.results_folder_path,g.public,g.group),null!==m.result_description&&m.result_description.match(/\d+\s+um/)&&(w=m.result_description.match(/\d+\s+um/)[0].replace("u","µ"),k=m.result_description.replace(/\d+\s+um/,w),m.result_description=k),r[p].push(m));i.sort(),u.sort(),l.sort(),s.sort(),S.a.each(o,(function(e,t){O.value[t]=e,y.value[t]=e})),R=i.length<9?9:i.length,C=Bi()({colormap:"phase",nshades:3*R,format:"hex",alpha:1}),c.forEach((function(e,t){var a=0===t?0:3*(t+1);j.value[e]=C[a]})),M.value=v,h.value=r,b.value=r,A=_.value.map((function(e){return e})),F=_.value.map((function(e){return e.title})),_.value=[],A.length>0&&A.forEach((function(e,t){$(e.key,e.title)})),d.value.push({action:"mdi-ticket",palceHolder:i.length>3?3:i.length,active:!0,limit:F.includes("Groups")&&A.length>0,length:i.length,items:[].concat(i),title:"Groups"}),d.value.push({action:"mdi-ticket",palceHolder:u.length>3?3:u.length,active:!0,limit:F.includes("Data Type")&&A.length>0,length:u.length,items:[].concat(u),title:"Data Type"}),d.value.push({action:"mdi-ticket",palceHolder:s.length>3?3:s.length,active:!0,limit:F.includes("Species")&&A.length>0,length:s.length,items:[].concat(s),title:"Species"}),d.value.push({action:"mdi-ticket",palceHolder:l.length>3?3:l.length,active:!0,limit:F.includes("Organ")&&A.length>0,length:l.length,items:[].concat(l),title:"Organ"}),x.value=!1;case 36:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ie(){D.value=!D.value,D.value||ne(!0),D.value&&ne(!1)}function ue(e,t){g.value&&(m.value[g.value][e].presigned_url=t)}return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==i.value.user){e.next=23;break}if(n.value.params.group&&(E.value=n.value.params.group),0!==i.value.authorizationToken.length){e.next=14;break}return e.next=5,i.value.logIntoPublic();case 5:return t=e.sent,e.t0=U.commit,e.next=9,We.CreatePublic(qe,"JWT ".concat(t.token));case 9:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1),A.value="JWT%20".concat(t.token),e.next=15;break;case 14:A.value=i.value.authorizationToken;case 15:return U.commit.setXploreData(null),e.next=18,null===i||void 0===i?void 0:i.value.getPublicRuns();case 18:P.value=e.sent,T.value=P.value.filter((function(e){return 1!==e.public})),te(),e.next=29;break;case 23:return e.next=25,null===i||void 0===i?void 0:i.value.getPublicRuns();case 25:P.value=e.sent,T.value=P.value.filter((function(e){return 1!==e.public})),Z(),0===T.value.length?(D.value=!0,ne(!1)):ne(!0);case 29:case"end":return e.stop()}}),e)})))),{SERVER_URL:Ue,getData:te,getSecureData:ne,loginErrorMessage:u,showAdvanced:l,useTestServer:s,signFlag:o,groupsAndData:d,dataTypes:p,show:c,current_run_id:g,getDownloadableFiles:Z,run_id_files_obj:m,client:i,checkBoxSort:$,numOfPubs:h,download_option_selected_boolean:f,runSpatial:X,numOfPubsHold:b,checkBoxArr:_,searchRuns:W,textSearch:w,download_option_clicked:z,loading:x,count:y,countHold:O,menuListFlag:R,pageIteration:C,nextPageIteration:J,numOfIt:I,labColors:j,redirectToLogin:q,jwtToken:A,user:r,showMoreFlag:F,indexOfRuns:M,grabImages:Y,pubPrivFlag:D,allTheRuns:P,privateRuns:T,publicPrivateView:ie,resolveAuthGroup:Ze,edit_result:G,group_from_url:E,image_clicked:B,presigned_generated:ue,openInNewTab:N}}}),Wv=Vv,Hv=(a("1a7f"),Object(te["a"])(Wv,Mv,Dv,!1,null,"3824c61a",null)),Jv=Hv.exports,Xv=(new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Object(v["c"])({name:"Home",components:{Appbar:jr,MainMenu:Mr,HomePage:Br,ImageViewer:ei,WaferTrace:Hr,AtlasViewer:Ao,ChipInformationViewer:si,WaferInformationViewer:mi,DbitInformationViewer:Oi,AtlasBrowser:Ou,AtlasXplore:is,AtlasTest:Rs,AtlasCompare:Ys,AtlasAnalytics:wo,AtlasUploader:lc,AdminPanel:rv,UserSettings:_v,AtlasRunViewer:Fv,LandingPage:Jv},setup:function(e,t){var a=t.root.$router,n=(Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}))),r=Object(v["a"])((function(){var e;return null===(e=U.state.client)||void 0===e?void 0:e.user})),i=Object(v["a"])((function(){return U.state.currentComponent})),u=Object(v["a"])((function(){return U.state.subMenu}));function l(){a.push("/login")}function s(){a.push("/visualization")}function o(){t.refs.mainmenu.openDrawer()}function c(e){if(e){if(e.component!==n.value.query.component){var t=lt(n.value,e);a.push(t)}}else if(n.value.query.component){var r=lt(n.value,null);a.push(r)}}return Object(v["h"])((function(){return r.value}),(function(e,t){e?ke.dispatch({text:"Welcome ".concat(e.username),options:{right:!0}}):t&&(ke.dispatch({text:"Goodbye ".concat(t.username),options:{right:!0}}),s())})),Object(v["h"])(n,(function(e){e.query.component?U.commit.setComponent(e.query):U.commit.setComponent({component:null})})),Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,et();case 2:t=n.value,"/"!==n.value.fullPath&&Je.value?U.commit.setComponent(t.query):(null!==r.value&&void 0!==r.value||Je.value?null===r.value||void 0===r.value||Je.value||l():s(),U.commit.setComponent({component:null}));case 4:case"end":return e.stop()}}),e)})))),{component:i,user:r,openDrawer:o,menuClicked:c,subMenu:u,currentRoute:n}}})),Qv=Xv,Yv=(a("b76c"),Object(te["a"])(Qv,De,Pe,!1,null,null,null)),Kv=Yv.exports,Zv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-main",[n("v-container",{attrs:{"fill-height":""}},[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{xl:"5",lg:"7",md:"9",sm:"11"}},[n("v-row",[n("v-img",{staticClass:"ml-auto",attrs:{"max-width":"1000","max-height":"1000",src:a("28f1")}}),n("v-overlay",{attrs:{opacity:"0",absolute:!0,dark:!1}},[n("v-card",{staticClass:"pa-6",attrs:{width:"700",disabled:e.loading}},[n("v-img",{attrs:{"max-width":"500",src:"company_logo.png"}}),e.loginScreenDisplayed?n("sign-in-page",{attrs:{loading:e.loading,loginErrorMessage_prop:e.loginErrorMessage},on:{"login-selected":e.loginUser,"registration-selected":function(t){e.loginScreenDisplayed=!1,e.registrationScreenDisplayed=!0},"forgot-password":function(t){e.loginScreenDisplayed=!1,e.forgotPasswordScreenDisplayed=!0}}}):e._e(),e.registrationScreenDisplayed?n("user-registration-page",{on:{"back-selected":function(t){e.loginScreenDisplayed=!0,e.registrationScreenDisplayed=!1},"account-requested":e.send_account_request}}):e._e(),e.confirmationScreenDisplayed?n("user-confirmation-screen",{attrs:{username:e.username_from_child},on:{"resend-code":e.resend_verification,"verification-code-submitted":e.check_registration_code_signup}}):e._e(),e.forgotPasswordScreenDisplayed?n("forgot-password-screen",{on:{back:function(t){e.loginScreenDisplayed=!0,e.forgotPasswordScreenDisplayed=!1},"forgot-password":e.forgot_password_request}}):e._e(),e.resetPassScreenDisplayed?n("password-reset-screen",{attrs:{username:e.username_from_child},on:{"resend-code":function(t){return e.send_forgot_password_code(e.username_from_child)},"code-submitted":e.reset_password}}):e._e()],1)],1)],1)],1)],1),n("v-dialog",{attrs:{width:"600"},model:{value:e.show_user_creation_message,callback:function(t){e.show_user_creation_message=t},expression:"show_user_creation_message"}},[n("v-card",{staticClass:"mx-auto",attrs:{width:"600"}},[n("v-card-title",{staticClass:"text-h5 grey lighten-2 justify-center"},[e._v(" Account Successfully Confirmed ")]),n("v-card-text",{staticClass:"text-center"},[e._v(" "+e._s(e.from_confirmation_to_password_reset?"Email verified! Check email for a new code to be used to reset account password.":"An email will be sent to ".concat(e.email).concat("once you are authorized to access your data."))+" ")]),n("div",{staticClass:"text-center"},[n("v-btn",{on:{click:function(t){e.show_user_creation_message=!1}}},[e._v(" Ok ")])],1)],1)],1),n("v-dialog",{attrs:{width:"600"},model:{value:e.show_email_never_verified_message,callback:function(t){e.show_email_never_verified_message=t},expression:"show_email_never_verified_message"}},[n("v-card",{staticClass:"mx-auto",attrs:{width:"600"}},[n("v-card-title",{staticClass:"text-h5 grey lighten-2 justify-center"},[e._v(" Error! Account has never verified email. ")]),n("v-card-text",{staticClass:"text-center"},[e._v(" As the account never verified it's associated email. Cannot use forget password functionality. ")]),n("v-card-text",{staticClass:"text-center"},[e._v(" Please contact support at help@atlasxomics.com for assistance or create another free account. ")]),n("div",{staticClass:"text-center"},[n("v-btn",{on:{click:function(t){e.show_email_never_verified_message=!1}}},[e._v(" Ok ")])],1)],1)],1),n("v-dialog",{attrs:{width:"600"},model:{value:e.show_account_requires_verification_message,callback:function(t){e.show_account_requires_verification_message=t},expression:"show_account_requires_verification_message"}},[n("v-card",{staticClass:"mx-auto",attrs:{width:"600"}},[n("v-card-title",{staticClass:"text-h5 grey lighten-2 justify-center"},[e._v(" Account has never verified email. ")]),n("v-card-text",{staticClass:"text-center"},[e._v(" Prior to resetting password first verify email used in registration. ")]),n("v-card-text",{staticClass:"text-center"},[e._v(" Email sent to address associated with "+e._s(e.username_from_child)+". ")]),n("div",{staticClass:"text-center"},[n("v-btn",{on:{click:function(t){e.show_account_requires_verification_message=!1}}},[e._v(" Ok ")])],1)],1)],1)],1)],1)},ep=[],tp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("v-text-field",{attrs:{label:"Full Name","prepend-icon":"mdi-account"},model:{value:e.name_user,callback:function(t){e.name_user=t},expression:"name_user"}}),a("v-text-field",{attrs:{label:"Email","prepend-icon":"mdi-email",error:!e.valid_email&&e.email.length>0},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{label:"PI Name","prepend-icon":"mdi-account-group"},model:{value:e.pi_name,callback:function(t){e.pi_name=t},expression:"pi_name"}}),a("v-text-field",{attrs:{label:"Organization","prepend-icon":"mdi-account-group"},model:{value:e.organization,callback:function(t){e.organization=t},expression:"organization"}}),a("v-text-field",{attrs:{label:"Username","prepend-icon":"mdi-account-circle"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{"prepend-icon":"mdi-lock","append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",label:"Password",type:e.show_pass?"text":"password"},on:{"click:append":function(t){e.show_pass=!e.show_pass},mousedown:function(t){e.password_clicked=!0}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.password_clicked||e.password.length>0?a("v-text-field",{attrs:{"prepend-icon":"mdi-lock",label:"Confirm Password",type:e.show_pass?"text":"password"},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}):e._e(),e.password_clicked|e.password.length>0?a("password-checker",{ref:"password-checker",attrs:{password:e.password,password2:e.password2}}):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"request-button",attrs:{color:"primary",disabled:!e.register_available},on:{click:e.account_request}},[e._v(" Request Account ")]),a("v-btn",{attrs:{color:"red"},on:{click:e.back_selected}},[e._v(" Back ")])],1)],1)},ap=[],np=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{color:"#E8E8E8"}},[a("v-card-title",[e._v(" "+e._s(e.pass_valid?"Strong Password":"Password Must Have")+" ")]),a("p",{staticClass:"password-text"},[e._v(" • At least 8 characters. "),e.atleast_8_chars?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")]),e.atleast_8_chars?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e()],1),a("p",{staticClass:"password-text"},[e._v(" • At least 1 lowercase character "),e.lowercase_char_present?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")]),e.lowercase_char_present?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e()],1),a("p",{staticClass:"password-text"},[e._v(" • At least 1 uppercase character "),e.uppercase_char_present?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e(),e.uppercase_char_present?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")])],1),a("p",{staticClass:"password-text"},[e._v(" • At least 1 number present "),e.number_present?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e(),e.number_present?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")])],1),a("p",{staticClass:"password-text"},[e._v(" • At least 1 symbol "),e.special_character_present?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")]),e.special_character_present?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e()],1),a("p",{staticClass:"password-text"},[e._v(" • Passwords match "),e.pass_repeated?e._e():a("v-icon",{attrs:{inline:!0,color:"red"}},[e._v(" "+e._s("mdi-file-excel-box")+" ")]),e.pass_repeated?a("v-icon",{attrs:{inline:!0,color:"green"}},[e._v(" "+e._s("mdi-check")+" ")]):e._e()],1)],1)},rp=[],ip=Object(v["c"])({name:"PasswordChecker",props:{password:{type:String,required:!0},password2:{type:String,required:!0}},setup:function(e,t){var a=Object(v["a"])((function(){return e.password.length>=8})),n=Object(v["a"])((function(){return/.*[a-z].*/.test(e.password)})),r=Object(v["a"])((function(){return/.*[A-Z].*/.test(e.password)})),i=Object(v["a"])((function(){return/.*[!@#$%^&&*()<>?/[{}].*/.test(e.password)})),u=Object(v["a"])((function(){return/.*[0-9].*/.test(e.password)})),l=Object(v["a"])((function(){return e.password===e.password2})),s=Object(v["a"])((function(){return u.value&&a.value&&n.value&&r.value&&i.value&&l.value}));function o(){this.$emit("pass-changed",s.value)}return{atleast_8_chars:a,lowercase_char_present:n,uppercase_char_present:r,special_character_present:i,number_present:u,pass_valid:s,pass_repeated:l,emit_valid_pass:o}},watch:{password:function(){this.emit_valid_pass()}}}),up=ip,lp=Object(te["a"])(up,np,rp,!1,null,null,null),sp=lp.exports,op=Object(v["c"])({components:{PasswordChecker:sp},setup:function(e,t){var a=Object(v["g"])(""),n=Object(v["g"])(""),r=Object(v["g"])(""),i=Object(v["g"])(""),u=Object(v["g"])(""),l=Object(v["g"])(""),s=Object(v["g"])(""),o=Object(v["g"])(!1),c=Object(v["g"])(!1),d=Object(v["a"])((function(){return r.value.length>=8})),p=Object(v["a"])((function(){return/.*[a-z].*/.test(r.value)})),f=Object(v["a"])((function(){return/.*[A-Z].*/.test(r.value)})),g=Object(v["a"])((function(){return/.*[!@#$%^&&*()<>?/[{}].*/.test(r.value)})),m=Object(v["a"])((function(){return/.*[0-9].*/.test(r.value)})),h=Object(v["a"])((function(){return/^\S+@\S+\.\S+$/.test(u.value)})),b=Object(v["a"])((function(){return r.value===i.value})),_=Object(v["a"])((function(){return d.value&&p.value&&f.value&&g.value&&m.value})),w=Object(v["a"])((function(){return _.value&&h.value&&a.value.length>0&&n.value.length>0&&l.value.length>0&&s.value.length>0&&b.value}));function x(){this.$emit("back-selected")}function y(){var e={name:a.value,username:n.value,password:r.value,email:u.value,pi_name:l.value,organization:s.value};this.$emit("account-requested",e)}function k(){a.value="",n.value="",r.value="",u.value="",l.value="",s.value=""}return Object(v["d"])(k),{atleast_8_chars:d,lowercase_char_present:p,uppercase_char_present:f,special_character_present:g,number_present:m,name_user:a,username:n,password:r,email:u,pi_name:l,organization:s,show_pass:o,register_available:w,valid_password:_,valid_email:h,password_clicked:c,password2:i,account_request:y,back_selected:x,clear_fields:k}}}),cp=op,dp=Object(te["a"])(cp,tp,ap,!1,null,null,null),vp=dp.exports,pp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("v-text-field",{attrs:{label:"Username",loading:e.loading,error:!!e.loginErrorMessage,"prepend-icon":"mdi-account-circle"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginUser.apply(null,arguments)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{label:"Password","error-messages":e.loginErrorMessage,"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off","prepend-icon":"mdi-lock",type:e.show_pass?"text":"password"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginUser.apply(null,arguments)},"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-btn",{staticStyle:{position:"relative",width:"100px",left:"500px",bottom:"15px"},attrs:{color:"success",disabled:!(e.username&&e.password)},on:{click:e.loginUser}},[e._v(" Sign In ")]),a("div",{staticStyle:{position:"relative",left:"160px",top:"60px"},on:{click:e.forgot_password}},[a("a",{attrs:{href:"#!"}},[e._v(" Forgot Password? ")])]),a("div",{staticStyle:{position:"relative",left:"310px",top:"35px"},on:{click:e.register_user}},[e._v(" No Account? "),a("a",{attrs:{href:"#!"}},[e._v(" Register ")])])],1)},fp=[],gp=Object(v["c"])({name:"SignInPage",props:{loading:{type:Boolean,required:!0},loginErrorMessage_prop:{type:String,required:!0}},setup:function(e,t){var a=Object(v["g"])(""),n=Object(v["g"])(""),r=Object(v["g"])(!1),i=Object(v["a"])((function(){return e.loginErrorMessage_prop}));function u(){var e={username:a.value,password:n.value};this.$emit("login-selected",e)}function l(){this.$emit("registration-selected")}function s(){this.$emit("forgot-password")}return{username:a,password:n,show_pass:r,loginErrorMessage:i,loginUser:u,register_user:l,forgot_password:s}}}),mp=gp,hp=(a("8168"),Object(te["a"])(mp,pp,fp,!1,null,"3fc23528",null)),bp=hp.exports,_p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[e._v(" Enter username for password reset: "),a("v-text-field",{attrs:{label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",disabled:0===e.username.length},on:{click:e.forgot_password_request}},[e._v(" Submit ")]),a("v-btn",{on:{click:e.back_selected}},[e._v(" Back ")])],1)],1)},wp=[],xp=Object(v["c"])({name:"ForgotPasswordScreen",setup:function(){var e=Object(v["g"])("");function t(){this.$emit("back")}function a(){this.$emit("forgot-password",e.value)}return{username:e,back_selected:t,forgot_password_request:a}}}),yp=xp,kp=Object(te["a"])(yp,_p,wp,!1,null,null,null),Op=kp.exports,jp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("h3",[e._v(e._s(e.username)+", check email for code.")]),a("v-text-field",{attrs:{label:"Confirmation Code"},model:{value:e.user_confirmation_code,callback:function(t){e.user_confirmation_code=t},expression:"user_confirmation_code"}}),a("v-text-field",{attrs:{"append-icon":e.show_pass?"mdi-eye":"mdi-eye-off",type:e.show_pass?"text":"password",label:"New Password"},on:{"click:append":function(t){e.show_pass=!e.show_pass}},model:{value:e.new_password,callback:function(t){e.new_password=t},expression:"new_password"}}),a("v-text-field",{attrs:{type:e.show_pass?"text":"password",label:"Confirm Password"},model:{value:e.new_password_2,callback:function(t){e.new_password_2=t},expression:"new_password_2"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"gray"},on:{click:e.resend_code}},[e._v(" Re-Send ")]),a("v-btn",{attrs:{color:"primary",disabled:!e.reset_available},on:{click:e.code_submitted}},[e._v(" Confirm ")])],1),e.new_password.length>0?a("password-checker",{attrs:{password:e.new_password,password2:e.new_password_2}}):e._e()],1)},Rp=[],Cp=Object(v["c"])({name:"PasswordResetScreen",components:{PasswordChecker:sp},props:{username:{type:String,required:!0}},setup:function(e,t){var a=Object(v["g"])(""),n=Object(v["g"])(""),r=Object(v["g"])(""),i=Object(v["g"])(!1),u=Object(v["a"])((function(){return n.value.length>=8})),l=Object(v["a"])((function(){return/.*[a-z].*/.test(n.value)})),s=Object(v["a"])((function(){return/.*[A-Z].*/.test(n.value)})),o=Object(v["a"])((function(){return/.*[!@#$%^&&*()<>?/[{}].*/.test(n.value)})),c=Object(v["a"])((function(){return/.*[0-9].*/.test(n.value)})),d=Object(v["a"])((function(){return n.value===r.value})),p=Object(v["a"])((function(){return d&&c.value&&u.value&&l.value&&s.value&&o.value})),f=Object(v["a"])((function(){return p&&a.value.length>0}));function g(){this.$emit("resend-code")}function m(){var t={code:a.value,password:n.value,username:e.username};this.$emit("code-submitted",t)}return{user_confirmation_code:a,new_password:n,show_pass:i,new_password_2:r,atleast_8_chars:u,lowercase_char_present:l,uppercase_char_present:s,special_character_present:o,number_present:c,pass_repeated:d,pass_valid:p,reset_available:f,resend_code:g,code_submitted:m}}}),Sp=Cp,Ip=Object(te["a"])(Sp,jp,Rp,!1,null,null,null),Ap=Ip.exports,Fp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",[a("h3",[e._v(e._s(e.username)+", check email for code.")]),a("v-text-field",{attrs:{label:"Confirmation Code"},model:{value:e.confirmation_code,callback:function(t){e.confirmation_code=t},expression:"confirmation_code"}}),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"gray"},on:{click:e.resend_code}},[e._v(" Re-Send ")]),a("v-btn",{attrs:{color:"primary",disabled:0===e.confirmation_code.length},on:{click:e.code_submitted}},[e._v(" Confirm ")])],1)],1)},Mp=[],Dp=Object(v["c"])({name:"PasswordResetScreen",props:{username:{type:String,required:!0}},setup:function(e,t){var a=Object(v["g"])("");function n(){this.$emit("resend-code")}function r(){this.$emit("verification-code-submitted",a.value)}return{confirmation_code:a,resend_code:n,code_submitted:r}}}),Pp=Dp,Tp=Object(te["a"])(Pp,Fp,Mp,!1,null,null,null),Ep=Tp.exports,Up=Object(v["c"])({name:"Login",components:{UserRegistrationPage:vp,SignInPage:bp,ForgotPasswordScreen:Op,PasswordResetScreen:Ap,UserConfirmationScreen:Ep},setup:function(e,t){Object(v["g"])();var a=t.root.$router,n=(Object(v["a"])((function(){return t.root.$route})),Object(v["g"])(!0)),r=Object(v["g"])(!1),i=Object(v["g"])(!1),u=Object(v["g"])(!1),l=Object(v["g"])(!1),s=Object(v["g"])(!1),o=Object(v["g"])(!1),c=Object(v["g"])(!1),d=Object(v["g"])(!1),p=Object(v["g"])(!1),f=Object(v["g"])(!1),g=Object(v["g"])(!1),m=Object(v["g"])(!1),h=Object(v["g"])(""),b=Object(v["g"])(""),_=Object(v["g"])(""),w=Object(v["g"])(""),x=Object(v["g"])(""),y=Object(v["g"])(Ue===Be);function O(e){return j.apply(this,arguments)}function j(){return j=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,m.value=!0,r=qe,e.next=5,Ev(r,a,n);case 5:i=e.sent,Tv(i)?(u=Ye(),u&&Ke(),Qe({token:i.authorizationToken,url:i.serverURL}),U.commit.setClient(i)):x.value=i,m.value=!1;case 8:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function R(e){return C.apply(this,arguments)}function C(){return C=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new We(qe,""),e.prev=1,e.next=4,a.user_request_account(t);case 4:n=e.sent,u=n.data,n.status,"exists"!==u?(i.value=!0,r.value=!1,l=t.username,h.value=l):ke.dispatch({text:"Username already exists. Please choose another.",options:{color:"red"}}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("error"),ke.dispatch({text:"There was an error when requesting an account.",options:{color:"red"}});case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),C.apply(this,arguments)}function S(){return I.apply(this,arguments)}function I(){return I=Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t=new We(qe,""),t.resend_registration_code(h.value)}catch(a){console.log("error")}case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return F=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=new We(qe,""),e.next=4,a.forgotPasswordRequest(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e["catch"](0),ke.dispatch({text:"Error when sending password reset code.",options:{color:"red"}}),e.abrupt("return","Error");case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),F.apply(this,arguments)}function M(e){return D.apply(this,arguments)}function D(){return D=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(t);case 3:a=e.sent,h.value=t,"Success"===a.state&&"email"===a.CodeDeliveryDetails.DeliveryMedium.toLowerCase()?(u.value=!1,f.value=!0,h.value=t):"Success"===a.state&&"sms"===a.CodeDeliveryDetails.DeliveryMedium.toLowerCase()?ke.dispatch({text:"Error! Contact support for further help."}):"user_na"===a.state.toLowerCase()?ke.dispatch({text:"Username does not exist."}):"email_unconfirmed"===a.state.toLowerCase()?(s.value=!0,n.value=!0,u.value=!1):"needs_confirmation"===a.state.toLowerCase()?(d.value=!0,u.value=!1,i.value=!0,h.value=t,p.value=!0,S()):"Failure"===a.state&&a.msg.includes("Attempt limit exceeded")&&ke.dispatch({text:"Must wait before resetting password again."}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),D.apply(this,arguments)}function P(e){return T.apply(this,arguments)}function T(){return T=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=new We(qe,""),e.next=4,a.confirm_user_status_via_email(h.value,t);case 4:r=e.sent,"Success"===r?(i.value=!1,l.value=!0,p.value?(M(h.value),f.value=!0):n.value=!0):ke.dispatch({text:"Wrong confirmation code entered. Try again.",options:{color:"red"}}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("error"),ke.dispatch({text:"There was an error when attempting to confirm user."});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),T.apply(this,arguments)}function E(e){return B.apply(this,arguments)}function B(){return B=Object(k["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.code,r=t.password,i=t.username,u=new We(qe,""),e.next=5,u.resetPassword(i,r,a);case 5:l=e.sent,"Success"===l?(ke.dispatch({text:"Password has been reset.",options:{color:"green"}}),n.value=!0,f.value=!1):"wrong_code"===l&&ke.dispatch({text:"Wrong Code. Please try again."}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),B.apply(this,arguments)}return Object(v["i"])((function(){null===Xe.value||m.value||(U.commit.setComponent({component:null}),a.push("/"))})),{SERVER_URL:Ue,loginUser:O,loginErrorMessage:x,name_user:b,pi_name:_,username_from_child:h,email:w,showAdvanced:c,useTestServer:y,loading:m,show_user_creation_message:l,show_account_requires_verification_message:d,show_pass:o,password_clicked:g,forgotPasswordScreenDisplayed:u,loginScreenDisplayed:n,registrationScreenDisplayed:r,confirmationScreenDisplayed:i,resetPassScreenDisplayed:f,from_confirmation_to_password_reset:p,show_email_never_verified_message:s,send_forgot_password_code:A,send_account_request:R,resend_verification:S,forgot_password_request:M,check_registration_code_signup:P,reset_password:E}}}),Bp=Up,qp=(a("7f10"),Object(te["a"])(Bp,Zv,ep,!1,null,"a7724cc4",null)),Np=qp.exports,Lp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a(e.component.component,{tag:"component",attrs:{query:e.component}})],1)},Gp=[],$p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("atlas-xplore",{attrs:{query:e.query}})},zp=[],Vp=new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Wp=Object(v["c"])({name:"PublicGeneViewer",components:{AtlasXplore:is},props:["query"],setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client})),Object(v["a"])((function(){return t.root.$route}));Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Vp;case 2:U.commit.setSubmenu(null);case 3:case"end":return e.stop()}}),e)}))))}}),Hp=Wp,Jp=Object(te["a"])(Hp,$p,zp,!1,null,null,null),Xp=Jp.exports,Qp=(new Promise((function(e){var t=Object(v["a"])((function(){return null!==U.state.client}));Object(v["i"])((function(){t.value&&e(!0)}))})),Object(v["c"])({name:"PublicMain",props:["query"],components:{PublicGeneViewer:Xp},setup:function(e,t){t.root.$router,Object(v["a"])((function(){return U.state.client}));var a=Object(v["a"])((function(){return t.root.$route})),n=Object(v["a"])((function(){return U.state.currentComponent}));return Object(v["d"])(Object(k["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return U.commit.setSubmenu(null),t=a.value,console.log(t),t.query.component?U.commit.setComponent(t.query):U.commit.setComponent({component:null}),e.t0=U.commit,e.next=7,We.CreatePublic(qe,n.value.token);case 7:e.t1=e.sent,e.t0.setClient.call(e.t0,e.t1);case 9:case"end":return e.stop()}}),e)})))),Object(v["e"])(Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),{component:n}}})),Yp=Qp,Kp=Object(te["a"])(Yp,Lp,Gp,!1,null,null,null),Zp=Kp.exports;o["default"].use(Me["a"]);var ef=[{path:"/",name:"Home",component:Kv},{path:"/login",name:"Login",component:Np},{path:"/public",name:"PublicMain",component:Zp},{path:"/visualization/:group?",name:"LandingPage",component:Jv}],tf=new Me["a"]({routes:ef,mode:"history"}),af=tf;o["default"].use(d.a),o["default"].config.productionTip=!1,new o["default"]({router:af,store:U.original,vuetify:Au,provide:{vuetify:Au},render:function(e){return e(Fe)}}).$mount("#app")},cd7d:function(e,t,a){"use strict";a("4d14")},d018:function(e,t,a){"use strict";a("c827")},d2aa:function(e,t,a){},d4a1:function(e,t,a){"use strict";a("4373")},db49:function(e,t){var a={atlasxbrowser:{root_dir:"Images",root_dir_spatial:"Images_spatial",barcode_files_path:"BarcodeFiles",bucket_name:"atx-illumina",bucket_name_spatial:"atx-illumina",lims_available:!0,barcode_mapping:{1:"bc50v1-24.txt",2:"bc50v2-24.txt",3:"bc50v3-24.txt",4:"bc50v4-24.txt",5:"bc96v2-24.txt","1 (normal)":"bc50v1-24.txt","2 (reverseB)":"bc50v2-24.txt","3 (reverseA)":"bc50v3-24.txt","4 (reverseAB)":"bc50v4-24.txt"}}};e.exports=a},db58:function(e,t,a){"use strict";a("ad7f")},db89:function(e,t,a){},df51:function(e,t,a){},e4ae:function(e,t,a){"use strict";a("abb5")},ec22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC8ElEQVRoge3ZT4hWVRgG8J/jqIz/hhSDNDdJupFaOCpkG20RtJPQtYToQigRRMlFIpYK0UIrl20iAmmRuI3CfQUmiG7M/Fc6kIqOUsm0ON/g3POdb+a79577zYDzwFm835x5zvOc+95z3nMuM5jB841ZmXj6sAGbMYQ1WI6F+BfDuIvfcR4/4TeMTsL7EY500a8yVuAYrrcGKdNu4BCWTSB+VL5JLmApvsSTCsLj9hinMJgQ34iB7UI61BUet5vYGonPaqBfmPVOAu7ha+zEeiE15mA+VgrvyPs4g4cljGUxMICzHQa4hB2tPt1iEHtwtRcG+juIH8He1t+rYgCH8V+CP5uBVNrcwLq6xC3EOZ/VwPYE4S94qQ7pOEwmvpaBJbgTkd0S1v4cOGBy8bUMfBERjciXNo1jhfZNau+UKiqJT7QvlXVWm56iT3tts2NKFZXERkXx95XbpHqKvsRvm6P4nFBwTUukDAxF8Y+9EFIVKQNrovhCL4TkxLDiO9DpwDFtEa//86ZWzsRIpdB0woDiZD6KO6QMPIzixfl1dY2lUfx33CFl4HYUv5JNTnm8GsWxtqSBy1H8WjY55TGKn/G0FV/s5p8OKubdN41IK4fFeAdvdNN5g/ZSYn5j0hpAH/5QNPHeFOiodZT8WNHAZb0tpweFEv5DLKpCkDrQ7Mulrgt8Nm7cYXxQheRzRQMjwoVV09girDrjxz5chSh1qL8p3Do3iZXCzcfYmNexoCrZNkUDY9cqTRd4C4QryKd4qy7ZKe0mrmBtXeJxeFN7yTJL++GqEvrxvfTV4iE1Hq8g+lNhpr/T0LcAQlWYMjH2XuxWfrObg2sR1/5MepPox0lpE6N4gG+xS7gYeBFzBfMvC7m8KeI8HXH8owfF47v4q4OJydoPEdcqz26mb+HtpsWP4QXhaTyeQGynpzQ74voKJxQ/MfUMy3FUey5P1F7PKSDnZ9Z1wi46hNVC3i/0bOb/FOqb4/g107gzmMFzj/8BBh9kihKEy7MAAAAASUVORK5CYII="},f5dd:function(e,t,a){"use strict";a("db89")}});
//# sourceMappingURL=app.0abf86e7.js.map